var qn=class{constructor(){this.cells=[],this.focusedCellId=null,this.kernelStatus="connecting",this.canUndo=!1,this.canRedo=!1,this.loaded=!1,this._listeners=new Map}on(e,t){this._listeners.has(e)||this._listeners.set(e,[]),this._listeners.get(e).push(t)}off(e,t){let r=this._listeners.get(e);if(r){let n=r.indexOf(t);n!==-1&&r.splice(n,1)}}emit(e,t){let r=this._listeners.get(e);r&&r.forEach(n=>n(t))}loadNotebook(e){if(this.cells=e.cells,this.canUndo=e.can_undo,this.canRedo=e.can_redo,this.loaded=!0,!this.focusedCellId||!this.cells.find(t=>t.id===this.focusedCellId)){let t=this.cells.find(r=>r.kind==="code");this.focusedCellId=t?t.id:this.cells.length>0?this.cells[0].id:null}this.emit("notebook:loaded",this.cells)}findCell(e){return this.cells.find(t=>t.id===e)}findCellIndex(e){return this.cells.findIndex(t=>t.id===e)}setCellStatus(e,t){let r=this.findCell(e);r&&(r.status=t,this.emit("cell:status",{cellId:e,status:t}))}finishExecution(e,t){let r=this.findCell(e);r&&(r.lastRunSuccess=t,r.status="idle",this.emit("cell:execution-done",{cellId:e,success:t}))}appendOutput(e,t){let r=this.findCell(e);r&&(r.outputs||(r.outputs=[]),r.outputs.push(t),this.emit("cell:output",{cellId:e,output:t}))}clearOutputs(e){let t=this.findCell(e);t&&t.outputs&&(t.outputs=[],this.emit("cell:outputs-cleared",{cellId:e}))}updateCell(e,t){let r=this.findCellIndex(e);if(r!==-1){let n=this.cells[r];n.lastRunSuccess!==void 0&&(t.lastRunSuccess=n.lastRunSuccess),this.cells[r]=t,this.emit("cell:updated",{cellId:e,cell:t})}}insertCell(e,t){this.cells.splice(e,0,t),this.emit("cell:inserted",{pos:e,cell:t})}deleteCell(e){let t=this.findCellIndex(e);if(t!==-1&&(this.cells.splice(t,1),this.emit("cell:deleted",{cellId:e}),this.focusedCellId===e))if(this.cells.length>0){let r=Math.min(t,this.cells.length-1);this.setFocus(this.cells[r].id)}else this.focusedCellId=null}moveCell(e,t){let r=this.findCellIndex(e);if(r!==-1){let[n]=this.cells.splice(r,1);this.cells.splice(t,0,n),this.emit("cell:moved",{cellId:e,pos:t})}}setUndoRedo(e,t){this.canUndo=e,this.canRedo=t,this.emit("undo-redo:changed",{canUndo:e,canRedo:t})}setConnectionStatus(e){this.kernelStatus=e,this.emit("connection:changed",{status:e})}setFocus(e){let t=this.focusedCellId;this.focusedCellId=e,this.emit("focus:changed",{cellId:e,prevCellId:t})}clearFocus(){if(this.focusedCellId){let e=this.focusedCellId;this.focusedCellId=null,this.emit("focus:changed",{cellId:null,prevCellId:e})}}focusNext(){let e=this.findCellIndex(this.focusedCellId);e<this.cells.length-1&&this.setFocus(this.cells[e+1].id)}focusPrev(){let e=this.findCellIndex(this.focusedCellId);e>0&&this.setFocus(this.cells[e-1].id)}};var Wn=class{constructor(e){this.store=e,this.ws=null,this.reconnectDelay=1e3,this._pendingCompletions=new Map,this._pendingTypeAt=new Map,this._pendingDiagnostics=new Map,this._requestCounter=0,this._sourceDebounceTimers=new Map}connect(){let t=`${location.protocol==="https:"?"wss:":"ws:"}//${location.host}/ws`;this.ws=new WebSocket(t),this.ws.onopen=()=>{let r=this.reconnectDelay>1e3;this.reconnectDelay=1e3,this.store.setConnectionStatus("connected"),r&&this.store.emit("reconnected")},this.ws.onmessage=r=>{try{let n=JSON.parse(r.data);console.debug("[ws]",n.type,n.cell_id||""),this._onMessage(n)}catch(n){console.error("[ws] message error:",n,r.data.slice(0,200))}},this.ws.onclose=()=>{this.ws=null,this.store.setConnectionStatus("disconnected"),setTimeout(()=>this.reconnect(),this.reconnectDelay)},this.ws.onerror=()=>{this.ws&&this.ws.close()}}reconnect(){this.reconnectDelay=Math.min(this.reconnectDelay*2,3e4),this.connect()}send(e){this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify(e))}_onMessage(e){switch(e.type){case"notebook":this.store.loadNotebook(e);break;case"cell_status":this.store.setCellStatus(e.cell_id,e.status);break;case"cell_output":this.store.appendOutput(e.cell_id,e.output);break;case"cell_updated":{let t=this.store.findCell(e.cell_id),r=t&&(t.status==="running"||t.status==="queued");if(this.store.updateCell(e.cell_id,e.cell),r&&e.cell.status==="idle"){let n=e.cell.outputs&&e.cell.outputs.some(s=>s.kind==="error");this.store.finishExecution(e.cell_id,!n)}break}case"cell_inserted":this.store.insertCell(e.pos,e.cell);break;case"cell_deleted":this.store.deleteCell(e.cell_id);break;case"cell_moved":this.store.moveCell(e.cell_id,e.pos);break;case"completions":{let t=this._pendingCompletions.get(e.request_id);t&&(this._pendingCompletions.delete(e.request_id),t(e.items));break}case"type_at":{let t=this._pendingTypeAt.get(e.request_id);t&&(this._pendingTypeAt.delete(e.request_id),t(e));break}case"diagnostics":{let t=this._pendingDiagnostics.get(e.request_id);t&&(this._pendingDiagnostics.delete(e.request_id),t(e));break}case"saved":this.store.emit("saved");break;case"undo_redo":this.store.setUndoRedo(e.can_undo,e.can_redo);break;case"error":this.store.emit("error",{message:e.message});break}}updateSource(e,t){let r=this._sourceDebounceTimers.get(e);r&&clearTimeout(r),this._sourceDebounceTimers.set(e,setTimeout(()=>{this._sourceDebounceTimers.delete(e),this.send({type:"update_source",cell_id:e,source:t})},150))}cancelPendingSource(e){let t=this._sourceDebounceTimers.get(e);t&&(clearTimeout(t),this._sourceDebounceTimers.delete(e))}checkpoint(){this.send({type:"checkpoint"})}executeCell(e){this.cancelPendingSource(e);let t=this.store.findCell(e);t&&this.send({type:"update_source",cell_id:e,source:t.source}),this.send({type:"execute_cell",cell_id:e})}executeCells(e){for(let t of e){this.cancelPendingSource(t);let r=this.store.findCell(t);r&&this.send({type:"update_source",cell_id:t,source:r.source})}this.send({type:"execute_cells",cell_ids:e})}executeAll(){for(let[e,t]of this._sourceDebounceTimers){clearTimeout(t);let r=this.store.findCell(e);r&&this.send({type:"update_source",cell_id:e,source:r.source})}this._sourceDebounceTimers.clear(),this.send({type:"execute_all"})}interrupt(){this.send({type:"interrupt"})}insertCell(e,t){this.send({type:"insert_cell",pos:e,kind:t})}deleteCell(e){this.send({type:"delete_cell",cell_id:e})}moveCell(e,t){this.send({type:"move_cell",cell_id:e,pos:t})}setCellKind(e,t){this.send({type:"set_cell_kind",cell_id:e,kind:t})}setCellAttrs(e,t){this.send({type:"set_cell_attrs",cell_id:e,...t})}clearOutputs(e){this.send({type:"clear_outputs",cell_id:e})}clearAllOutputs(){this.send({type:"clear_all_outputs"})}save(){this.send({type:"save"})}undo(){this.send({type:"undo"})}redo(){this.send({type:"redo"})}complete(e,t){let r=`req_${++this._requestCounter}`;return new Promise(n=>{this._pendingCompletions.set(r,n),this.send({type:"complete",request_id:r,code:e,pos:t}),setTimeout(()=>{this._pendingCompletions.has(r)&&(this._pendingCompletions.delete(r),n([]))},3e3)})}typeAt(e,t){let r=`req_${++this._requestCounter}`;return new Promise(n=>{this._pendingTypeAt.set(r,n),this.send({type:"type_at",request_id:r,code:e,pos:t}),setTimeout(()=>{this._pendingTypeAt.has(r)&&(this._pendingTypeAt.delete(r),n(null))},3e3)})}diagnostics(e){let t=`req_${++this._requestCounter}`;return new Promise(r=>{this._pendingDiagnostics.set(t,r),this.send({type:"diagnostics",request_id:t,code:e}),setTimeout(()=>{this._pendingDiagnostics.has(t)&&(this._pendingDiagnostics.delete(t),r({items:[]}))},3e3)})}};var rl=[],Ih=[];(()=>{let i="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<i.length;e++)(e%2?Ih:rl).push(t=t+i[e])})();function x1(i){if(i<768)return!1;for(let e=0,t=rl.length;;){let r=e+t>>1;if(i<rl[r])t=r;else if(i>=Ih[r])e=r+1;else return!0;if(e==t)return!1}}function zh(i){return i>=127462&&i<=127487}var Lh=8205;function Ph(i,e,t=!0,r=!0){return(t?Nh:w1)(i,e,r)}function Nh(i,e,t){if(e==i.length)return e;e&&Fh(i.charCodeAt(e))&&Hh(i.charCodeAt(e-1))&&e--;let r=tl(i,e);for(e+=Rh(r);e<i.length;){let n=tl(i,e);if(r==Lh||n==Lh||t&&x1(n))e+=Rh(n),r=n;else if(zh(n)){let s=0,o=e-2;for(;o>=0&&zh(tl(i,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function w1(i,e,t){for(;e>0;){let r=Nh(i,e-2,t);if(r<e)return r;e--}return 0}function tl(i,e){let t=i.charCodeAt(e);if(!Hh(t)||e+1==i.length)return t;let r=i.charCodeAt(e+1);return Fh(r)?(t-55296<<10)+(r-56320)+65536:t}function Fh(i){return i>=56320&&i<57344}function Hh(i){return i>=55296&&i<56320}function Rh(i){return i<65536?1:2}var se=class i{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=hi(this,e,t);let n=[];return this.decompose(0,e,n,2),r.length&&r.decompose(0,r.length,n,3),this.decompose(t,this.length,n,1),oi.from(n,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=hi(this,e,t);let r=[];return this.decompose(e,t,r,0),oi.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),n=new Pr(this),s=new Pr(e);for(let o=t,l=t;;){if(n.next(o),s.next(o),o=0,n.lineBreak!=s.lineBreak||n.done!=s.done||n.value!=s.value)return!1;if(l+=n.value.length,n.done||l>=r)return!0}}iter(e=1){return new Pr(this,e)}iterRange(e,t=this.length){return new Kn(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let n=this.line(e).from;r=this.iterRange(n,Math.max(n,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new jn(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?i.empty:e.length<=32?new ut(e):oi.from(ut.split(e,[]))}},ut=class i extends se{constructor(e,t=k1(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,n){for(let s=0;;s++){let o=this.text[s],l=n+o.length;if((t?r:l)>=e)return new nl(n,l,r,o);n=l+1,r++}}decompose(e,t,r,n){let s=e<=0&&t>=this.length?this:new i(qh(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(n&1){let o=r.pop(),l=Un(s.text,o.text.slice(),0,s.length);if(l.length<=32)r.push(new i(l,o.length+s.length));else{let a=l.length>>1;r.push(new i(l.slice(0,a)),new i(l.slice(a)))}}else r.push(s)}replace(e,t,r){if(!(r instanceof i))return super.replace(e,t,r);[e,t]=hi(this,e,t);let n=Un(this.text,Un(r.text,qh(this.text,0,e)),t),s=this.length+r.length-(t-e);return n.length<=32?new i(n,s):oi.from(i.split(n,[]),s)}sliceString(e,t=this.length,r=`
`){[e,t]=hi(this,e,t);let n="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let l=this.text[o],a=s+l.length;s>e&&o&&(n+=r),e<a&&t>s&&(n+=l.slice(Math.max(0,e-s),t-s)),s=a+1}return n}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],n=-1;for(let s of e)r.push(s),n+=s.length+1,r.length==32&&(t.push(new i(r,n)),r=[],n=-1);return n>-1&&t.push(new i(r,n)),t}},oi=class i extends se{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,n){for(let s=0;;s++){let o=this.children[s],l=n+o.length,a=r+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,r,n);n=l+1,r=a+1}}decompose(e,t,r,n){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let l=this.children[s],a=o+l.length;if(e<=a&&t>=o){let h=n&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!h?r.push(l):l.decompose(e-o,t-o,r,h)}o=a+1}}replace(e,t,r){if([e,t]=hi(this,e,t),r.lines<this.lines)for(let n=0,s=0;n<this.children.length;n++){let o=this.children[n],l=s+o.length;if(e>=s&&t<=l){let a=o.replace(e-s,t-s,r),h=this.lines-o.lines+a.lines;if(a.lines<h>>4&&a.lines>h>>6){let c=this.children.slice();return c[n]=a,new i(c,this.length-(t-e)+r.length)}return super.replace(s,l,a)}s=l+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){[e,t]=hi(this,e,t);let n="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let l=this.children[s],a=o+l.length;o>e&&s&&(n+=r),e<a&&t>o&&(n+=l.sliceString(e-o,t-o,r)),o=a+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof i))return 0;let r=0,[n,s,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=t,s+=t){if(n==o||s==l)return r;let a=this.children[n],h=e.children[s];if(a!=h)return r+a.scanIdentical(h,t);r+=a.length+1}}static from(e,t=e.reduce((r,n)=>r+n.length+1,-1)){let r=0;for(let p of e)r+=p.lines;if(r<32){let p=[];for(let v of e)v.flatten(p);return new ut(p,t)}let n=Math.max(32,r>>5),s=n<<1,o=n>>1,l=[],a=0,h=-1,c=[];function u(p){let v;if(p.lines>s&&p instanceof i)for(let y of p.children)u(y);else p.lines>o&&(a>o||!a)?(d(),l.push(p)):p instanceof ut&&a&&(v=c[c.length-1])instanceof ut&&p.lines+v.lines<=32?(a+=p.lines,h+=p.length+1,c[c.length-1]=new ut(v.text.concat(p.text),v.length+1+p.length)):(a+p.lines>n&&d(),a+=p.lines,h+=p.length+1,c.push(p))}function d(){a!=0&&(l.push(c.length==1?c[0]:i.from(c,h)),h=-1,a=c.length=0)}for(let p of e)u(p);return d(),l.length==1?l[0]:new i(l,t)}};se.empty=new ut([""],0);function k1(i){let e=-1;for(let t of i)e+=t.length+1;return e}function Un(i,e,t=0,r=1e9){for(let n=0,s=0,o=!0;s<i.length&&n<=r;s++){let l=i[s],a=n+l.length;a>=t&&(a>r&&(l=l.slice(0,r-n)),n<t&&(l=l.slice(t-n)),o?(e[e.length-1]+=l,o=!1):e.push(l)),n=a+1}return e}function qh(i,e,t){return Un(i,[""],e,t)}var Pr=class{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof ut?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,n=this.nodes[r],s=this.offsets[r],o=s>>1,l=n instanceof ut?n.text.length:n.children.length;if(o==(t>0?l:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof ut){let a=n.text[o+(t<0?-1:0)];if(this.offsets[r]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=n.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof ut?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}},Kn=class{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new Pr(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*t,this.value=n.length<=r?n:t<0?n.slice(n.length-r):n.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}},jn=class{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:n}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}};typeof Symbol<"u"&&(se.prototype[Symbol.iterator]=function(){return this.iter()},Pr.prototype[Symbol.iterator]=Kn.prototype[Symbol.iterator]=jn.prototype[Symbol.iterator]=function(){return this});var nl=class{constructor(e,t,r,n){this.from=e,this.to=t,this.number=r,this.text=n}get length(){return this.to-this.from}};function hi(i,e,t){return e=Math.max(0,Math.min(i.length,e)),[e,Math.max(e,Math.min(i.length,t))]}function Re(i,e,t=!0,r=!0){return Ph(i,e,t,r)}function S1(i){return i>=56320&&i<57344}function C1(i){return i>=55296&&i<56320}function Xe(i,e){let t=i.charCodeAt(e);if(!C1(t)||e+1==i.length)return t;let r=i.charCodeAt(e+1);return S1(r)?(t-55296<<10)+(r-56320)+65536:t}function qi(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}function vt(i){return i<65536?1:2}var sl=/\r\n?|\n/,We=function(i){return i[i.Simple=0]="Simple",i[i.TrackDel=1]="TrackDel",i[i.TrackBefore=2]="TrackBefore",i[i.TrackAfter=3]="TrackAfter",i}(We||(We={})),nr=class i{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,n=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(r,n,s),n+=s):n+=o,r+=s}}iterChangedRanges(e,t=!1){ol(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],n=this.sections[t++];n<0?e.push(r,n):e.push(n,r)}return new i(e)}composeDesc(e){return this.empty?e:e.empty?this:Uh(this,e)}mapDesc(e,t=!1){return e.empty?this:ll(this,e,t)}mapPos(e,t=-1,r=We.Simple){let n=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],h=n+l;if(a<0){if(h>e)return s+(e-n);s+=l}else{if(r!=We.Simple&&h>=e&&(r==We.TrackDel&&n<e&&h>e||r==We.TrackBefore&&n<e||r==We.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!l)return e==n||t<0?s:s+a;s+=a}n=h}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return s}touchesRange(e,t=e){for(let r=0,n=0;r<this.sections.length&&n<=t;){let s=this.sections[r++],o=this.sections[r++],l=n+s;if(o>=0&&n<=t&&l>=e)return n<e&&l>t?"cover":!0;n=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+r+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new i(e)}static create(e){return new i(e)}},Ye=class i extends nr{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return ol(this,(t,r,n,s,o)=>e=e.replace(n,n+(r-t),o),!1),e}mapDesc(e,t=!1){return ll(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let n=0,s=0;n<t.length;n+=2){let o=t[n],l=t[n+1];if(l>=0){t[n]=l,t[n+1]=o;let a=n>>1;for(;r.length<a;)r.push(se.empty);r.push(o?e.slice(s,s+o):se.empty)}s+=o}return new i(t,r)}compose(e){return this.empty?e:e.empty?this:Uh(this,e,!0)}map(e,t=!1){return e.empty?this:ll(this,e,t,!0)}iterChanges(e,t=!1){ol(this,e,t)}get desc(){return nr.create(this.sections)}filter(e){let t=[],r=[],n=[],s=new Nr(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,a-l);$e(n,c,-1);let u=s.ins==-1?-1:s.off==0?s.ins:0;$e(t,c,u),u>0&&gr(r,t,s.text),s.forward(c),l+=c}let h=e[o++];for(;l<h;){if(s.done)break e;let c=Math.min(s.len,h-l);$e(t,c,-1),$e(n,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),l+=c}}return{changes:new i(t,r),filtered:nr.create(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],n=this.sections[t+1];n<0?e.push(r):n==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let n=[],s=[],o=0,l=null;function a(c=!1){if(!c&&!n.length)return;o<t&&$e(n,t-o,-1);let u=new i(n,s);l=l?l.compose(u.map(l)):u,n=[],s=[],o=0}function h(c){if(Array.isArray(c))for(let u of c)h(u);else if(c instanceof i){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);a(),l=l?l.compose(c.map(l)):c}else{let{from:u,to:d=u,insert:p}=c;if(u>d||u<0||d>t)throw new RangeError(`Invalid change range ${u} to ${d} (in doc of length ${t})`);let v=p?typeof p=="string"?se.of(p.split(r||sl)):p:se.empty,y=v.length;if(u==d&&y==0)return;u<o&&a(),u>o&&$e(n,u-o,-1),$e(n,d-u,y),gr(s,n,v),o=d}}return h(e),a(!l),l}static empty(e){return new i(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let n=0;n<e.length;n++){let s=e[n];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;r.length<n;)r.push(se.empty);r[n]=se.of(s.slice(1)),t.push(s[0],r[n].length)}}}return new i(t,r)}static createSet(e,t){return new i(e,t)}};function $e(i,e,t,r=!1){if(e==0&&t<=0)return;let n=i.length-2;n>=0&&t<=0&&t==i[n+1]?i[n]+=e:n>=0&&e==0&&i[n]==0?i[n+1]+=t:r?(i[n]+=e,i[n+1]+=t):i.push(e,t)}function gr(i,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<i.length)i[i.length-1]=i[i.length-1].append(t);else{for(;i.length<r;)i.push(se.empty);i.push(t)}}function ol(i,e,t){let r=i.inserted;for(let n=0,s=0,o=0;o<i.sections.length;){let l=i.sections[o++],a=i.sections[o++];if(a<0)n+=l,s+=l;else{let h=n,c=s,u=se.empty;for(;h+=l,c+=a,a&&r&&(u=u.append(r[o-2>>1])),!(t||o==i.sections.length||i.sections[o+1]<0);)l=i.sections[o++],a=i.sections[o++];e(n,h,s,c,u),n=h,s=c}}}function ll(i,e,t,r=!1){let n=[],s=r?[]:null,o=new Nr(i),l=new Nr(e);for(let a=-1;;){if(o.done&&l.len||l.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&l.ins==-1){let h=Math.min(o.len,l.len);$e(n,h,-1),o.forward(h),l.forward(h)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let h=l.len;for($e(n,l.ins,-1);h;){let c=Math.min(o.len,h);o.ins>=0&&a<o.i&&o.len<=c&&($e(n,0,o.ins),s&&gr(s,n,o.text),a=o.i),o.forward(c),h-=c}l.next()}else if(o.ins>=0){let h=0,c=o.len;for(;c;)if(l.ins==-1){let u=Math.min(c,l.len);h+=u,c-=u,l.forward(u)}else if(l.ins==0&&l.len<c)c-=l.len,l.next();else break;$e(n,h,a<o.i?o.ins:0),s&&a<o.i&&gr(s,n,o.text),a=o.i,o.forward(o.len-c)}else{if(o.done&&l.done)return s?Ye.createSet(n,s):nr.create(n);throw new Error("Mismatched change set lengths")}}}function Uh(i,e,t=!1){let r=[],n=t?[]:null,s=new Nr(i),o=new Nr(e);for(let l=!1;;){if(s.done&&o.done)return n?Ye.createSet(r,n):nr.create(r);if(s.ins==0)$e(r,s.len,0,l),s.next();else if(o.len==0&&!o.done)$e(r,0,o.ins,l),n&&gr(n,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,o.len),h=r.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;$e(r,a,c,l),n&&c&&gr(n,r,o.text)}else o.ins==-1?($e(r,s.off?0:s.len,a,l),n&&gr(n,r,s.textBit(a))):($e(r,s.off?0:s.len,o.off?0:o.ins,l),n&&!o.off&&gr(n,r,o.text));l=(s.ins>a||o.ins>=0&&o.len>a)&&(l||r.length>h),s.forward2(a),o.forward(a)}}}}var Nr=class{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?se.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?se.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}},si=class i{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let r,n;return this.empty?r=n=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),r==this.from&&n==this.to?this:new i(r,n,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return I.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return I.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&this.goalColumn==e.goalColumn&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return I.range(e.anchor,e.head)}static create(e,t,r){return new i(e,t,r)}},I=class i{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:i.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new i([this.main],0)}addRange(e,t=!0){return i.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,i.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new i(e.ranges.map(t=>si.fromJSON(t)),e.main)}static single(e,t=e){return new i([i.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,n=0;n<e.length;n++){let s=e[n];if(s.empty?s.from<=r:s.from<r)return i.normalized(e.slice(),t);r=s.to}return new i(e,t)}static cursor(e,t=0,r,n){return si.create(e,e,(t==0?0:t<0?8:16)|(r==null?7:Math.min(6,r))|(n??16777215)<<6)}static range(e,t,r,n){let s=(r??16777215)<<6|(n==null?7:Math.min(6,n));return t<e?si.create(t,e,48|s):si.create(e,t,(t>e?8:0)|s)}static normalized(e,t=0){let r=e[t];e.sort((n,s)=>n.from-s.from),t=e.indexOf(r);for(let n=1;n<e.length;n++){let s=e[n],o=e[n-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,a=Math.max(s.to,o.to);n<=t&&t--,e.splice(--n,2,s.anchor>s.head?i.range(a,l):i.range(l,a))}}return new i(e,t)}};function Kh(i,e){for(let t of i.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}var vl=0,H=class i{constructor(e,t,r,n,s){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=n,this.id=vl++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new i(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:bl),!!e.static,e.enables)}of(e){return new li([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new li(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new li(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}};function bl(i,e){return i==e||i.length==e.length&&i.every((t,r)=>t===e[r])}var li=class{constructor(e,t,r,n){this.dependencies=e,this.facet=t,this.type=r,this.value=n,this.id=vl++}dynamicSlot(e){var t;let r=this.value,n=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,a=!1,h=!1,c=[];for(let u of this.dependencies)u=="doc"?a=!0:u=="selection"?h=!0:((t=e[u.id])!==null&&t!==void 0?t:1)&1||c.push(e[u.id]);return{create(u){return u.values[o]=r(u),1},update(u,d){if(a&&d.docChanged||h&&(d.docChanged||d.selection)||al(u,c)){let p=r(u);if(l?!Wh(p,u.values[o],n):!n(p,u.values[o]))return u.values[o]=p,1}return 0},reconfigure:(u,d)=>{let p,v=d.config.address[s];if(v!=null){let y=Jn(d,v);if(this.dependencies.every(w=>w instanceof H?d.facet(w)===u.facet(w):w instanceof Ie?d.field(w,!1)==u.field(w,!1):!0)||(l?Wh(p=r(u),y,n):n(p=r(u),y)))return u.values[o]=y,0}else p=r(u);return u.values[o]=p,1}}}};function Wh(i,e,t){if(i.length!=e.length)return!1;for(let r=0;r<i.length;r++)if(!t(i[r],e[r]))return!1;return!0}function al(i,e){let t=!1;for(let r of e)Pi(i,r)&1&&(t=!0);return t}function A1(i,e,t){let r=t.map(a=>i[a.id]),n=t.map(a=>a.type),s=r.filter(a=>!(a&1)),o=i[e.id]>>1;function l(a){let h=[];for(let c=0;c<r.length;c++){let u=Jn(a,r[c]);if(n[c]==2)for(let d of u)h.push(d);else h.push(u)}return e.combine(h)}return{create(a){for(let h of r)Pi(a,h);return a.values[o]=l(a),1},update(a,h){if(!al(a,s))return 0;let c=l(a);return e.compare(c,a.values[o])?0:(a.values[o]=c,1)},reconfigure(a,h){let c=al(a,r),u=h.config.facets[e.id],d=h.facet(e);if(u&&!c&&bl(t,u))return a.values[o]=d,0;let p=l(a);return e.compare(p,d)?(a.values[o]=d,0):(a.values[o]=p,1)}}}var Vn=H.define({static:!0}),Ie=class i{constructor(e,t,r,n,s){this.id=e,this.createF=t,this.updateF=r,this.compareF=n,this.spec=s,this.provides=void 0}static define(e){let t=new i(vl++,e.create,e.update,e.compare||((r,n)=>r===n),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Vn).find(r=>r.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,n)=>{let s=r.values[t],o=this.updateF(s,n);return this.compareF(s,o)?0:(r.values[t]=o,1)},reconfigure:(r,n)=>{let s=r.facet(Vn),o=n.facet(Vn),l;return(l=s.find(a=>a.field==this))&&l!=o.find(a=>a.field==this)?(r.values[t]=l.create(r),1):n.config.address[this.id]!=null?(r.values[t]=n.field(this),0):(r.values[t]=this.create(r),1)}}}init(e){return[this,Vn.of({field:this,create:e})]}get extension(){return this}},Rr={lowest:4,low:3,default:2,high:1,highest:0};function Ii(i){return e=>new Yn(e,i)}var Wt={highest:Ii(Rr.highest),high:Ii(Rr.high),default:Ii(Rr.default),low:Ii(Rr.low),lowest:Ii(Rr.lowest)},Yn=class{constructor(e,t){this.inner=e,this.prec=t}},Xn=class i{of(e){return new Ni(this,e)}reconfigure(e){return i.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}},Ni=class{constructor(e,t){this.compartment=e,this.inner=t}},_n=class i{constructor(e,t,r,n,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=n,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let n=[],s=Object.create(null),o=new Map;for(let d of M1(e,t,o))d instanceof Ie?n.push(d):(s[d.facet.id]||(s[d.facet.id]=[])).push(d);let l=Object.create(null),a=[],h=[];for(let d of n)l[d.id]=h.length<<1,h.push(p=>d.slot(p));let c=r?.config.facets;for(let d in s){let p=s[d],v=p[0].facet,y=c&&c[d]||[];if(p.every(w=>w.type==0))if(l[v.id]=a.length<<1|1,bl(y,p))a.push(r.facet(v));else{let w=v.combine(p.map(S=>S.value));a.push(r&&v.compare(w,r.facet(v))?r.facet(v):w)}else{for(let w of p)w.type==0?(l[w.id]=a.length<<1|1,a.push(w.value)):(l[w.id]=h.length<<1,h.push(S=>w.dynamicSlot(S)));l[v.id]=h.length<<1,h.push(w=>A1(w,v,p))}}let u=h.map(d=>d(l));return new i(e,o,u,l,a,s)}};function M1(i,e,t){let r=[[],[],[],[],[]],n=new Map;function s(o,l){let a=n.get(o);if(a!=null){if(a<=l)return;let h=r[a].indexOf(o);h>-1&&r[a].splice(h,1),o instanceof Ni&&t.delete(o.compartment)}if(n.set(o,l),Array.isArray(o))for(let h of o)s(h,l);else if(o instanceof Ni){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(o.compartment)||o.inner;t.set(o.compartment,h),s(h,l)}else if(o instanceof Yn)s(o.inner,o.prec);else if(o instanceof Ie)r[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof li)r[l].push(o),o.facet.extensions&&s(o.facet.extensions,Rr.default);else{let h=o.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(h,l)}}return s(i,Rr.default),r.reduce((o,l)=>o.concat(l))}function Pi(i,e){if(e&1)return 2;let t=e>>1,r=i.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;i.status[t]=4;let n=i.computeSlot(i,i.config.dynamicSlots[t]);return i.status[t]=2|n}function Jn(i,e){return e&1?i.config.staticValues[e>>1]:i.values[e>>1]}var jh=H.define(),hl=H.define({combine:i=>i.some(e=>e),static:!0}),Yh=H.define({combine:i=>i.length?i[0]:void 0,static:!0}),Xh=H.define(),_h=H.define(),Jh=H.define(),Zh=H.define({combine:i=>i.length?i[0]:!1}),rt=class{constructor(e,t){this.type=e,this.value=t}static define(){return new cl}},cl=class{of(e){return new rt(this,e)}},ul=class{constructor(e){this.map=e}of(e){return new te(this,e)}},te=class i{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new i(this.type,t)}is(e){return this.type==e}static define(e={}){return new ul(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let n of e){let s=n.map(t);s&&r.push(s)}return r}};te.reconfigure=te.define();te.appendConfig=te.define();var Le=class i{constructor(e,t,r,n,s,o){this.startState=e,this.changes=t,this.selection=r,this.effects=n,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&Kh(r,t.newLength),s.some(l=>l.type==i.time)||(this.annotations=s.concat(i.time.of(Date.now())))}static create(e,t,r,n,s,o){return new i(e,t,r,n,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(i.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}};Le.time=rt.define();Le.userEvent=rt.define();Le.addToHistory=rt.define();Le.remote=rt.define();function T1(i,e){let t=[];for(let r=0,n=0;;){let s,o;if(r<i.length&&(n==e.length||e[n]>=i[r]))s=i[r++],o=i[r++];else if(n<e.length)s=e[n++],o=e[n++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function Qh(i,e,t){var r;let n,s,o;return t?(n=e.changes,s=Ye.empty(e.changes.length),o=i.changes.compose(e.changes)):(n=e.changes.map(i.changes),s=i.changes.mapDesc(e.changes,!0),o=i.changes.compose(n)),{changes:o,selection:e.selection?e.selection.map(s):(r=i.selection)===null||r===void 0?void 0:r.map(n),effects:te.mapEffects(i.effects,n).concat(te.mapEffects(e.effects,s)),annotations:i.annotations.length?i.annotations.concat(e.annotations):e.annotations,scrollIntoView:i.scrollIntoView||e.scrollIntoView}}function fl(i,e,t){let r=e.selection,n=ai(e.annotations);return e.userEvent&&(n=n.concat(Le.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ye?e.changes:Ye.of(e.changes||[],t,i.facet(Yh)),selection:r&&(r instanceof I?r:I.single(r.anchor,r.head)),effects:ai(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function ec(i,e,t){let r=fl(i,e.length?e[0]:{},i.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;r=Qh(r,fl(i,e[s],o?r.changes.newLength:i.doc.length),o)}let n=Le.create(i,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return B1(t?D1(n):n)}function D1(i){let e=i.startState,t=!0;for(let n of e.facet(Xh)){let s=n(i);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:T1(t,s))}if(t!==!0){let n,s;if(t===!1)s=i.changes.invertedDesc,n=Ye.empty(e.doc.length);else{let o=i.changes.filter(t);n=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}i=Le.create(e,n,i.selection&&i.selection.map(s),te.mapEffects(i.effects,s),i.annotations,i.scrollIntoView)}let r=e.facet(_h);for(let n=r.length-1;n>=0;n--){let s=r[n](i);s instanceof Le?i=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Le?i=s[0]:i=ec(e,ai(s),!1)}return i}function B1(i){let e=i.startState,t=e.facet(Jh),r=i;for(let n=t.length-1;n>=0;n--){let s=t[n](i);s&&Object.keys(s).length&&(r=Qh(r,fl(e,s,i.changes.newLength),!0))}return r==i?i:Le.create(e,i.changes,i.selection,r.effects,r.annotations,r.scrollIntoView)}var E1=[];function ai(i){return i==null?E1:Array.isArray(i)?i:[i]}var Ee=function(i){return i[i.Word=0]="Word",i[i.Space=1]="Space",i[i.Other=2]="Other",i}(Ee||(Ee={})),O1=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,dl;try{dl=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function z1(i){if(dl)return dl.test(i);for(let e=0;e<i.length;e++){let t=i[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||O1.test(t)))return!0}return!1}function L1(i){return e=>{if(!/\S/.test(e))return Ee.Space;if(z1(e))return Ee.Word;for(let t=0;t<i.length;t++)if(e.indexOf(i[t])>-1)return Ee.Word;return Ee.Other}}var fe=class i{constructor(e,t,r,n,s,o){this.config=e,this.doc=t,this.selection=r,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Pi(this,l<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return Pi(this,r),Jn(this,r)}update(...e){return ec(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:n}=t;for(let l of e.effects)l.is(Xn.reconfigure)?(t&&(n=new Map,t.compartments.forEach((a,h)=>n.set(h,a)),t=null),n.set(l.value.compartment,l.value.extension)):l.is(te.reconfigure)?(t=null,r=l.value):l.is(te.appendConfig)&&(t=null,r=ai(r).concat(l.value));let s;t?s=e.startState.values.slice():(t=_n.resolve(r,n,this),s=new i(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,h)=>h.reconfigure(a,this),null).values);let o=e.startState.facet(hl)?e.newSelection:e.newSelection.asSingle();new i(t,e.newDoc,o,s,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:I.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),n=this.changes(r.changes),s=[r.range],o=ai(r.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),h=this.changes(a.changes),c=h.map(n);for(let d=0;d<l;d++)s[d]=s[d].map(c);let u=n.mapDesc(h,!0);s.push(a.range.map(u)),n=n.compose(c),o=te.mapEffects(o,c).concat(te.mapEffects(ai(a.effects),u))}return{changes:n,selection:I.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Ye?e:Ye.of(e,this.doc.length,this.facet(i.lineSeparator))}toText(e){return se.of(e.split(this.facet(i.lineSeparator)||sl))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Pi(this,t),Jn(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let n=e[r];n instanceof Ie&&this.config.address[n.id]!=null&&(t[r]=n.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],l=e[s];n.push(o.init(a=>o.spec.fromJSON(l,a)))}}return i.create({doc:e.doc,selection:I.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=_n.resolve(e.extensions||[],new Map),r=e.doc instanceof se?e.doc:se.of((e.doc||"").split(t.staticFacet(i.lineSeparator)||sl)),n=e.selection?e.selection instanceof I?e.selection:I.single(e.selection.anchor,e.selection.head):I.single(0);return Kh(n,r.length),t.staticFacet(hl)||(n=n.asSingle()),new i(t,r,n,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(i.tabSize)}get lineBreak(){return this.facet(i.lineSeparator)||`
`}get readOnly(){return this.facet(Zh)}phrase(e,...t){for(let r of this.facet(i.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,n)=>{if(n=="$")return"$";let s=+(n||1);return!s||s>t.length?r:t[s-1]})),e}languageDataAt(e,t,r=-1){let n=[];for(let s of this.facet(jh))for(let o of s(this,t,r))Object.prototype.hasOwnProperty.call(o,e)&&n.push(o[e]);return n}charCategorizer(e){let t=this.languageDataAt("wordChars",e);return L1(t.length?t[0]:"")}wordAt(e){let{text:t,from:r,length:n}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,l=e-r;for(;o>0;){let a=Re(t,o,!1);if(s(t.slice(a,o))!=Ee.Word)break;o=a}for(;l<n;){let a=Re(t,l);if(s(t.slice(l,a))!=Ee.Word)break;l=a}return o==l?null:I.range(o+r,l+r)}};fe.allowMultipleSelections=hl;fe.tabSize=H.define({combine:i=>i.length?i[0]:4});fe.lineSeparator=Yh;fe.readOnly=Zh;fe.phrases=H.define({compare(i,e){let t=Object.keys(i),r=Object.keys(e);return t.length==r.length&&t.every(n=>i[n]==e[n])}});fe.languageData=jh;fe.changeFilter=Xh;fe.transactionFilter=_h;fe.transactionExtender=Jh;Xn.reconfigure=te.define();function it(i,e,t={}){let r={};for(let n of i)for(let s of Object.keys(n)){let o=n[s],l=r[s];if(l===void 0)r[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,s))r[s]=t[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let n in e)r[n]===void 0&&(r[n]=e[n]);return r}var gt=class{eq(e){return this==e}range(e,t=e){return Fi.create(e,t,this)}};gt.prototype.startSide=gt.prototype.endSide=0;gt.prototype.point=!1;gt.prototype.mapMode=We.TrackDel;function yl(i,e){return i==e||i.constructor==e.constructor&&i.eq(e)}var Fi=class i{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new i(e,t,r)}};function ml(i,e){return i.from-e.from||i.value.startSide-e.value.startSide}var pl=class i{constructor(e,t,r,n){this.from=e,this.to=t,this.value=r,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,n=0){let s=r?this.to:this.from;for(let o=n,l=s.length;;){if(o==l)return o;let a=o+l>>1,h=s[a]-e||(r?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return h>=0?o:l;h>=0?l=a:o=a+1}}between(e,t,r,n){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(n(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let r=[],n=[],s=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let h=this.value[a],c=this.from[a]+e,u=this.to[a]+e,d,p;if(c==u){let v=t.mapPos(c,h.startSide,h.mapMode);if(v==null||(d=p=v,h.startSide!=h.endSide&&(p=t.mapPos(c,h.endSide),p<d)))continue}else if(d=t.mapPos(c,h.startSide),p=t.mapPos(u,h.endSide),d>p||d==p&&h.startSide>0&&h.endSide<=0)continue;(p-d||h.endSide-h.startSide)<0||(o<0&&(o=d),h.point&&(l=Math.max(l,p-d)),r.push(h),n.push(d-o),s.push(p-o))}return{mapped:r.length?new i(n,s,r,l):null,pos:o}}},le=class i{constructor(e,t,r,n){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=n}static create(e,t,r,n){return new i(e,t,r,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:n=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(r&&(t=t.slice().sort(ml)),this.isEmpty)return t.length?i.of(t):this;let l=new Zn(this,null,-1).goto(0),a=0,h=[],c=new Et;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let u=t[a++];c.addInner(u.from,u.to,u.value)||h.push(u)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||n>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&c.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||n>l.to||s<l.from||o(l.from,l.to,l.value))&&(c.addInner(l.from,l.to,l.value)||h.push(Fi.create(l.from,l.to,l.value))),l.next());return c.finishInner(this.nextLayer.isEmpty&&!h.length?i.empty:this.nextLayer.update({add:h,filter:o,filterFrom:n,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],n=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],h=e.touchesRange(l,l+a.length);if(h===!1)n=Math.max(n,a.maxPoint),t.push(a),r.push(e.mapPos(l));else if(h===!0){let{mapped:c,pos:u}=a.map(l,e);c&&(n=Math.max(n,c.maxPoint),t.push(c),r.push(u))}}let s=this.nextLayer.map(e);return t.length==0?s:new i(r,t,s||i.empty,n)}between(e,t,r){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let s=this.chunkPos[n],o=this.chunk[n];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return Hi.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Hi.from(e).goto(t)}static compare(e,t,r,n,s=-1){let o=e.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),l=t.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),a=Vh(o,l,r),h=new Ir(o,a,s),c=new Ir(l,a,s);r.iterGaps((u,d,p)=>$h(h,u,c,d,p,n)),r.empty&&r.length==0&&$h(h,0,c,0,0,n)}static eq(e,t,r=0,n){n==null&&(n=999999999);let s=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),o=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=Vh(s,o),a=new Ir(s,l,0).goto(r),h=new Ir(o,l,0).goto(r);for(;;){if(a.to!=h.to||!gl(a.active,h.active)||a.point&&(!h.point||!yl(a.point,h.point)))return!1;if(a.to>n)return!0;a.next(),h.next()}}static spans(e,t,r,n,s=-1){let o=new Ir(e,null,s).goto(t),l=t,a=o.openStart;for(;;){let h=Math.min(o.to,r);if(o.point){let c=o.activeForPoint(o.to),u=o.pointFrom<t?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,a);n.point(l,h,o.point,c,u,o.pointRank),a=Math.min(o.openEnd(h),c.length)}else h>l&&(n.span(l,h,o.active,a),a=o.openEnd(h));if(o.to>r)return a+(o.point&&o.to>r?1:0);l=o.to,o.next()}}static of(e,t=!1){let r=new Et;for(let n of e instanceof Fi?[e]:t?R1(e):e)r.add(n.from,n.to,n.value);return r.finish()}static join(e){if(!e.length)return i.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let n=e[r];n!=i.empty;n=n.nextLayer)t=new i(n.chunkPos,n.chunk,t,Math.max(n.maxPoint,t.maxPoint));return t}};le.empty=new le([],[],null,-1);function R1(i){if(i.length>1)for(let e=i[0],t=1;t<i.length;t++){let r=i[t];if(ml(e,r)>0)return i.slice().sort(ml);e=r}return i}le.empty.nextLayer=le.empty;var Et=class i{finishChunk(e){this.chunks.push(new pl(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new i)).add(e,t,r)}addInner(e,t,r){let n=e-this.lastTo||r.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(le.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=le.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}};function Vh(i,e,t){let r=new Map;for(let s of i)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let n=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=r.get(s.chunk[o]);l!=null&&(t?t.mapPos(l):l)==s.chunkPos[o]&&!t?.touchesRange(l,l+s.chunk[o].length)&&n.add(s.chunk[o])}return n}var Zn=class{constructor(e,t,r,n=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}},Hi=class i{constructor(e){this.heap=e}static from(e,t=null,r=-1){let n=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&n.push(new Zn(o,t,r,s));return n.length==1?n[0]:new i(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)il(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)il(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),il(this.heap,0)}}};function il(i,e){for(let t=i[e];;){let r=(e<<1)+1;if(r>=i.length)break;let n=i[r];if(r+1<i.length&&n.compare(i[r+1])>=0&&(n=i[r+1],r++),t.compare(n)<0)break;i[r]=t,i[e]=n,e=r}}var Ir=class{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Hi.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){$n(this.active,e),$n(this.activeTo,e),$n(this.activeRank,e),this.minActive=Gh(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:n,rank:s}=this.cursor;for(;t<this.activeRank.length&&(s-this.activeRank[t]||n-this.activeTo[t])>0;)t++;Gn(this.active,t,r),Gn(this.activeTo,t,n),Gn(this.activeRank,t,s),e&&Gn(e,t,this.cursor.from),this.minActive=Gh(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),r&&$n(r,n)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let n=r.length-1;n>=0&&r[n]<e;n--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}};function $h(i,e,t,r,n,s){i.goto(e),t.goto(r);let o=r+n,l=r,a=r-e,h=!!s.boundChange;for(let c=!1;;){let u=i.to+a-t.to,d=u||i.endSide-t.endSide,p=d<0?i.to+a:t.to,v=Math.min(p,o);if(i.point||t.point?(i.point&&t.point&&yl(i.point,t.point)&&gl(i.activeForPoint(i.to),t.activeForPoint(t.to))||s.comparePoint(l,v,i.point,t.point),c=!1):(c&&s.boundChange(l),v>l&&!gl(i.active,t.active)&&s.compareRange(l,v,i.active,t.active),h&&v<o&&(u||i.openEnd(p)!=t.openEnd(p))&&(c=!0)),p>o)break;l=p,d<=0&&i.next(),d>=0&&t.next()}}function gl(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!=e[t]&&!yl(i[t],e[t]))return!1;return!0}function $n(i,e){for(let t=e,r=i.length-1;t<r;t++)i[t]=i[t+1];i.pop()}function Gn(i,e,t){for(let r=i.length-1;r>=e;r--)i[r+1]=i[r];i[e]=t}function Gh(i,e){let t=-1,r=1e9;for(let n=0;n<e.length;n++)(e[n]-r||i[n].endSide-i[t].endSide)<0&&(t=n,r=e[n]);return t}function vr(i,e,t=i.length){let r=0;for(let n=0;n<t&&n<i.length;)i.charCodeAt(n)==9?(r+=e-r%e,n++):(r++,n=Re(i,n));return r}function tc(i,e,t,r){for(let n=0,s=0;;){if(s>=e)return n;if(n==i.length)break;s+=i.charCodeAt(n)==9?t-s%t:1,n=Re(i,n)}return r===!0?-1:i.length}var xl="\u037C",rc=typeof Symbol>"u"?"__"+xl:Symbol.for(xl),wl=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{},bt=class{constructor(e,t){this.rules=[];let{finish:r}=t||{};function n(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,l,a,h){let c=[],u=/^@(\w+)\b/.exec(o[0]),d=u&&u[1]=="keyframes";if(u&&l==null)return a.push(o[0]+";");for(let p in l){let v=l[p];if(/&/.test(p))s(p.split(/,\s*/).map(y=>o.map(w=>y.replace(/&/,w))).reduce((y,w)=>y.concat(w)),v,a);else if(v&&typeof v=="object"){if(!u)throw new RangeError("The value of a property ("+p+") should be a primitive value.");s(n(p),v,c,d)}else v!=null&&c.push(p.replace(/_.*/,"").replace(/[A-Z]/g,y=>"-"+y.toLowerCase())+": "+v+";")}(c.length||d)&&a.push((r&&!u&&!h?o.map(r):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(n(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=ic[rc]||1;return ic[rc]=e+1,xl+e.toString(36)}static mount(e,t,r){let n=e[wl],s=r&&r.nonce;n?s&&n.setNonce(s):n=new kl(e,s),n.mount(Array.isArray(t)?t:[t],e)}},nc=new Map,kl=class{constructor(e,t){let r=e.ownerDocument||e,n=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let s=nc.get(r);if(s)return e[wl]=s;this.sheet=new n.CSSStyleSheet,nc.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[wl]=this}mount(e,t){let r=this.sheet,n=0,s=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,l),r)for(let h=0;h<l.rules.length;h++)r.insertRule(l.rules[h],n++)}else{for(;s<a;)n+=this.modules[s++].rules.length;n+=l.rules.length,s++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}};var sr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ci={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},I1=typeof navigator<"u"&&/Mac/.test(navigator.platform),P1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(Oe=0;Oe<10;Oe++)sr[48+Oe]=sr[96+Oe]=String(Oe);var Oe;for(Oe=1;Oe<=24;Oe++)sr[Oe+111]="F"+Oe;var Oe;for(Oe=65;Oe<=90;Oe++)sr[Oe]=String.fromCharCode(Oe+32),ci[Oe]=String.fromCharCode(Oe);var Oe;for(Qn in sr)ci.hasOwnProperty(Qn)||(ci[Qn]=sr[Qn]);var Qn;function sc(i){var e=I1&&i.metaKey&&i.shiftKey&&!i.ctrlKey&&!i.altKey||P1&&i.shiftKey&&i.key&&i.key.length==1||i.key=="Unidentified",t=!e&&i.key||(i.shiftKey?ci:sr)[i.keyCode]||i.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function nt(){var i=arguments[0];typeof i=="string"&&(i=document.createElement(i));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=t[r];typeof n=="string"?i.setAttribute(r,n):n!=null&&(i[r]=n)}e++}for(;e<arguments.length;e++)oc(i,arguments[e]);return i}function oc(i,e){if(typeof e=="string")i.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)i.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)oc(i,e[t]);else throw new RangeError("Unsupported child node: "+e)}var _e=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Ol=typeof document<"u"?document:{documentElement:{style:{}}},zl=/Edge\/(\d+)/.exec(_e.userAgent),Gc=/MSIE \d/.test(_e.userAgent),Ll=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(_e.userAgent),Ls=!!(Gc||Ll||zl),lc=!Ls&&/gecko\/(\d+)/i.test(_e.userAgent),Sl=!Ls&&/Chrome\/(\d+)/.exec(_e.userAgent),ac="webkitFontSmoothing"in Ol.documentElement.style,Rl=!Ls&&/Apple Computer/.test(_e.vendor),hc=Rl&&(/Mobile\/\w+/.test(_e.userAgent)||_e.maxTouchPoints>2),W={mac:hc||/Mac/.test(_e.platform),windows:/Win/.test(_e.platform),linux:/Linux|X11/.test(_e.platform),ie:Ls,ie_version:Gc?Ol.documentMode||6:Ll?+Ll[1]:zl?+zl[1]:0,gecko:lc,gecko_version:lc?+(/Firefox\/(\d+)/.exec(_e.userAgent)||[0,0])[1]:0,chrome:!!Sl,chrome_version:Sl?+Sl[1]:0,ios:hc,android:/Android\b/.test(_e.userAgent),webkit:ac,webkit_version:ac?+(/\bAppleWebKit\/(\d+)/.exec(_e.userAgent)||[0,0])[1]:0,safari:Rl,safari_version:Rl?+(/\bVersion\/(\d+(\.\d+)?)/.exec(_e.userAgent)||[0,0])[1]:0,tabSize:Ol.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function Aa(i,e){for(let t in i)t=="class"&&e.class?e.class+=" "+i.class:t=="style"&&e.style?e.style+=";"+i.style:e[t]=i[t];return e}var ps=Object.create(null);function Ma(i,e,t){if(i==e)return!0;i||(i=ps),e||(e=ps);let r=Object.keys(i),n=Object.keys(e);if(r.length-(t&&r.indexOf(t)>-1?1:0)!=n.length-(t&&n.indexOf(t)>-1?1:0))return!1;for(let s of r)if(s!=t&&(n.indexOf(s)==-1||i[s]!==e[s]))return!1;return!0}function N1(i,e){for(let t=i.attributes.length-1;t>=0;t--){let r=i.attributes[t].name;e[r]==null&&i.removeAttribute(r)}for(let t in e){let r=e[t];t=="style"?i.style.cssText=r:i.getAttribute(t)!=r&&i.setAttribute(t,r)}}function cc(i,e,t){let r=!1;if(e)for(let n in e)t&&n in t||(r=!0,n=="style"?i.style.cssText="":i.removeAttribute(n));if(t)for(let n in t)e&&e[n]==t[n]||(r=!0,n=="style"?i.style.cssText=t[n]:i.setAttribute(n,t[n]));return r}function F1(i){let e=Object.create(null);for(let t=0;t<i.attributes.length;t++){let r=i.attributes[t];e[r.name]=r.value}return e}var kt=class{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}},Ve=function(i){return i[i.Text=0]="Text",i[i.WidgetBefore=1]="WidgetBefore",i[i.WidgetAfter=2]="WidgetAfter",i[i.WidgetRange=3]="WidgetRange",i}(Ve||(Ve={})),X=class extends gt{constructor(e,t,r,n){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=n}get heightRelevant(){return!1}static mark(e){return new Qi(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new qr(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,n;if(e.isBlockGap)r=-5e8,n=4e8;else{let{start:s,end:o}=Uc(e,t);r=(s?t?-3e8:-1:5e8)-1,n=(o?t?2e8:1:-6e8)+1}return new qr(e,r,n,t,e.widget||null,!0)}static line(e){return new en(e)}static set(e,t=!1){return le.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};X.none=le.empty;var Qi=class i extends X{constructor(e){let{start:t,end:r}=Uc(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?Aa(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||ps}eq(e){return this==e||e instanceof i&&this.tagName==e.tagName&&Ma(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}};Qi.prototype.point=!1;var en=class i extends X{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof i&&this.spec.class==e.spec.class&&Ma(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}};en.prototype.mapMode=We.TrackBefore;en.prototype.point=!0;var qr=class i extends X{constructor(e,t,r,n,s,o){super(t,r,s,e),this.block=n,this.isReplace=o,this.mapMode=n?t<=0?We.TrackBefore:We.TrackAfter:We.TrackDel}get type(){return this.startSide!=this.endSide?Ve.WidgetRange:this.startSide<=0?Ve.WidgetBefore:Ve.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof i&&H1(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}};qr.prototype.point=!0;function Uc(i,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=i;return t==null&&(t=i.inclusive),r==null&&(r=i.inclusive),{start:t??e,end:r??e}}function H1(i,e){return i==e||!!(i&&e&&i.compare(e))}function pi(i,e,t,r=0){let n=t.length-1;n>=0&&t[n]+r>=i?t[n]=Math.max(t[n],e):t.push(i,e)}var gs=class i extends gt{constructor(e,t){super(),this.tagName=e,this.attributes=t}eq(e){return e==this||e instanceof i&&this.tagName==e.tagName&&Ma(this.attributes,e.attributes)}static create(e){return new i(e.tagName,e.attributes||ps)}static set(e,t=!1){return le.of(e,t)}};gs.prototype.startSide=gs.prototype.endSide=-1;function tn(i){let e;return i.nodeType==11?e=i.getSelection?i:i.ownerDocument:e=i,e.getSelection()}function Il(i,e){return e?i==e||i.contains(e.nodeType!=1?e.parentNode:e):!1}function Ui(i,e){if(!e.anchorNode)return!1;try{return Il(i,e.anchorNode)}catch{return!1}}function hs(i){return i.nodeType==3?rn(i,0,i.nodeValue.length).getClientRects():i.nodeType==1?i.getClientRects():[]}function Ki(i,e,t,r){return t?uc(i,e,t,r,-1)||uc(i,e,t,r,1):!1}function xr(i){for(var e=0;;e++)if(i=i.previousSibling,!i)return e}function vs(i){return i.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(i.nodeName)}function uc(i,e,t,r,n){for(;;){if(i==t&&e==r)return!0;if(e==(n<0?0:ar(i))){if(i.nodeName=="DIV")return!1;let s=i.parentNode;if(!s||s.nodeType!=1)return!1;e=xr(i)+(n<0?0:1),i=s}else if(i.nodeType==1){if(i=i.childNodes[e+(n<0?-1:0)],i.nodeType==1&&i.contentEditable=="false")return!1;e=n<0?ar(i):0}else return!1}}function ar(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}function bs(i,e){let t=e?i.left:i.right;return{left:t,right:t,top:i.top,bottom:i.bottom}}function q1(i){let e=i.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:i.innerWidth,top:0,bottom:i.innerHeight}}function Kc(i,e){let t=e.width/i.offsetWidth,r=e.height/i.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-i.offsetWidth)<1)&&(t=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-i.offsetHeight)<1)&&(r=1),{scaleX:t,scaleY:r}}function W1(i,e,t,r,n,s,o,l){let a=i.ownerDocument,h=a.defaultView||window;for(let c=i,u=!1;c&&!u;)if(c.nodeType==1){let d,p=c==a.body,v=1,y=1;if(p)d=q1(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(u=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let A=c.getBoundingClientRect();({scaleX:v,scaleY:y}=Kc(c,A)),d={left:A.left,right:A.left+c.clientWidth*v,top:A.top,bottom:A.top+c.clientHeight*y}}let w=0,S=0;if(n=="nearest")e.top<d.top?(S=e.top-(d.top+o),t>0&&e.bottom>d.bottom+S&&(S=e.bottom-d.bottom+o)):e.bottom>d.bottom&&(S=e.bottom-d.bottom+o,t<0&&e.top-S<d.top&&(S=e.top-(d.top+o)));else{let A=e.bottom-e.top,M=d.bottom-d.top;S=(n=="center"&&A<=M?e.top+A/2-M/2:n=="start"||n=="center"&&t<0?e.top-o:e.bottom-M+o)-d.top}if(r=="nearest"?e.left<d.left?(w=e.left-(d.left+s),t>0&&e.right>d.right+w&&(w=e.right-d.right+s)):e.right>d.right&&(w=e.right-d.right+s,t<0&&e.left<d.left+w&&(w=e.left-(d.left+s))):w=(r=="center"?e.left+(e.right-e.left)/2-(d.right-d.left)/2:r=="start"==l?e.left-s:e.right-(d.right-d.left)+s)-d.left,w||S)if(p)h.scrollBy(w,S);else{let A=0,M=0;if(S){let E=c.scrollTop;c.scrollTop+=S/y,M=(c.scrollTop-E)*y}if(w){let E=c.scrollLeft;c.scrollLeft+=w/v,A=(c.scrollLeft-E)*v}e={left:e.left-A,top:e.top-M,right:e.right-A,bottom:e.bottom-M},A&&Math.abs(A-w)<1&&(r="nearest"),M&&Math.abs(M-S)<1&&(n="nearest")}if(p)break;(e.top<d.top||e.bottom>d.bottom||e.left<d.left||e.right>d.right)&&(e={left:Math.max(e.left,d.left),right:Math.min(e.right,d.right),top:Math.max(e.top,d.top),bottom:Math.min(e.bottom,d.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function V1(i){let e=i.ownerDocument,t,r;for(let n=i.parentNode;n&&!(n==e.body||t&&r);)if(n.nodeType==1)!r&&n.scrollHeight>n.clientHeight&&(r=n),!t&&n.scrollWidth>n.clientWidth&&(t=n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;return{x:t,y:r}}var Pl=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?ar(t):0),r,Math.min(e.focusOffset,r?ar(r):0))}set(e,t,r,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=n}},Fr=null;W.safari&&W.safari_version>=26&&(Fr=!1);function jc(i){if(i.setActive)return i.setActive();if(Fr)return i.focus(Fr);let e=[];for(let t=i;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(i.focus(Fr==null?{get preventScroll(){return Fr={preventScroll:!0},!0}}:void 0),!Fr){Fr=!1;for(let t=0;t<e.length;){let r=e[t++],n=e[t++],s=e[t++];r.scrollTop!=n&&(r.scrollTop=n),r.scrollLeft!=s&&(r.scrollLeft=s)}}}var fc;function rn(i,e,t=e){let r=fc||(fc=document.createRange());return r.setEnd(i,t),r.setStart(i,e),r}function gi(i,e,t,r){let n={key:e,code:e,keyCode:t,which:t,cancelable:!0};r&&({altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey}=r);let s=new KeyboardEvent("keydown",n);s.synthetic=!0,i.dispatchEvent(s);let o=new KeyboardEvent("keyup",n);return o.synthetic=!0,i.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function $1(i){for(;i;){if(i&&(i.nodeType==9||i.nodeType==11&&i.host))return i;i=i.assignedSlot||i.parentNode}return null}function G1(i,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,ar(t));;)if(r){if(t.nodeType!=1)return!1;let n=t.childNodes[r-1];n.contentEditable=="false"?r--:(t=n,r=ar(t))}else{if(t==i)return!0;r=xr(t),t=t.parentNode}}function Yc(i){return i.scrollTop>Math.max(1,i.scrollHeight-i.clientHeight-4)}function Xc(i,e){for(let t=i,r=e;;){if(t.nodeType==3&&r>0)return{node:t,offset:r};if(t.nodeType==1&&r>0){if(t.contentEditable=="false")return null;t=t.childNodes[r-1],r=ar(t)}else if(t.parentNode&&!vs(t))r=xr(t),t=t.parentNode;else return null}}function _c(i,e){for(let t=i,r=e;;){if(t.nodeType==3&&r<t.nodeValue.length)return{node:t,offset:r};if(t.nodeType==1&&r<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[r],r=0}else if(t.parentNode&&!vs(t))r=xr(t)+1,t=t.parentNode;else return null}}var $t=class i{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new i(e.parentNode,xr(e),t)}static after(e,t){return new i(e.parentNode,xr(e)+1,t)}},he=function(i){return i[i.LTR=0]="LTR",i[i.RTL=1]="RTL",i}(he||(he={})),Wr=he.LTR,Ta=he.RTL;function Jc(i){let e=[];for(let t=0;t<i.length;t++)e.push(1<<+i[t]);return e}var U1=Jc("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),K1=Jc("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Nl=Object.create(null),Vt=[];for(let i of["()","[]","{}"]){let e=i.charCodeAt(0),t=i.charCodeAt(1);Nl[e]=t,Nl[t]=-e}function Zc(i){return i<=247?U1[i]:1424<=i&&i<=1524?2:1536<=i&&i<=1785?K1[i-1536]:1774<=i&&i<=2220?4:8192<=i&&i<=8204?256:64336<=i&&i<=65023?4:1}var j1=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/,wt=class{get dir(){return this.level%2?Ta:Wr}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,n){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==r)return o;(s<0||(n!=0?n<0?l.from<t:l.to>t:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}};function Qc(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++){let r=i[t],n=e[t];if(r.from!=n.from||r.to!=n.to||r.direction!=n.direction||!Qc(r.inner,n.inner))return!1}return!0}var ce=[];function Y1(i,e,t,r,n){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,l=s<r.length?r[s].from:t,a=s?256:n;for(let h=o,c=a,u=a;h<l;h++){let d=Zc(i.charCodeAt(h));d==512?d=c:d==8&&u==4&&(d=16),ce[h]=d==4?2:d,d&7&&(u=d),c=d}for(let h=o,c=a,u=a;h<l;h++){let d=ce[h];if(d==128)h<l-1&&c==ce[h+1]&&c&24?d=ce[h]=c:ce[h]=256;else if(d==64){let p=h+1;for(;p<l&&ce[p]==64;)p++;let v=h&&c==8||p<t&&ce[p]==8?u==1?1:8:256;for(let y=h;y<p;y++)ce[y]=v;h=p-1}else d==8&&u==1&&(ce[h]=1);c=d,d&7&&(u=d)}}}function X1(i,e,t,r,n){let s=n==1?2:1;for(let o=0,l=0,a=0;o<=r.length;o++){let h=o?r[o-1].to:e,c=o<r.length?r[o].from:t;for(let u=h,d,p,v;u<c;u++)if(p=Nl[d=i.charCodeAt(u)])if(p<0){for(let y=l-3;y>=0;y-=3)if(Vt[y+1]==-p){let w=Vt[y+2],S=w&2?n:w&4?w&1?s:n:0;S&&(ce[u]=ce[Vt[y]]=S),l=y;break}}else{if(Vt.length==189)break;Vt[l++]=u,Vt[l++]=d,Vt[l++]=a}else if((v=ce[u])==2||v==1){let y=v==n;a=y?0:1;for(let w=l-3;w>=0;w-=3){let S=Vt[w+2];if(S&2)break;if(y)Vt[w+2]|=2;else{if(S&4)break;Vt[w+2]|=4}}}}}function _1(i,e,t,r){for(let n=0,s=r;n<=t.length;n++){let o=n?t[n-1].to:i,l=n<t.length?t[n].from:e;for(let a=o;a<l;){let h=ce[a];if(h==256){let c=a+1;for(;;)if(c==l){if(n==t.length)break;c=t[n++].to,l=n<t.length?t[n].from:e}else if(ce[c]==256)c++;else break;let u=s==1,d=(c<e?ce[c]:r)==1,p=u==d?u?1:2:r;for(let v=c,y=n,w=y?t[y-1].to:i;v>a;)v==w&&(v=t[--y].from,w=y?t[y-1].to:i),ce[--v]=p;a=c}else s=h,a++}}}function Fl(i,e,t,r,n,s,o){let l=r%2?2:1;if(r%2==n%2)for(let a=e,h=0;a<t;){let c=!0,u=!1;if(h==s.length||a<s[h].from){let y=ce[a];y!=l&&(c=!1,u=y==16)}let d=!c&&l==1?[]:null,p=c?r:r+1,v=a;e:for(;;)if(h<s.length&&v==s[h].from){if(u)break e;let y=s[h];if(!c)for(let w=y.to,S=h+1;;){if(w==t)break e;if(S<s.length&&s[S].from==w)w=s[S++].to;else{if(ce[w]==l)break e;break}}if(h++,d)d.push(y);else{y.from>a&&o.push(new wt(a,y.from,p));let w=y.direction==Wr!=!(p%2);Hl(i,w?r+1:r,n,y.inner,y.from,y.to,o),a=y.to}v=y.to}else{if(v==t||(c?ce[v]!=l:ce[v]==l))break;v++}d?Fl(i,a,v,r+1,n,d,o):a<v&&o.push(new wt(a,v,p)),a=v}else for(let a=t,h=s.length;a>e;){let c=!0,u=!1;if(!h||a>s[h-1].to){let y=ce[a-1];y!=l&&(c=!1,u=y==16)}let d=!c&&l==1?[]:null,p=c?r:r+1,v=a;e:for(;;)if(h&&v==s[h-1].to){if(u)break e;let y=s[--h];if(!c)for(let w=y.from,S=h;;){if(w==e)break e;if(S&&s[S-1].to==w)w=s[--S].from;else{if(ce[w-1]==l)break e;break}}if(d)d.push(y);else{y.to<a&&o.push(new wt(y.to,a,p));let w=y.direction==Wr!=!(p%2);Hl(i,w?r+1:r,n,y.inner,y.from,y.to,o),a=y.from}v=y.from}else{if(v==e||(c?ce[v-1]!=l:ce[v-1]==l))break;v--}d?Fl(i,v,a,r+1,n,d,o):v<a&&o.push(new wt(v,a,p)),a=v}}function Hl(i,e,t,r,n,s,o){let l=e%2?2:1;Y1(i,n,s,r,l),X1(i,n,s,r,l),_1(n,s,r,l),Fl(i,n,s,e,t,r,o)}function J1(i,e,t){if(!i)return[new wt(0,0,e==Ta?1:0)];if(e==Wr&&!t.length&&!j1.test(i))return eu(i.length);if(t.length)for(;i.length>ce.length;)ce[ce.length]=256;let r=[],n=e==Wr?0:1;return Hl(i,n,n,t,0,i.length,r),r}function eu(i){return[new wt(0,i,0)]}var tu="";function Z1(i,e,t,r,n){var s;let o=r.head-i.from,l=wt.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),a=e[l],h=a.side(n,t);if(o==h){let d=l+=n?1:-1;if(d<0||d>=e.length)return null;a=e[l=d],o=a.side(!n,t),h=a.side(n,t)}let c=Re(i.text,o,a.forward(n,t));(c<a.from||c>a.to)&&(c=h),tu=i.text.slice(Math.min(o,c),Math.max(o,c));let u=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return u&&c==h&&u.level+(n?0:1)<a.level?I.cursor(u.side(!n,t)+i.from,u.forward(n,t)?1:-1,u.level):I.cursor(c+i.from,a.forward(n,t)?-1:1,a.level)}function Q1(i,e,t){for(let r=e;r<t;r++){let n=Zc(i.charCodeAt(r));if(n==1)return Wr;if(n==2||n==4)return Ta}return Wr}var ru=H.define(),iu=H.define(),nu=H.define(),su=H.define(),ql=H.define(),ou=H.define(),lu=H.define(),Da=H.define(),Ba=H.define(),au=H.define({combine:i=>i.some(e=>e)}),hu=H.define({combine:i=>i.some(e=>e)}),cu=H.define(),ji=class i{constructor(e,t="nearest",r="nearest",n=5,s=5,o=!1){this.range=e,this.y=t,this.x=r,this.yMargin=n,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new i(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new i(I.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}},es=te.define({map:(i,e)=>i.map(e)}),uu=te.define();function Fe(i,e,t){let r=i.facet(su);r.length?r[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}var or=H.define({combine:i=>i.length?i[0]:!0}),ep=0,ui=H.define({combine(i){return i.filter((e,t)=>{for(let r=0;r<t;r++)if(i[r].plugin==e.plugin)return!1;return!0})}}),Se=class i{constructor(e,t,r,n,s){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=n,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(ui.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(ui.of({plugin:this,arg:e}))}static define(e,t){let{eventHandlers:r,eventObservers:n,provide:s,decorations:o}=t||{};return new i(ep++,e,r,n,l=>{let a=[];return o&&a.push(Rs.of(h=>{let c=h.plugin(l);return c?o(c):X.none})),s&&a.push(s(l)),a})}static fromClass(e,t){return i.define((r,n)=>new e(r,n),t)}},Yi=class{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(Fe(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){Fe(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){Fe(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}},fu=H.define(),Ea=H.define(),Rs=H.define(),du=H.define(),Oa=H.define(),ln=H.define(),mu=H.define();function dc(i,e){let t=i.state.facet(mu);if(!t.length)return t;let r=t.map(s=>s instanceof Function?s(i):s),n=[];return le.spans(r,e.from,e.to,{point(){},span(s,o,l,a){let h=s-e.from,c=o-e.from,u=n;for(let d=l.length-1;d>=0;d--,a--){let p=l[d].spec.bidiIsolate,v;if(p==null&&(p=Q1(e.text,h,c)),a>0&&u.length&&(v=u[u.length-1]).to==h&&v.direction==p)v.to=c,u=v.inner;else{let y={from:h,to:c,direction:p,inner:[]};u.push(y),u=y.inner}}}}),n}var pu=H.define();function za(i){let e=0,t=0,r=0,n=0;for(let s of i.state.facet(pu)){let o=s(i);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(n=Math.max(n,o.bottom)))}return{left:e,right:t,top:r,bottom:n}}var Wi=H.define(),zt=class i{constructor(e,t,r,n){this.fromA=e,this.toA=t,this.fromB=r,this.toB=n}join(e){return new i(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>r.toA)){if(n.toA<r.fromA)break;r=r.join(n),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let n=0,s=0,o=0;;){let l=n<e.length?e[n].fromB:1e9,a=s<t.length?t[s]:1e9,h=Math.min(l,a);if(h==1e9)break;let c=h+o,u=h,d=c;for(;;)if(s<t.length&&t[s]<=u){let p=t[s+1];s+=2,u=Math.max(u,p);for(let v=n;v<e.length&&e[v].fromB<=u;v++)o=e[v].toA-e[v].toB;d=Math.max(d,p+o)}else if(n<e.length&&e[n].fromB<=u){let p=e[n++];u=Math.max(u,p.toB),d=Math.max(d,p.toA),o=p.toA-p.toB}else break;r.push(new i(c,d,h,u))}return r}},ys=class i{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Ye.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let n=[];this.changes.iterChangedRanges((s,o,l,a)=>n.push(new zt(s,o,l,a))),this.changedRanges=n}static create(e,t,r){return new i(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}},tp=[],ke=class{constructor(e,t,r=0){this.dom=e,this.length=t,this.flags=r,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return tp}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let t=this.domAttrs;t&&N1(this.dom,t)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,t=this.posAtStart){let r=t;for(let n of this.children){if(n==e)return r;r+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,t){return null}domPosFor(e,t){let r=xr(this.dom),n=this.length?e>0:t>0;return new $t(this.parent.dom,r+(n?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof bi)return e;return null}static get(e){return e.cmTile}},vi=class extends ke{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let t=this.dom,r=null,n,s=e?.node==t?e:null,o=0;for(let l of this.children){if(l.sync(e),o+=l.length+l.breakAfter,n=r?r.nextSibling:t.firstChild,s&&n!=l.dom&&(s.written=!0),l.dom.parentNode==t)for(;n&&n!=l.dom;)n=mc(n);else t.insertBefore(l.dom,n);r=l.dom}for(n=r?r.nextSibling:t.firstChild,s&&n&&(s.written=!0);n;)n=mc(n);this.length=o}};function mc(i){let e=i.nextSibling;return i.parentNode.removeChild(i),e}var bi=class extends vi{constructor(e,t){super(t),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let t=ke.get(e);if(t&&this.owns(t))return t;e=e.parentNode}}blockTiles(e){for(let t=[],r=this,n=0,s=0;;)if(n==r.children.length){if(!t.length)return;r=r.parent,r.breakAfter&&s++,n=t.pop()}else{let o=r.children[n++];if(o instanceof lr)t.push(n),r=o,n=0;else{let l=s+o.length,a=e(o,s);if(a!==void 0)return a;s=l+o.breakAfter}}}resolveBlock(e,t){let r,n=-1,s,o=-1;if(this.blockTiles((l,a)=>{let h=a+l.length;if(e>=a&&e<=h){if(l.isWidget()&&t>=-1&&t<=1){if(l.flags&32)return!0;l.flags&16&&(r=void 0)}(a<e||e==h&&(t<-1?l.length:l.covers(1)))&&(!r||!l.isWidget()&&r.isWidget())&&(r=l,n=e-a),(h>e||e==a&&(t>1?l.length:l.covers(-1)))&&(!s||!l.isWidget()&&s.isWidget())&&(s=l,o=e-a)}}),!r&&!s)throw new Error("No tile at position "+e);return r&&t<0||!s?{tile:r,offset:n}:{tile:s,offset:o}}},lr=class i extends vi{constructor(e,t){super(e),this.wrapper=t}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,t){let r=new i(t||document.createElement(e.tagName),e);return t||(r.flags|=4),r}},yi=class i extends vi{constructor(e,t){super(e),this.attrs=t}isLine(){return!0}static start(e,t,r){let n=new i(t||document.createElement("div"),e);return(!t||!r)&&(n.flags|=4),n}get domAttrs(){return this.attrs}resolveInline(e,t,r){let n=null,s=-1,o=null,l=-1;function a(c,u){for(let d=0,p=0;d<c.children.length&&p<=u;d++){let v=c.children[d],y=p+v.length;y>=u&&(v.isComposite()?a(v,u-p):(!o||o.isHidden&&(t>0||r&&ip(o,v)))&&(y>u||v.flags&32)?(o=v,l=u-p):(p<u||v.flags&16&&!v.isHidden)&&(n=v,s=u-p)),p=y}}a(this,e);let h=(t<0?n:o)||n||o;return h?{tile:h,offset:h==n?s:l}:null}coordsIn(e,t){let r=this.resolveInline(e,t,!0);return r?r.tile.coordsIn(Math.max(0,r.offset),t):rp(this)}domIn(e,t){let r=this.resolveInline(e,t);if(r){let{tile:n,offset:s}=r;if(this.dom.contains(n.dom))return n.isText()?new $t(n.dom,Math.min(n.dom.nodeValue.length,s)):n.domPosFor(s,n.flags&16?1:n.flags&32?-1:t);let o=r.tile.parent,l=!1;for(let a of o.children){if(l)return new $t(a.dom,0);a==r.tile&&(l=!0)}}return new $t(this.dom,0)}};function rp(i){let e=i.dom.lastChild;if(!e)return i.dom.getBoundingClientRect();let t=hs(e);return t[t.length-1]||null}function ip(i,e){let t=i.coordsIn(0,1),r=e.coordsIn(0,1);return t&&r&&r.top<t.bottom}var st=class i extends vi{constructor(e,t){super(e),this.mark=t}get domAttrs(){return this.mark.attrs}static of(e,t){let r=new i(t||document.createElement(e.tagName),e);return t||(r.flags|=4),r}},Hr=class i extends ke{constructor(e,t){super(e,t.length),this.text=t}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,t){let r=this.dom.nodeValue.length;e>r&&(e=r);let n=e,s=e,o=0;e==0&&t<0||e==r&&t>=0?W.chrome||W.gecko||(e?(n--,o=1):s<r&&(s++,o=-1)):t<0?n--:s<r&&s++;let l=rn(this.dom,n,s).getClientRects();if(!l.length)return null;let a=l[(o?o<0:t>=0)?0:l.length-1];return W.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,h=>h.width)||a),o?bs(a,o<0):a||null}static of(e,t){let r=new i(t||document.createTextNode(e),e);return t||(r.flags|=2),r}},Vr=class i extends ke{constructor(e,t,r,n){super(e,t,n),this.widget=r}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,t){return this.coordsInWidget(e,t,!1)}coordsInWidget(e,t,r){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;if(r)return bs(this.dom.getBoundingClientRect(),this.length?e==0:t<=0);{let s=this.dom.getClientRects(),o=null;if(!s.length)return null;let l=this.flags&16?!0:this.flags&32?!1:e>0;for(let a=l?s.length-1:0;o=s[a],!(e>0?a==0:a==s.length-1||o.top<o.bottom);a+=l?-1:1);return bs(o,!l)}}get overrideDOMText(){if(!this.length)return se.empty;let{root:e}=this;if(!e)return se.empty;let t=this.posAtStart;return e.view.state.doc.slice(t,t+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,t,r,n,s){return s||(s=e.toDOM(t),e.editable||(s.contentEditable="false")),new i(s,r,e,n)}},xi=class extends ke{constructor(e){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),super(t,0,e)}get isHidden(){return!0}get overrideDOMText(){return se.empty}coordsIn(e){return this.dom.getBoundingClientRect()}},Wl=class{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,t,r){let{tile:n,index:s,beforeBreak:o,parents:l}=this;for(;e||t>0;)if(n.isComposite())if(o){if(!e)break;r&&r.break(),e--,o=!1}else if(s==n.children.length){if(!e&&!l.length)break;r&&r.leave(n),o=!!n.breakAfter,{tile:n,index:s}=l.pop(),s++}else{let a=n.children[s],h=a.breakAfter;(t>0?a.length<=e:a.length<e)&&(!r||r.skip(a,0,a.length)!==!1||!a.isComposite)?(o=!!h,s++,e-=a.length):(l.push({tile:n,index:s}),n=a,s=0,r&&a.isComposite()&&r.enter(a))}else if(s==n.length)o=!!n.breakAfter,{tile:n,index:s}=l.pop(),s++;else if(e){let a=Math.min(e,n.length-s);r&&r.skip(n,s,s+a),e-=a,s+=a}else break;return this.tile=n,this.index=s,this.beforeBreak=o,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}},Vl=class{constructor(e,t,r,n){this.from=e,this.to=t,this.wrapper=r,this.rank=n}},$l=class{constructor(e,t,r){this.cache=e,this.root=t,this.blockWrappers=r,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,t,r,n){var s;this.flushBuffer();let o=this.ensureMarks(t,r),l=o.lastChild;if(l&&l.isText()&&!(l.flags&8)&&l.length+e.length<512){this.cache.reused.set(l,2);let a=o.children[o.children.length-1]=new Hr(l.dom,l.text+e);a.parent=o}else o.append(n||Hr.of(e,(s=this.cache.find(Hr))===null||s===void 0?void 0:s.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,t){let r=this.curLine;r.dom!=t.line.dom&&(r.setDOM(this.cache.reused.has(t.line)?Cl(t.line.dom):t.line.dom),this.cache.reused.set(t.line,2));let n=r;for(let l=t.marks.length-1;l>=0;l--){let a=t.marks[l],h=n.lastChild;if(h instanceof st&&h.mark.eq(a.mark))h.dom!=a.dom&&h.setDOM(Cl(a.dom)),n=h;else{if(this.cache.reused.get(a)){let u=ke.get(a.dom);u&&u.setDOM(Cl(a.dom))}let c=st.of(a.mark,a.dom);n.append(c),n=c}this.cache.reused.set(a,2)}let s=ke.get(e.text);s&&this.cache.reused.set(s,2);let o=new Hr(e.text,e.text.nodeValue);o.flags|=8,n.append(o)}addInlineWidget(e,t,r){let n=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);n||this.flushBuffer();let s=this.ensureMarks(t,r);!n&&!(e.flags&16)&&s.append(this.getBuffer(1)),s.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,t,r){this.flushBuffer(),this.ensureMarks(t,r).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let t=this.afterWidget||this.lastBlock;t.length+=e,this.pos+=e}addLineStart(e,t){var r;e||(e=gu);let n=yi.start(e,t||((r=this.cache.find(yi))===null||r===void 0?void 0:r.dom),!!t);this.getBlockPos().append(this.lastBlock=this.curLine=n)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,t){var r;let n=this.curLine;for(let s=e.length-1;s>=0;s--){let o=e[s],l;if(t>0&&(l=n.lastChild)&&l instanceof st&&l.mark.eq(o))n=l,t--;else{let a=st.of(o,(r=this.cache.find(st,h=>h.mark.eq(o)))===null||r===void 0?void 0:r.dom);n.append(a),n=a,t=0}}return n}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!pc(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(W.ios&&pc(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(Al,0,32)||new Vr(Al.toDOM(),0,Al,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let t=new Vl(e.from,e.to,e.value,e.rank),r=this.wrappers.length;for(;r>0&&(this.wrappers[r-1].rank-t.rank||this.wrappers[r-1].to-t.to)<0;)r--;this.wrappers.splice(r,0,t)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let t=this.root;for(let r of this.wrappers){let n=t.lastChild;if(r.from<this.pos&&n instanceof lr&&n.wrapper.eq(r.wrapper))t=n;else{let s=lr.of(r.wrapper,(e=this.cache.find(lr,o=>o.wrapper.eq(r.wrapper)))===null||e===void 0?void 0:e.dom);t.append(s),t=s}}return t}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let t=2|(e<0?16:32),r=this.cache.find(xi,void 0,1);return r&&(r.flags=t),r||new xi(t)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}},Gl=class{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:n,lineBreak:s,done:o}=this.cursor.next(this.skipCount);if(this.skipCount=0,o)throw new Error("Ran out of text content when drawing inline views");this.text=n;let l=this.textOff=Math.min(e,n.length);return s?null:n.slice(0,l)}let t=Math.min(this.text.length,this.textOff+e),r=this.text.slice(this.textOff,t);return this.textOff=t,r}},xs=[Vr,yi,Hr,st,xi,lr,bi];for(let i=0;i<xs.length;i++)xs[i].bucket=i;var Ul=class{constructor(e){this.view=e,this.buckets=xs.map(()=>[]),this.index=xs.map(()=>0),this.reused=new Map}add(e){let t=e.constructor.bucket,r=this.buckets[t];r.length<6?r.push(e):r[this.index[t]=(this.index[t]+1)%6]=e}find(e,t,r=2){let n=e.bucket,s=this.buckets[n],o=this.index[n];for(let l=s.length-1;l>=0;l--){let a=(l+o)%s.length,h=s[a];if((!t||t(h))&&!this.reused.has(h))return s.splice(a,1),a<o&&this.index[n]--,this.reused.set(h,r),h}return null}findWidget(e,t,r){let n=this.buckets[0];if(n.length)for(let s=0,o=0;;s++){if(s==n.length){if(o)return null;o=1,s=0}let l=n[s];if(!this.reused.has(l)&&(o==0?l.widget.compare(e):l.widget.constructor==e.constructor&&e.updateDOM(l.dom,this.view)))return n.splice(s,1),s<this.index[0]&&this.index[0]--,l.widget==e&&l.length==t&&(l.flags&497)==r?(this.reused.set(l,1),l):(this.reused.set(l,2),new Vr(l.dom,t,e,l.flags&-498|r))}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,t=2){if(!this.reused.has(e))return this.reused.set(e,t),e.dom}clear(){for(let e=0;e<this.buckets.length;e++)this.buckets[e].length=this.index[e]=0}},Kl=class{constructor(e,t,r,n,s){this.view=e,this.decorations=n,this.disallowBlockEffectsFor=s,this.openWidget=!1,this.openMarks=0,this.cache=new Ul(e),this.text=new Gl(e.state.doc),this.builder=new $l(this.cache,new bi(e,e.contentDOM),le.iter(r)),this.cache.reused.set(t,2),this.old=new Wl(t),this.reuseWalker={skip:(o,l,a)=>{if(this.cache.add(o),o.isComposite())return!1},enter:o=>this.cache.add(o),leave:()=>{},break:()=>{}}}run(e,t){let r=t&&this.getCompositionContext(t.text);for(let n=0,s=0,o=0;;){let l=o<e.length?e[o++]:null,a=l?l.fromA:this.old.root.length;if(a>n){let h=a-n;this.preserve(h,!o,!l),n=a,s+=h}if(!l)break;t&&l.fromA<=t.range.fromA&&l.toA>=t.range.toA?(this.forward(l.fromA,t.range.fromA,t.range.fromA<t.range.toA?1:-1),this.emit(s,t.range.fromB),this.cache.clear(),this.builder.addComposition(t,r),this.text.skip(t.range.toB-t.range.fromB),this.forward(t.range.fromA,l.toA),this.emit(t.range.toB,l.toB)):(this.forward(l.fromA,l.toA),this.emit(s,l.toB)),s=l.toB,n=l.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,t,r){let n=op(this.old),s=this.openMarks;this.old.advance(e,r?1:-1,{skip:(o,l,a)=>{if(o.isWidget())if(this.openWidget)this.builder.continueWidget(a-l);else{let h=a>0||l<o.length?Vr.of(o.widget,this.view,a-l,o.flags&496,this.cache.maybeReuse(o)):this.cache.reuse(o);h.flags&256?(h.flags&=-2,this.builder.addBlockWidget(h)):(this.builder.ensureLine(null),this.builder.addInlineWidget(h,n,s),s=n.length)}else if(o.isText())this.builder.ensureLine(null),!l&&a==o.length?this.builder.addText(o.text,n,s,this.cache.reuse(o)):(this.cache.add(o),this.builder.addText(o.text.slice(l,a),n,s)),s=n.length;else if(o.isLine())o.flags&=-2,this.cache.reused.set(o,1),this.builder.addLine(o);else if(o instanceof xi)this.cache.add(o);else if(o instanceof st)this.builder.ensureLine(null),this.builder.addMark(o,n,s),this.cache.reused.set(o,1),s=n.length;else return!1;this.openWidget=!1},enter:o=>{o.isLine()?this.builder.addLineStart(o.attrs,this.cache.maybeReuse(o)):(this.cache.add(o),o instanceof st&&n.unshift(o.mark)),this.openWidget=!1},leave:o=>{o.isLine()?n.length&&(n.length=s=0):o instanceof st&&(n.shift(),s=Math.min(s,n.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,t){let r=null,n=this.builder,s=0,o=le.spans(this.decorations,e,t,{point:(l,a,h,c,u,d)=>{if(h instanceof qr){if(this.disallowBlockEffectsFor[d]){if(h.block)throw new RangeError("Block decorations may not be specified via plugins");if(a>this.view.state.doc.lineAt(l).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(s=c.length,u>c.length)n.continueWidget(a-l);else{let p=h.widget||(h.block?wr.block:wr.inline),v=np(h),y=this.cache.findWidget(p,a-l,v)||Vr.of(p,this.view,a-l,v);h.block?(h.startSide>0&&n.addLineStartIfNotCovered(r),n.addBlockWidget(y)):(n.ensureLine(r),n.addInlineWidget(y,c,u))}r=null}else r=sp(r,h);a>l&&this.text.skip(a-l)},span:(l,a,h,c)=>{for(let u=l;u<a;){let d=this.text.next(Math.min(512,a-u));d==null?(n.addLineStartIfNotCovered(r),n.addBreak(),u++):(n.ensureLine(r),n.addText(d,h,u==l?c:h.length),u+=d.length),r=null}}});n.addLineStartIfNotCovered(r),this.openWidget=o>s,this.openMarks=o}forward(e,t,r=1){t-e<=10?this.old.advance(t-e,r,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(t-e-10,-1),this.old.advance(5,r,this.reuseWalker))}getCompositionContext(e){let t=[],r=null;for(let n=e.parentNode;;n=n.parentNode){let s=ke.get(n);if(n==this.view.contentDOM)break;s instanceof st?t.push(s):s?.isLine()?r=s:s instanceof lr||(n.nodeName=="DIV"&&!r&&n!=this.view.contentDOM?r=new yi(n,gu):r||t.push(st.of(new Qi({tagName:n.nodeName.toLowerCase(),attributes:F1(n)}),n)))}return{line:r,marks:t}}};function pc(i,e){let t=r=>{for(let n of r.children)if((e?n.isText():n.length)||t(n))return!0;return!1};return t(i)}function np(i){let e=i.isReplace?(i.startSide<0?64:0)|(i.endSide>0?128:0):i.startSide>0?32:16;return i.block&&(e|=256),e}var gu={class:"cm-line"};function sp(i,e){let t=e.spec.attributes,r=e.spec.class;return!t&&!r||(i||(i={class:"cm-line"}),t&&Aa(t,i),r&&(i.class+=" "+r)),i}function op(i){let e=[];for(let t=i.parents.length;t>1;t--){let r=t==i.parents.length?i.tile:i.parents[t].tile;r instanceof st&&e.push(r.mark)}return e}function Cl(i){let e=ke.get(i);return e&&e.setDOM(i.cloneNode()),i}var wr=class extends kt{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}};wr.inline=new wr("span");wr.block=new wr("div");var Al=new class extends kt{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}},ws=class{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=X.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new bi(e,e.contentDOM),this.updateInner([new zt(0,0,0,e.state.doc.length)],null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let n=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?n=this.domChanged.newSel.head:!mp(e.changes,this.hasComposition)&&!e.selectionSet&&(n=e.state.selection.main.head));let s=n>-1?ap(this.view,e.changes,n):null;if(this.domChanged=null,this.hasComposition){let{from:c,to:u}=this.hasComposition;r=new zt(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(W.ie||W.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.blockWrappers;this.updateDeco();let a=up(o,this.decorations,e.changes);a.length&&(r=zt.extendWithRanges(r,a));let h=fp(l,this.blockWrappers,e.changes);return h.length&&(r=zt.extendWithRanges(r,h)),s&&!r.some(c=>c.fromA<=s.range.fromA&&c.toA>=s.range.toA)&&(r=s.range.addToSet(r.slice())),this.tile.flags&2&&r.length==0?!1:(this.updateInner(r,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0;let{observer:r}=this.view;r.ignore(()=>{if(t||e.length){let o=this.tile,l=new Kl(this.view,o,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=l.run(e,t),jl(o,l.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=W.chrome||W.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(s),s&&(s.written||r.selectionRange.focusNode!=s.node||!this.tile.dom.contains(s.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let n=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.tile.children)s.isWidget()&&s.widget instanceof Xi&&n.push(s.dom);r.updateGaps(n)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let r of t.effects)r.is(uu)&&(this.editContextFormatting=r.value)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:r}=this.tile,n=this.view.root.activeElement,s=n==r,o=!s&&!(this.view.state.facet(or)||r.tabIndex>-1)&&Ui(r,this.view.observer.selectionRange)&&!(n&&r.contains(n));if(!(s||t||o))return;let l=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,h,c;if(a.empty?c=h=this.inlineDOMNearPos(a.anchor,a.assoc||1):(c=this.inlineDOMNearPos(a.head,a.head==a.from?1:-1),h=this.inlineDOMNearPos(a.anchor,a.anchor==a.from?1:-1)),W.gecko&&a.empty&&!this.hasComposition&&lp(h)){let d=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(d,h.node.childNodes[h.offset]||null)),h=c=new $t(d,0),l=!0}let u=this.view.observer.selectionRange;(l||!u.focusNode||(!Ki(h.node,h.offset,u.anchorNode,u.anchorOffset)||!Ki(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{W.android&&W.chrome&&r.contains(u.focusNode)&&dp(u.focusNode,r)&&(r.blur(),r.focus({preventScroll:!0}));let d=tn(this.view.root);if(d)if(a.empty){if(W.gecko){let p=hp(h.node,h.offset);if(p&&p!=3){let v=(p==1?Xc:_c)(h.node,h.offset);v&&(h=new $t(v.node,v.offset))}}d.collapse(h.node,h.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(h.node,h.offset);try{d.extend(c.node,c.offset)}catch{}}else{let p=document.createRange();a.anchor>a.head&&([h,c]=[c,h]),p.setEnd(c.node,c.offset),p.setStart(h.node,h.offset),d.removeAllRanges(),d.addRange(p)}o&&this.view.root.activeElement==r&&(r.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(h,c)),this.impreciseAnchor=h.precise?null:new $t(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new $t(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Ki(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=tn(e.root),{anchorNode:n,anchorOffset:s}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let o=this.lineAt(t.head,t.assoc);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let a=this.coordsAt(t.head,-1),h=this.coordsAt(t.head,1);if(!a||!h||a.bottom>h.top)return;let c=this.domAtPos(t.head+t.assoc,t.assoc);r.collapse(c.node,c.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&r.collapse(n,s)}posFromDOM(e,t){let r=this.tile.nearest(e);if(!r)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let n=r.posAtStart;if(r.isComposite()){let s;if(e==r.dom)s=r.dom.childNodes[t];else{let o=ar(e)==0?0:t==0?-1:1;for(;;){let l=e.parentNode;if(l==r.dom)break;o==0&&l.firstChild!=l.lastChild&&(e==l.firstChild?o=-1:o=1),e=l}o<0?s=e:s=e.nextSibling}if(s==r.dom.firstChild)return n;for(;s&&!ke.get(s);)s=s.nextSibling;if(!s)return n+r.length;for(let o=0,l=n;;o++){let a=r.children[o];if(a.dom==s)return l;l+=a.length+a.breakAfter}}else return r.isText()?e==r.dom?n+t:n+(t?r.length:0):n}domAtPos(e,t){let{tile:r,offset:n}=this.tile.resolveBlock(e,t);return r.isWidget()?r.domPosFor(e,t):r.domIn(n,t)}inlineDOMNearPos(e,t){let r,n=-1,s=!1,o,l=-1,a=!1;return this.tile.blockTiles((h,c)=>{if(h.isWidget()){if(h.flags&32&&c>=e)return!0;h.flags&16&&(s=!0)}else{let u=c+h.length;if(c<=e&&(r=h,n=e-c,s=u<e),u>=e&&!o&&(o=h,l=e-c,a=c>e),c>e&&o)return!0}}),!r&&!o?this.domAtPos(e,t):(s&&o?r=null:a&&r&&(o=null),r&&t<0||!o?r.domIn(n,t):o.domIn(l,t))}coordsAt(e,t){let{tile:r,offset:n}=this.tile.resolveBlock(e,t);return r.isWidget()?r.widget instanceof Xi?null:r.coordsInWidget(n,t,!0):r.coordsIn(n,t)}lineAt(e,t){let{tile:r}=this.tile.resolveBlock(e,t);return r.isLine()?r:null}coordsForChar(e){let{tile:t,offset:r}=this.tile.resolveBlock(e,1);if(!t.isLine())return null;function n(s,o){if(s.isComposite())for(let l of s.children){if(l.length>=o){let a=n(l,o);if(a)return a}if(o-=l.length,o<0)break}else if(s.isText()&&o<s.length){let l=Re(s.text,o);if(l==o)return null;let a=rn(s.dom,o,l).getClientRects();for(let h=0;h<a.length;h++){let c=a[h];if(h==a.length-1||c.top<c.bottom&&c.left<c.right)return c}}return null}return n(t,r)}measureVisibleLineHeights(e){let t=[],{from:r,to:n}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==he.LTR,h=0,c=(u,d,p)=>{for(let v=0;v<u.children.length&&!(d>n);v++){let y=u.children[v],w=d+y.length,S=y.dom.getBoundingClientRect(),{height:A}=S;if(p&&!v&&(h+=S.top-p.top),y instanceof lr)w>r&&c(y,d,S);else if(d>=r&&(h>0&&t.push(-h),t.push(A+h),h=0,o)){let M=y.dom.lastChild,E=M?hs(M):[];if(E.length){let T=E[E.length-1],B=a?T.right-S.left:S.right-T.left;B>l&&(l=B,this.minWidth=s,this.minWidthFrom=d,this.minWidthTo=w)}}p&&v==u.children.length-1&&(h+=p.bottom-S.bottom),d=w+y.breakAfter}};return c(this.tile,0,null),t}textDirectionAt(e){let{tile:t}=this.tile.resolveBlock(e,1);return getComputedStyle(t.dom).direction=="rtl"?he.RTL:he.LTR}measureTextSize(){let e=this.tile.blockTiles(o=>{if(o.isLine()&&o.children.length&&o.length<=20){let l=0,a;for(let h of o.children){if(!h.isText()||/[^ -~]/.test(h.text))return;let c=hs(h.dom);if(c.length!=1)return;l+=c[0].width,a=c[0].height}if(l)return{lineHeight:o.dom.getBoundingClientRect().height,charWidth:l/o.length,textHeight:a}}});if(e)return e;let t=document.createElement("div"),r,n,s;return t.className="cm-line",t.style.width="99999px",t.style.position="absolute",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(t);let o=hs(t.firstChild)[0];r=t.getBoundingClientRect().height,n=o&&o.width?o.width/27:7,s=o&&o.height?o.height:r,t.remove()}),{lineHeight:r,charWidth:n,textHeight:s}}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,n=0;;n++){let s=n==t.viewports.length?null:t.viewports[n],o=s?s.from-1:this.view.state.doc.length;if(o>r){let l=(t.lineBlockAt(o).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(X.replace({widget:new Xi(l),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return X.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Rs).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,n=this.view.state.facet(Oa).map((s,o)=>{let l=typeof s=="function";return l&&(r=!0),l?s(this.view):s});for(n.length&&(this.dynamicDecorationMap[e++]=r,t.push(le.join(n))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(du).map(s=>typeof s=="function"?s(this.view):s)}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet(cu))try{if(h(this.view,e.range,e))return!0}catch(c){Fe(this.view.state,c,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),n;if(!r)return;!t.empty&&(n=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,n.left),top:Math.min(r.top,n.top),right:Math.max(r.right,n.right),bottom:Math.max(r.bottom,n.bottom)});let s=za(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;if(W1(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==he.LTR),window.visualViewport&&window.innerHeight-window.visualViewport.height>1&&(r.top>window.pageYOffset+window.visualViewport.offsetTop+window.visualViewport.height||r.bottom<window.pageYOffset+window.visualViewport.offsetTop)){let h=this.view.docView.lineAt(t.head,1);h&&h.dom.scrollIntoView({block:"nearest"})}}lineHasWidget(e){let t=r=>r.isWidget()||r.children.some(t);return t(this.tile.resolveBlock(e,1).tile)}destroy(){jl(this.tile)}};function jl(i,e){let t=e?.get(i);if(t!=1){t==null&&i.destroy();for(let r of i.children)jl(r,e)}}function lp(i){return i.node.nodeType==1&&i.node.firstChild&&(i.offset==0||i.node.childNodes[i.offset-1].contentEditable=="false")&&(i.offset==i.node.childNodes.length||i.node.childNodes[i.offset].contentEditable=="false")}function vu(i,e){let t=i.observer.selectionRange;if(!t.focusNode)return null;let r=Xc(t.focusNode,t.focusOffset),n=_c(t.focusNode,t.focusOffset),s=r||n;if(n&&r&&n.node!=r.node){let l=ke.get(n.node);if(!l||l.isText()&&l.text!=n.node.nodeValue)s=n;else if(i.docView.lastCompositionAfterCursor){let a=ke.get(r.node);!a||a.isText()&&a.text!=r.node.nodeValue||(s=n)}}if(i.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function ap(i,e,t){let r=vu(i,t);if(!r)return null;let{node:n,from:s,to:o}=r,l=n.nodeValue;if(/[\n\r]/.test(l)||i.state.doc.sliceString(r.from,r.to)!=l)return null;let a=e.invertedDesc;return{range:new zt(a.mapPos(s),a.mapPos(o),s,o),text:n}}function hp(i,e){return i.nodeType!=1?0:(e&&i.childNodes[e-1].contentEditable=="false"?1:0)|(e<i.childNodes.length&&i.childNodes[e].contentEditable=="false"?2:0)}var cp=class{constructor(){this.changes=[]}compareRange(e,t){pi(e,t,this.changes)}comparePoint(e,t){pi(e,t,this.changes)}boundChange(e){pi(e,e,this.changes)}};function up(i,e,t){let r=new cp;return le.compare(i,e,t,r),r.changes}var Yl=class{constructor(){this.changes=[]}compareRange(e,t){pi(e,t,this.changes)}comparePoint(){}boundChange(e){pi(e,e,this.changes)}};function fp(i,e,t){let r=new Yl;return le.compare(i,e,t,r),r.changes}function dp(i,e){for(let t=i;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function mp(i,e){let t=!1;return e&&i.iterChangedRanges((r,n)=>{r<e.to&&n>e.from&&(t=!0)}),t}var Xi=class extends kt{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}};function pp(i,e,t=1){let r=i.charCategorizer(e),n=i.doc.lineAt(e),s=e-n.from;if(n.length==0)return I.cursor(e);s==0?t=1:s==n.length&&(t=-1);let o=s,l=s;t<0?o=Re(n.text,s,!1):l=Re(n.text,s);let a=r(n.text.slice(o,l));for(;o>0;){let h=Re(n.text,o,!1);if(r(n.text.slice(h,o))!=a)break;o=h}for(;l<n.length;){let h=Re(n.text,l);if(r(n.text.slice(l,h))!=a)break;l=h}return I.range(o+n.from,l+n.from)}function gp(i,e,t,r,n){let s=Math.round((r-e.left)*i.defaultCharacterWidth);if(i.lineWrapping&&t.height>i.defaultLineHeight*1.5){let l=i.viewState.heightOracle.textHeight,a=Math.floor((n-t.top-(i.defaultLineHeight-l)*.5)/l);s+=a*i.viewState.heightOracle.lineLength}let o=i.state.sliceDoc(t.from,t.to);return t.from+tc(o,s,i.state.tabSize)}function Xl(i,e,t){let r=i.lineBlockAt(e);if(Array.isArray(r.type)){let n;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!n||s.type==Ve.Text&&(n.type!=s.type||(t<0?s.from<e:s.to>e)))&&(n=s)}}return n||r}return r}function vp(i,e,t,r){let n=Xl(i,e.head,e.assoc||-1),s=!r||n.type!=Ve.Text||!(i.lineWrapping||n.widgetLineBreaks)?null:i.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(s){let o=i.dom.getBoundingClientRect(),l=i.textDirectionAt(n.from),a=i.posAtCoords({x:t==(l==he.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(a!=null)return I.cursor(a,t?-1:1)}return I.cursor(t?n.to:n.from,t?-1:1)}function gc(i,e,t,r){let n=i.state.doc.lineAt(e.head),s=i.bidiSpans(n),o=i.textDirectionAt(n.from);for(let l=e,a=null;;){let h=Z1(n,s,o,l,t),c=tu;if(!h){if(n.number==(t?i.state.doc.lines:1))return l;c=`
`,n=i.state.doc.line(n.number+(t?1:-1)),s=i.bidiSpans(n),h=i.visualLineSide(n,!t)}if(a){if(!a(c))return l}else{if(!r)return h;a=r(c)}l=h}}function bp(i,e,t){let r=i.state.charCategorizer(e),n=r(t);return s=>{let o=r(s);return n==Ee.Space&&(n=o),n==o}}function yp(i,e,t,r){let n=e.head,s=t?1:-1;if(n==(t?i.state.doc.length:0))return I.cursor(n,e.assoc);let o=e.goalColumn,l,a=i.contentDOM.getBoundingClientRect(),h=i.coordsAtPos(n,(e.empty?e.assoc:0)||(t?1:-1)),c=i.documentTop;if(h)o==null&&(o=h.left-a.left),l=s<0?h.top:h.bottom;else{let v=i.viewState.lineBlockAt(n);o==null&&(o=Math.min(a.right-a.left,i.defaultCharacterWidth*(n-v.from))),l=(s<0?v.top:v.bottom)+c}let u=a.left+o,d=r??i.viewState.heightOracle.textHeight>>1,p=_l(i,{x:u,y:l+d*s},!1,s);return I.cursor(p.pos,p.assoc,void 0,o)}function _i(i,e,t){for(;;){let r=0;for(let n of i)n.between(e-1,e+1,(s,o,l)=>{if(e>s&&e<o){let a=r||t||(e-s<o-e?-1:1);e=a<0?s:o,r=a}});if(!r)return e}}function bu(i,e){let t=null;for(let r=0;r<e.ranges.length;r++){let n=e.ranges[r],s=null;if(n.empty){let o=_i(i,n.from,0);o!=n.from&&(s=I.cursor(o,-1))}else{let o=_i(i,n.from,-1),l=_i(i,n.to,1);(o!=n.from||l!=n.to)&&(s=I.range(n.from==n.anchor?o:l,n.from==n.head?o:l))}s&&(t||(t=e.ranges.slice()),t[r]=s)}return t?I.create(t,e.mainIndex):e}function Ml(i,e,t){let r=_i(i.state.facet(ln).map(n=>n(i)),t.from,e.head>t.from?-1:1);return r==t.from?t:I.cursor(r,r<t.from?1:-1)}var xt=class{constructor(e,t){this.pos=e,this.assoc=t}};function _l(i,e,t,r){let n=i.contentDOM.getBoundingClientRect(),s=n.top+i.viewState.paddingTop,{x:o,y:l}=e,a=l-s,h;for(;;){if(a<0)return new xt(0,1);if(a>i.viewState.docHeight)return new xt(i.state.doc.length,-1);if(h=i.elementAtHeight(a),r==null)break;if(h.type==Ve.Text){if(r<0?h.to<i.viewport.from:h.from>i.viewport.to)break;let d=i.docView.coordsAt(r<0?h.from:h.to,r>0?-1:1);if(d&&(r<0?d.top<=a+s:d.bottom>=a+s))break}let u=i.viewState.heightOracle.textHeight/2;a=r>0?h.bottom+u:h.top-u}if(i.viewport.from>=h.to||i.viewport.to<=h.from){if(t)return null;if(h.type==Ve.Text){let u=gp(i,n,h,o,l);return new xt(u,u==h.from?1:-1)}}if(h.type!=Ve.Text)return a<(h.top+h.bottom)/2?new xt(h.from,1):new xt(h.to,-1);let c=i.docView.lineAt(h.from,2);return(!c||c.length!=h.length)&&(c=i.docView.lineAt(h.from,-2)),new Jl(i,o,l,i.textDirectionAt(h.from)).scanTile(c,h.from)}var Jl=class{constructor(e,t,r,n){this.view=e,this.x=t,this.y=r,this.baseDir=n,this.line=null,this.spans=null}bidiSpansAt(e){return(!this.line||this.line.from>e||this.line.to<e)&&(this.line=this.view.state.doc.lineAt(e),this.spans=this.view.bidiSpans(this.line)),this}baseDirAt(e,t){let{line:r,spans:n}=this.bidiSpansAt(e);return n[wt.find(n,e-r.from,-1,t)].level==this.baseDir}dirAt(e,t){let{line:r,spans:n}=this.bidiSpansAt(e);return n[wt.find(n,e-r.from,-1,t)].dir}bidiIn(e,t){let{spans:r,line:n}=this.bidiSpansAt(e);return r.length>1||r.length&&(r[0].level!=this.baseDir||r[0].to+n.from<t)}scan(e,t){let r=0,n=e.length-1,s=new Set,o=this.bidiIn(e[0],e[n]),l,a,h=-1,c=1e9,u;e:for(;r<n;){let p=n-r,v=r+n>>1;t:if(s.has(v)){let w=r+Math.floor(Math.random()*p);for(let S=0;S<p;S++){if(!s.has(w)){v=w;break t}w++,w==n&&(w=r)}break e}s.add(v);let y=t(v);if(y)for(let w=0;w<y.length;w++){let S=y[w],A=0;if(S.bottom<this.y)(!l||l.bottom<S.bottom)&&(l=S),A=1;else if(S.top>this.y)(!a||a.top>S.top)&&(a=S),A=-1;else{let M=S.left>this.x?this.x-S.left:S.right<this.x?this.x-S.right:0,E=Math.abs(M);E<c&&(h=v,c=E,u=S),M&&(A=M<0==(this.baseDir==he.LTR)?-1:1)}A==-1&&(!o||this.baseDirAt(e[v],1))?n=v:A==1&&(!o||this.baseDirAt(e[v+1],-1))&&(r=v+1)}}if(!u){let p=l&&(!a||this.y-l.bottom<a.top-this.y)?l:a;return this.y=(p.top+p.bottom)/2,this.scan(e,t)}let d=(o?this.dirAt(e[h],1):this.baseDir)==he.LTR;return{i:h,after:this.x>(u.left+u.right)/2==d}}scanText(e,t){let r=[];for(let s=0;s<e.length;s=Re(e.text,s))r.push(t+s);r.push(t+e.length);let n=this.scan(r,s=>{let o=r[s]-t,l=r[s+1]-t;return rn(e.dom,o,l).getClientRects()});return n.after?new xt(r[n.i+1],-1):new xt(r[n.i],1)}scanTile(e,t){if(!e.length)return new xt(t,1);if(e.children.length==1){let l=e.children[0];if(l.isText())return this.scanText(l,t);if(l.isComposite())return this.scanTile(l,t)}let r=[t];for(let l=0,a=t;l<e.children.length;l++)r.push(a+=e.children[l].length);let n=this.scan(r,l=>{let a=e.children[l];return a.flags&48?null:(a.dom.nodeType==1?a.dom:rn(a.dom,0,a.length)).getClientRects()}),s=e.children[n.i],o=r[n.i];return s.isText()?this.scanText(s,o):s.isComposite()?this.scanTile(s,o):n.after?new xt(r[n.i+1],-1):new xt(o,1)}},Vi="\uFFFF",Zl=class{constructor(e,t){this.points=e,this.view=t,this.text="",this.lineSeparator=t.state.facet(fe.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Vi}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let n=e;;){this.findPointBefore(r,n);let s=this.text.length;this.readNode(n);let o=ke.get(n),l=n.nextSibling;if(l==t){o?.breakAfter&&!l&&r!=this.view.contentDOM&&this.lineBreak();break}let a=ke.get(l);(o&&a?o.breakAfter:(o?o.breakAfter:vs(n))||vs(l)&&(n.nodeName!="BR"||o?.isWidget())&&this.text.length>s)&&!wp(l,t)&&this.lineBreak(),n=l}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(l=n.exec(t))&&(s=l.index,o=l[0].length),this.append(t.slice(r,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);r=s+o}}readNode(e){let t=ke.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let n=r.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(xp(e,r.node,r.offset)?t:0))}};function xp(i,e,t){for(;;){if(!e||t<ar(e))return!1;if(e==i)return!0;t=xr(e)+1,e=e.parentNode}}function wp(i,e){let t;for(;!(i==e||!i);i=i.nextSibling){let r=ke.get(i);if(!r?.isWidget())return!1;r&&(t||(t=[])).push(r)}if(t)for(let r of t){let n=r.overrideDOMText;if(n?.length)return!1}return!0}var ks=class{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}},Ql=class{constructor(e,t,r,n){this.typeOver=n,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=yu(e.docView.tile,t,r,0))){let l=s||o?[]:Sp(e),a=new Zl(l,e);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=Cp(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!Il(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),h=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!Il(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),c=e.viewport;if((W.ios||W.chrome)&&e.state.selection.main.empty&&a!=h&&(c.from>0||c.to<e.state.doc.length)){let u=Math.min(a,h),d=Math.max(a,h),p=c.from-u,v=c.to-d;(p==0||p==1||u==0)&&(v==0||v==-1||d==e.state.doc.length)&&(a=0,h=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(I.range(h,a)):this.newSel=I.single(h,a)}}};function yu(i,e,t,r){if(i.isComposite()){let n=-1,s=-1,o=-1,l=-1;for(let a=0,h=r,c=r;a<i.children.length;a++){let u=i.children[a],d=h+u.length;if(h<e&&d>t)return yu(u,e,t,h);if(d>=e&&n==-1&&(n=a,s=h),h>t&&u.dom.parentNode==i.dom){o=a,l=c;break}c=d,h=d+u.breakAfter}return{from:s,to:l<0?r+i.length:l,startDOM:(n?i.children[n-1].dom.nextSibling:null)||i.dom.firstChild,endDOM:o<i.children.length&&o>=0?i.children[o].dom:null}}else return i.isText()?{from:r,to:r+i.length,startDOM:i.dom,endDOM:i.dom.nextSibling}:null}function xu(i,e){let t,{newSel:r}=e,n=i.state.selection.main,s=i.inputState.lastKeyTime>Date.now()-100?i.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=n.from,h=null;(s===8||W.android&&e.text.length<l-o)&&(a=n.to,h="end");let c=wu(i.state.doc.sliceString(o,l,Vi),e.text,a-o,h);c&&(W.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Vi+Vi&&c.toB--,t={from:o+c.from,to:o+c.toA,insert:se.of(e.text.slice(c.from,c.toB).split(Vi))})}else r&&(!i.hasFocus&&i.state.facet(or)||Ss(r,n))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!n.empty&&r&&r.main.empty?t={from:n.from,to:n.to,insert:i.state.doc.slice(n.from,n.to)}:(W.mac||W.android)&&t&&t.from==t.to&&t.from==n.head-1&&/^\. ?$/.test(t.insert.toString())&&i.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=I.single(r.main.anchor-1,r.main.head-1)),t={from:t.from,to:t.to,insert:se.of([t.insert.toString().replace("."," ")])}):t&&t.from>=n.from&&t.to<=n.to&&(t.from!=n.from||t.to!=n.to)&&n.to-n.from-(t.to-t.from)<=4?t={from:n.from,to:n.to,insert:i.state.doc.slice(n.from,t.from).append(t.insert).append(i.state.doc.slice(t.to,n.to))}:i.state.doc.lineAt(n.from).to<n.to&&i.docView.lineHasWidget(n.to)&&i.inputState.insertingTextAt>Date.now()-50?t={from:n.from,to:n.to,insert:i.state.toText(i.inputState.insertingText)}:W.chrome&&t&&t.from==t.to&&t.from==n.head&&t.insert.toString()==`
 `&&i.lineWrapping&&(r&&(r=I.single(r.main.anchor-1,r.main.head-1)),t={from:n.from,to:n.to,insert:se.of([" "])}),t)return La(i,t,r,s);if(r&&!Ss(r,n)){let o=!1,l="select";return i.inputState.lastSelectionTime>Date.now()-50&&(i.inputState.lastSelectionOrigin=="select"&&(o=!0),l=i.inputState.lastSelectionOrigin,l=="select.pointer"&&(r=bu(i.state.facet(ln).map(a=>a(i)),r))),i.dispatch({selection:r,scrollIntoView:o,userEvent:l}),!0}else return!1}function La(i,e,t,r=-1){if(W.ios&&i.inputState.flushIOSKey(e))return!0;let n=i.state.selection.main;if(W.android&&(e.to==n.to&&(e.from==n.from||e.from==n.from-1&&i.state.sliceDoc(e.from,n.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&gi(i.contentDOM,"Enter",13)||(e.from==n.from-1&&e.to==n.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>n.head)&&gi(i.contentDOM,"Backspace",8)||e.from==n.from&&e.to==n.to+1&&e.insert.length==0&&gi(i.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();i.inputState.composing>=0&&i.inputState.composing++;let o,l=()=>o||(o=kp(i,e,t));return i.state.facet(ou).some(a=>a(i,e.from,e.to,s,l))||i.dispatch(l()),!0}function kp(i,e,t){let r,n=i.state,s=n.selection.main,o=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let a=e.from<s.from?-1:1,h=a<0?s.from:s.to,c=_i(n.facet(ln).map(u=>u(i)),h,a);e.from==c&&(o=c)}if(o>-1)r={changes:e,selection:I.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&i.inputState.composing<0){let a=s.from<e.from?n.sliceDoc(s.from,e.from):"",h=s.to>e.to?n.sliceDoc(e.to,s.to):"";r=n.replaceSelection(i.state.toText(a+e.insert.sliceString(0,void 0,i.state.lineBreak)+h))}else{let a=n.changes(e),h=t&&t.main.to<=a.newLength?t.main:void 0;if(n.selection.ranges.length>1&&(i.inputState.composing>=0||i.inputState.compositionPendingChange)&&e.to<=s.to+10&&e.to>=s.to-10){let c=i.state.sliceDoc(e.from,e.to),u,d=t&&vu(i,t.main.head);if(d){let v=e.insert.length-(e.to-e.from);u={from:d.from,to:d.to-v}}else u=i.state.doc.lineAt(s.head);let p=s.to-e.to;r=n.changeByRange(v=>{if(v.from==s.from&&v.to==s.to)return{changes:a,range:h||v.map(a)};let y=v.to-p,w=y-c.length;if(i.state.sliceDoc(w,y)!=c||y>=u.from&&w<=u.to)return{range:v};let S=n.changes({from:w,to:y,insert:e.insert}),A=v.to-s.to;return{changes:S,range:h?I.range(Math.max(0,h.anchor+A),Math.max(0,h.head+A)):v.map(S)}})}else r={changes:a,selection:h&&n.selection.replaceRange(h)}}let l="input.type";return(i.composing||i.inputState.compositionPendingChange&&i.inputState.compositionEndedAt>Date.now()-50)&&(i.inputState.compositionPendingChange=!1,l+=".compose",i.inputState.compositionFirstChange&&(l+=".start",i.inputState.compositionFirstChange=!1)),n.update(r,{userEvent:l,scrollIntoView:!0})}function wu(i,e,t,r){let n=Math.min(i.length,e.length),s=0;for(;s<n&&i.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==n&&i.length==e.length)return null;let o=i.length,l=e.length;for(;o>0&&l>0&&i.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(r=="end"){let a=Math.max(0,s-Math.min(o,l));t-=o+a-s}if(o<s&&i.length<e.length){let a=t<=s&&t>=o?s-t:0;s-=a,l=s+(l-o),o=s}else if(l<s){let a=t<=s&&t>=l?s-t:0;s-=a,o=s+(o-l),l=s}return{from:s,toA:o,toB:l}}function Sp(i){let e=[];if(i.root.activeElement!=i.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:n,focusOffset:s}=i.observer.selectionRange;return t&&(e.push(new ks(t,r)),(n!=t||s!=r)&&e.push(new ks(n,s))),e}function Cp(i,e){if(i.length==0)return null;let t=i[0].pos,r=i.length==2?i[1].pos:t;return t>-1&&r>-1?I.single(t+e,r+e):null}function Ss(i,e){return e.head==i.main.head&&e.anchor==i.main.anchor}var ea=class{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,W.safari&&e.contentDOM.addEventListener("input",()=>null),W.gecko&&Fp(e.contentDOM.ownerDocument)}handleEvent(e){!Op(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let r=this.handlers[e];if(r){for(let n of r.observers)n(this.view,t);for(let n of r.handlers){if(t.defaultPrevented)break;if(n(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=Ap(e),r=this.handlers,n=this.view.contentDOM;for(let s in t)if(s!="scroll"){let o=!t[s].handlers.length,l=r[s];l&&o!=!l.handlers.length&&(n.removeEventListener(s,this.handleEvent),l=null),l||n.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!t[s]&&n.removeEventListener(s,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Su.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),W.android&&W.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return W.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=ku.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||Mp.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,gi(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:W.safari&&!W.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}};function vc(i,e){return(t,r)=>{try{return e.call(i,r,t)}catch(n){Fe(t.state,n)}}}function Ap(i){let e=Object.create(null);function t(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of i){let n=r.spec,s=n&&n.plugin.domEventHandlers,o=n&&n.plugin.domEventObservers;if(s)for(let l in s){let a=s[l];a&&t(l).handlers.push(vc(r.value,a))}if(o)for(let l in o){let a=o[l];a&&t(l).observers.push(vc(r.value,a))}}for(let r in Lt)t(r).handlers.push(Lt[r]);for(let r in St)t(r).observers.push(St[r]);return e}var ku=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Mp="dthko",Su=[16,17,18,20,91,92,224,225],ts=6;function rs(i){return Math.max(0,i)*.7+8}function Tp(i,e){return Math.max(Math.abs(i.clientX-e.clientX),Math.abs(i.clientY-e.clientY))}var ta=class{constructor(e,t,r,n){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=n,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=V1(e.contentDOM),this.atoms=e.state.facet(ln).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(fe.allowMultipleSelections)&&Dp(e,t),this.dragging=Ep(e,t)&&Mu(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Tp(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,r=0,n=0,s=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:n,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=za(this.view);e.clientX-a.left<=n+ts?t=-rs(n-e.clientX):e.clientX+a.right>=o-ts&&(t=rs(e.clientX-o)),e.clientY-a.top<=s+ts?r=-rs(s-e.clientY):e.clientY+a.bottom>=l-ts&&(r=rs(e.clientY-l)),this.setScrollSpeed(t,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,r=bu(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}};function Dp(i,e){let t=i.state.facet(ru);return t.length?t[0](e):W.mac?e.metaKey:e.ctrlKey}function Bp(i,e){let t=i.state.facet(iu);return t.length?t[0](e):W.mac?!e.altKey:!e.ctrlKey}function Ep(i,e){let{main:t}=i.state.selection;if(t.empty)return!1;let r=tn(i.root);if(!r||r.rangeCount==0)return!0;let n=r.getRangeAt(0).getClientRects();for(let s=0;s<n.length;s++){let o=n[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Op(i,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=i.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=ke.get(t))&&r.isWidget()&&!r.isHidden&&r.widget.ignoreEvent(e))return!1;return!0}var Lt=Object.create(null),St=Object.create(null),Cu=W.ie&&W.ie_version<15||W.ios&&W.webkit_version<604;function zp(i){let e=i.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{i.focus(),t.remove(),Au(i,t.value)},50)}function Is(i,e,t){for(let r of i.facet(e))t=r(t,i);return t}function Au(i,e){e=Is(i.state,Da,e);let{state:t}=i,r,n=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(ra!=null&&t.selection.ranges.every(a=>a.empty)&&ra==s.toString()){let a=-1;r=t.changeByRange(h=>{let c=t.doc.lineAt(h.from);if(c.from==a)return{range:h};a=c.from;let u=t.toText((o?s.line(n++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:u},range:I.cursor(h.from+u.length)}})}else o?r=t.changeByRange(a=>{let h=s.line(n++);return{changes:{from:a.from,to:a.to,insert:h.text},range:I.cursor(a.from+h.length)}}):r=t.replaceSelection(s);i.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}St.scroll=i=>{i.inputState.lastScrollTop=i.scrollDOM.scrollTop,i.inputState.lastScrollLeft=i.scrollDOM.scrollLeft};Lt.keydown=(i,e)=>(i.inputState.setSelectionOrigin("select"),e.keyCode==27&&i.inputState.tabFocusMode!=0&&(i.inputState.tabFocusMode=Date.now()+2e3),!1);St.touchstart=(i,e)=>{i.inputState.lastTouchTime=Date.now(),i.inputState.setSelectionOrigin("select.pointer")};St.touchmove=i=>{i.inputState.setSelectionOrigin("select.pointer")};Lt.mousedown=(i,e)=>{if(i.observer.flush(),i.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let r of i.state.facet(nu))if(t=r(i,e),t)break;if(!t&&e.button==0&&(t=Rp(i,e)),t){let r=!i.hasFocus;i.inputState.startMouseSelection(new ta(i,e,t,r)),r&&i.observer.ignore(()=>{jc(i.contentDOM);let s=i.root.activeElement;s&&!s.contains(i.contentDOM)&&s.blur()});let n=i.inputState.mouseSelection;if(n)return n.start(e),n.dragging===!1}else i.inputState.setSelectionOrigin("select.pointer");return!1};function bc(i,e,t,r){if(r==1)return I.cursor(e,t);if(r==2)return pp(i.state,e,t);{let n=i.docView.lineAt(e,t),s=i.state.doc.lineAt(n?n.posAtEnd:e),o=n?n.posAtStart:s.from,l=n?n.posAtEnd:s.to;return l<i.state.doc.length&&l==s.to&&l++,I.range(o,l)}}var Lp=W.ie&&W.ie_version<=11,yc=null,xc=0,wc=0;function Mu(i){if(!Lp)return i.detail;let e=yc,t=wc;return yc=i,wc=Date.now(),xc=!e||t>Date.now()-400&&Math.abs(e.clientX-i.clientX)<2&&Math.abs(e.clientY-i.clientY)<2?(xc+1)%3:1}function Rp(i,e){let t=i.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),r=Mu(e),n=i.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),n=n.map(s.changes))},get(s,o,l){let a=i.posAndSideAtCoords({x:s.clientX,y:s.clientY},!1),h,c=bc(i,a.pos,a.assoc,r);if(t.pos!=a.pos&&!o){let u=bc(i,t.pos,t.assoc,r),d=Math.min(u.from,c.from),p=Math.max(u.to,c.to);c=d<c.from?I.range(d,p):I.range(p,d)}return o?n.replaceRange(n.main.extend(c.from,c.to)):l&&r==1&&n.ranges.length>1&&(h=Ip(n,a.pos))?h:l?n.addRange(c):I.create([c])}}}function Ip(i,e){for(let t=0;t<i.ranges.length;t++){let{from:r,to:n}=i.ranges[t];if(r<=e&&n>=e)return I.create(i.ranges.slice(0,t).concat(i.ranges.slice(t+1)),i.mainIndex==t?0:i.mainIndex-(i.mainIndex>t?1:0))}return null}Lt.dragstart=(i,e)=>{let{selection:{main:t}}=i.state;if(e.target.draggable){let n=i.docView.tile.nearest(e.target);if(n&&n.isWidget()){let s=n.posAtStart,o=s+n.length;(s>=t.to||o<=t.from)&&(t=I.range(s,o))}}let{inputState:r}=i;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Is(i.state,Ba,i.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Lt.dragend=i=>(i.inputState.draggedContent=null,!1);function kc(i,e,t,r){if(t=Is(i.state,Da,t),!t)return;let n=i.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=i.inputState,o=r&&s&&Bp(i,e)?{from:s.from,to:s.to}:null,l={from:n,insert:t},a=i.state.changes(o?[o,l]:l);i.focus(),i.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},userEvent:o?"move.drop":"input.drop"}),i.inputState.draggedContent=null}Lt.drop=(i,e)=>{if(!e.dataTransfer)return!1;if(i.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let r=Array(t.length),n=0,s=()=>{++n==t.length&&kc(i,e,r.filter(o=>o!=null).join(i.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(r[o]=l.result),s()},l.readAsText(t[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return kc(i,e,r,!0),!0}return!1};Lt.paste=(i,e)=>{if(i.state.readOnly)return!0;i.observer.flush();let t=Cu?null:e.clipboardData;return t?(Au(i,t.getData("text/plain")||t.getData("text/uri-list")),!0):(zp(i),!1)};function Pp(i,e){let t=i.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),i.focus()},50)}function Np(i){let e=[],t=[],r=!1;for(let n of i.selection.ranges)n.empty||(e.push(i.sliceDoc(n.from,n.to)),t.push(n));if(!e.length){let n=-1;for(let{from:s}of i.selection.ranges){let o=i.doc.lineAt(s);o.number>n&&(e.push(o.text),t.push({from:o.from,to:Math.min(i.doc.length,o.to+1)})),n=o.number}r=!0}return{text:Is(i,Ba,e.join(i.lineBreak)),ranges:t,linewise:r}}var ra=null;Lt.copy=Lt.cut=(i,e)=>{if(!Ui(i.contentDOM,i.observer.selectionRange))return!1;let{text:t,ranges:r,linewise:n}=Np(i.state);if(!t&&!n)return!1;ra=n?t:null,e.type=="cut"&&!i.state.readOnly&&i.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=Cu?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",t),!0):(Pp(i,t),!1)};var Tu=rt.define();function Du(i,e){let t=[];for(let r of i.facet(lu)){let n=r(i,e);n&&t.push(n)}return t.length?i.update({effects:t,annotations:Tu.of(!0)}):null}function Bu(i){setTimeout(()=>{let e=i.hasFocus;if(e!=i.inputState.notifiedFocused){let t=Du(i.state,e);t?i.dispatch(t):i.update([])}},10)}St.focus=i=>{i.inputState.lastFocusTime=Date.now(),!i.scrollDOM.scrollTop&&(i.inputState.lastScrollTop||i.inputState.lastScrollLeft)&&(i.scrollDOM.scrollTop=i.inputState.lastScrollTop,i.scrollDOM.scrollLeft=i.inputState.lastScrollLeft),Bu(i)};St.blur=i=>{i.observer.clearSelectionRange(),Bu(i)};St.compositionstart=St.compositionupdate=i=>{i.observer.editContext||(i.inputState.compositionFirstChange==null&&(i.inputState.compositionFirstChange=!0),i.inputState.composing<0&&(i.inputState.composing=0))};St.compositionend=i=>{i.observer.editContext||(i.inputState.composing=-1,i.inputState.compositionEndedAt=Date.now(),i.inputState.compositionPendingKey=!0,i.inputState.compositionPendingChange=i.observer.pendingRecords().length>0,i.inputState.compositionFirstChange=null,W.chrome&&W.android?i.observer.flushSoon():i.inputState.compositionPendingChange?Promise.resolve().then(()=>i.observer.flush()):setTimeout(()=>{i.inputState.composing<0&&i.docView.hasComposition&&i.update([])},50))};St.contextmenu=i=>{i.inputState.lastContextMenu=Date.now()};Lt.beforeinput=(i,e)=>{var t,r;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(i.inputState.insertingText=e.data,i.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&i.observer.editContext){let s=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let l=o[0],a=i.posAtDOM(l.startContainer,l.startOffset),h=i.posAtDOM(l.endContainer,l.endOffset);return La(i,{from:a,to:h,insert:i.state.toText(s)},null),!0}}let n;if(W.chrome&&W.android&&(n=ku.find(s=>s.inputType==e.inputType))&&(i.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&i.hasFocus&&(i.contentDOM.blur(),i.focus())},100)}return W.ios&&e.inputType=="deleteContentForward"&&i.observer.flushSoon(),W.safari&&e.inputType=="insertText"&&i.inputState.composing>=0&&setTimeout(()=>St.compositionend(i,e),20),!1};var Sc=new Set;function Fp(i){Sc.has(i)||(Sc.add(i),i.addEventListener("copy",()=>{}),i.addEventListener("cut",()=>{}))}var Cc=["pre-wrap","normal","pre-line","break-spaces"],wi=!1;function Ac(){wi=!1}var ia=class{constructor(e){this.lineWrapping=e,this.doc=se.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Cc.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let n=e[r];n<0?r++:this.heightSamples[Math.floor(n*10)]||(t=!0,this.heightSamples[Math.floor(n*10)]=!0)}return t}refresh(e,t,r,n,s,o){let l=Cc.indexOf(e)>-1,a=Math.abs(t-this.lineHeight)>.3||this.lineWrapping!=l||Math.abs(r-this.charWidth)>.1;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=r,this.textHeight=n,this.lineLength=s,a){this.heightSamples={};for(let h=0;h<o.length;h++){let c=o[h];c<0?h++:this.heightSamples[Math.floor(c*10)]=!0}}return a}},na=class{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}},Ot=class i{constructor(e,t,r,n,s){this.from=e,this.length=t,this.top=r,this.height=n,this._content=s}get type(){return typeof this._content=="number"?Ve.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof qr?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new i(this.from,this.length+e.length,this.top,this.height+e.height,t)}},de=function(i){return i[i.ByPos=0]="ByPos",i[i.ByHeight=1]="ByHeight",i[i.ByPosNoHeight=2]="ByPosNoHeight",i}(de||(de={})),cs=.001,ft=class i{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>cs&&(wi=!0),this.height=e)}replace(e,t,r){return i.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,n){let s=this,o=r.doc;for(let l=n.length-1;l>=0;l--){let{fromA:a,toA:h,fromB:c,toB:u}=n[l],d=s.lineAt(a,de.ByPosNoHeight,r.setDoc(t),0,0),p=d.to>=h?d:s.lineAt(h,de.ByPosNoHeight,r,0,0);for(u+=p.to-h,h=p.to;l>0&&d.from<=n[l-1].toA;)a=n[l-1].fromA,c=n[l-1].fromB,l--,a<d.from&&(d=s.lineAt(a,de.ByPosNoHeight,r,0,0));c+=d.from-a,a=d.from;let v=oa.build(r.setDoc(o),e,c,u);s=Cs(s,s.replace(a,h,v))}return s.updateHeight(r,0)}static empty(){return new yt(0,0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,n=0,s=0;for(;;)if(t==r)if(n>s*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),r+=1+l.break,n-=l.size}else if(s>n*2){let l=e[r];l.break?e.splice(r,1,l.left,null,l.right):e.splice(r,1,l.left,l.right),r+=2+l.break,s-=l.size}else break;else if(n<s){let l=e[t++];l&&(n+=l.size)}else{let l=e[--r];l&&(s+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,r++),new sa(i.of(e.slice(0,t)),o,i.of(e.slice(r)))}};function Cs(i,e){return i==e?i:(i.constructor!=e.constructor&&(wi=!0),e)}ft.prototype.size=1;var Hp=X.replace({}),As=class extends ft{constructor(e,t,r){super(e,t),this.deco=r,this.spaceAbove=0}mainBlock(e,t){return new Ot(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,t,r,n){return this.spaceAbove&&e<r+this.spaceAbove?new Ot(n,0,r,this.spaceAbove,Hp):this.mainBlock(r,n)}lineAt(e,t,r,n,s){let o=this.mainBlock(n,s);return this.spaceAbove?this.blockAt(0,r,n,s).join(o):o}forEachLine(e,t,r,n,s,o){e<=s+this.length&&t>=s&&o(this.lineAt(0,de.ByPos,r,n,s))}setMeasuredHeight(e){let t=e.heights[e.index++];t<0?(this.spaceAbove=-t,t=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(t)}updateHeight(e,t=0,r=!1,n){return n&&n.from<=t&&n.more&&this.setMeasuredHeight(n),this.outdated=!1,this}toString(){return`block(${this.length})`}},yt=class i extends As{constructor(e,t,r){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=r}mainBlock(e,t){return new Ot(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,t,r){let n=r[0];return r.length==1&&(n instanceof i||n instanceof yr&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof yr?n=new i(n.length,this.height,this.spaceAbove):n.height=this.height,this.outdated||(n.outdated=!1),n):ft.of(r)}updateHeight(e,t=0,r=!1,n){return n&&n.from<=t&&n.more?this.setMeasuredHeight(n):(r||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}},yr=class i extends ft{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,n=e.doc.lineAt(t+this.length).number,s=n-r+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);o=a/s,this.length>s+1&&(l=(this.height-a)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:n,perLine:o,perChar:l}}blockAt(e,t,r,n){let{firstLine:s,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(t,n);if(t.lineWrapping){let h=n+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),c=t.doc.lineAt(h),u=l+c.length*a,d=Math.max(r,e-u/2);return new Ot(c.from,c.length,d,u,0)}else{let h=Math.max(0,Math.min(o-s,Math.floor((e-r)/l))),{from:c,length:u}=t.doc.line(s+h);return new Ot(c,u,r+l*h,l,0)}}lineAt(e,t,r,n,s){if(t==de.ByHeight)return this.blockAt(e,r,n,s);if(t==de.ByPosNoHeight){let{from:p,to:v}=r.doc.lineAt(e);return new Ot(p,v-p,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(r,s),h=r.doc.lineAt(e),c=l+h.length*a,u=h.number-o,d=n+l*u+a*(h.from-s-u);return new Ot(h.from,h.length,Math.max(n,Math.min(d,n+this.height-c)),c,0)}forEachLine(e,t,r,n,s,o){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:l,perLine:a,perChar:h}=this.heightMetrics(r,s);for(let c=e,u=n;c<=t;){let d=r.doc.lineAt(c);if(c==e){let v=d.number-l;u+=a*v+h*(e-s-v)}let p=a+h*d.length;o(new Ot(d.from,d.length,u,p,0)),u+=p,c=d.to+1}}replace(e,t,r){let n=this.length-t;if(n>0){let s=r[r.length-1];s instanceof i?r[r.length-1]=new i(s.length+n):r.push(null,new i(n-1))}if(e>0){let s=r[0];s instanceof i?r[0]=new i(e+s.length):r.unshift(new i(e-1),null)}return ft.of(r)}decomposeLeft(e,t){t.push(new i(e-1),null)}decomposeRight(e,t){t.push(null,new i(this.length-e-1))}updateHeight(e,t=0,r=!1,n){let s=t+this.length;if(n&&n.from<=t+this.length&&n.more){let o=[],l=Math.max(t,n.from),a=-1;for(n.from>t&&o.push(new i(n.from-t-1).updateHeight(e,t));l<=s&&n.more;){let c=e.doc.lineAt(l).length;o.length&&o.push(null);let u=n.heights[n.index++],d=0;u<0&&(d=-u,u=n.heights[n.index++]),a==-1?a=u:Math.abs(u-a)>=cs&&(a=-2);let p=new yt(c,u,d);p.outdated=!1,o.push(p),l+=c+1}l<=s&&o.push(null,new i(s-l).updateHeight(e,l));let h=ft.of(o);return(a<0||Math.abs(h.height-this.height)>=cs||Math.abs(a-this.heightMetrics(e,t).perLine)>=cs)&&(wi=!0),Cs(this,h)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}},sa=class extends ft{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,n){let s=r+this.left.height;return e<s?this.left.blockAt(e,t,r,n):this.right.blockAt(e,t,s,n+this.left.length+this.break)}lineAt(e,t,r,n,s){let o=n+this.left.height,l=s+this.left.length+this.break,a=t==de.ByHeight?e<o:e<l,h=a?this.left.lineAt(e,t,r,n,s):this.right.lineAt(e,t,r,o,l);if(this.break||(a?h.to<l:h.from>l))return h;let c=t==de.ByPosNoHeight?de.ByPosNoHeight:de.ByPos;return a?h.join(this.right.lineAt(l,c,r,o,l)):this.left.lineAt(l,c,r,n,s).join(h)}forEachLine(e,t,r,n,s,o){let l=n+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,r,n,s,o),t>=a&&this.right.forEachLine(e,t,r,l,a,o);else{let h=this.lineAt(a,de.ByPos,r,n,s);e<h.from&&this.left.forEachLine(e,h.from-1,r,n,s,o),h.to>=e&&h.from<=t&&o(h),t>h.to&&this.right.forEachLine(h.to+1,t,r,l,a,o)}}replace(e,t,r){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of r)s.push(l);if(e>0&&Mc(s,o-1),t<this.length){let l=s.length;this.decomposeRight(t,s),Mc(s,l)}return ft.of(s)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,n=r+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?ft.of(this.break?[e,null,t]:[e,t]):(this.left=Cs(this.left,e),this.right=Cs(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,n){let{left:s,right:o}=this,l=t+s.length+this.break,a=null;return n&&n.from<=t+s.length&&n.more?a=s=s.updateHeight(e,t,r,n):s.updateHeight(e,t,r),n&&n.from<=l+o.length&&n.more?a=o=o.updateHeight(e,l,r,n):o.updateHeight(e,l,r),a?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}};function Mc(i,e){let t,r;i[e]==null&&(t=i[e-1])instanceof yr&&(r=i[e+1])instanceof yr&&i.splice(e-1,3,new yr(t.length+1+r.length))}var qp=5,oa=class i{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof yt?n.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new yt(r-this.pos,-1,0)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let n=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;n<0&&(n=this.oracle.lineHeight);let o=t-e;r.block?this.addBlock(new As(o,n,r)):(o||s||n>=qp)&&this.addLineDeco(n,s,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new yt(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,t){let r=new yr(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof yt)return e;let t=new yt(0,-1,0);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let n=this.ensureLine();n.length+=r,n.collapsed+=r,n.widgetHeight=Math.max(n.widgetHeight,e),n.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof yt)&&!this.isCovered?this.nodes.push(new yt(0,-1,0)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let n of this.nodes)n instanceof yt&&n.updateHeight(this.oracle,r),r+=n?n.length:1;return this.nodes}static build(e,t,r,n){let s=new i(r,e);return le.spans(t,r,n,s,0),s.finish(r)}};function Wp(i,e,t){let r=new la;return le.compare(i,e,t,r,0),r.changes}var la=class{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,n){(e<t||r&&r.heightRelevant||n&&n.heightRelevant)&&pi(e,t,this.changes,5)}};function Vp(i,e){let t=i.getBoundingClientRect(),r=i.ownerDocument,n=r.defaultView||window,s=Math.max(0,t.left),o=Math.min(n.innerWidth,t.right),l=Math.max(0,t.top),a=Math.min(n.innerHeight,t.bottom);for(let h=i.parentNode;h&&h!=r.body;)if(h.nodeType==1){let c=h,u=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&u.overflow!="visible"){let d=c.getBoundingClientRect();s=Math.max(s,d.left),o=Math.min(o,d.right),l=Math.max(l,d.top),a=Math.min(h==i.parentNode?n.innerHeight:a,d.bottom)}h=u.position=="absolute"||u.position=="fixed"?c.offsetParent:c.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,a)-(t.top+e)}}function $p(i){let e=i.getBoundingClientRect(),t=i.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function Gp(i,e){let t=i.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}var Ji=class{constructor(e,t,r,n){this.from=e,this.to=t,this.size=r,this.displaySize=n}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let n=e[r],s=t[r];if(n.from!=s.from||n.to!=s.to||n.size!=s.size)return!1}return!0}draw(e,t){return X.replace({widget:new aa(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}},aa=class extends kt{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}},Ms=class{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Tc,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=he.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Ea).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new ia(t),this.stateDeco=Dc(e),this.heightMap=ft.empty().applyChanges(this.stateDeco,se.empty,this.heightOracle.setDoc(e.doc),[new zt(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=X.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let n=r?t.head:t.anchor;if(!e.some(({from:s,to:o})=>n>=s&&n<=o)){let{from:s,to:o}=this.lineBlockAt(n);e.push(new fi(s,o))}}return this.viewports=e.sort((r,n)=>r.from-n.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Tc:new ha(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push($i(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=Dc(this.state);let n=e.changedRanges,s=zt.extendWithRanges(n,Wp(r,this.stateDeco,e?e.changes:Ye.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Ac(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||wi)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let h=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&(e.selectionSet||e.focusChanged)&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(hu)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),n=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?he.RTL:he.LTR;let o=this.heightOracle.mustRefreshForWrapping(s)||this.mustMeasureContent==="refresh",l=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let h=0,c=0;if(l.width&&l.height){let{scaleX:E,scaleY:T}=Kc(t,l);(E>.005&&Math.abs(this.scaleX-E)>.005||T>.005&&Math.abs(this.scaleY-T)>.005)&&(this.scaleX=E,this.scaleY=T,h|=16,o=a=!0)}let u=(parseInt(r.paddingTop)||0)*this.scaleY,d=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=u||this.paddingBottom!=d)&&(this.paddingTop=u,this.paddingBottom=d,h|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=Yc(e.scrollDOM);let v=(this.printing?Gp:Vp)(t,this.paddingTop),y=v.top-this.pixelViewport.top,w=v.bottom-this.pixelViewport.bottom;this.pixelViewport=v;let S=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(S!=this.inView&&(this.inView=S,S&&(a=!0)),!this.inView&&!this.scrollTarget&&!$p(e.dom))return 0;let A=l.width;if((this.contentDOMWidth!=A||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,h|=16),a){let E=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(E)&&(o=!0),o||n.lineWrapping&&Math.abs(A-this.contentDOMWidth)>n.charWidth){let{lineHeight:T,charWidth:B,textHeight:D}=e.docView.measureTextSize();o=T>0&&n.refresh(s,T,B,D,Math.max(5,A/B),E),o&&(e.docView.minWidth=0,h|=16)}y>0&&w>0?c=Math.max(y,w):y<0&&w<0&&(c=Math.min(y,w)),Ac();for(let T of this.viewports){let B=T.from==this.viewport.from?E:e.docView.measureVisibleLineHeights(T);this.heightMap=(o?ft.empty().applyChanges(this.stateDeco,se.empty,this.heightOracle,[new zt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(n,0,o,new na(T.from,B))}wi&&(h|=2)}let M=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return M&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),h|=this.updateForViewport()),(h&2||M)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new fi(n.lineAt(o-r*1e3,de.ByHeight,s,0,0).from,n.lineAt(l+(1-r)*1e3,de.ByHeight,s,0,0).to);if(t){let{head:h}=t.range;if(h<a.from||h>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=n.lineAt(h,de.ByPos,s,0,0),d;t.y=="center"?d=(u.top+u.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&h<a.from?d=u.top:d=u.bottom-c,a=new fi(n.lineAt(d-1e3/2,de.ByHeight,s,0,0).from,n.lineAt(d+c+1e3/2,de.ByHeight,s,0,0).to)}}return a}mapViewport(e,t){let r=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new fi(this.heightMap.lineAt(r,de.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(n,de.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,de.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,de.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||n<=o-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||s>=l+Math.max(10,Math.min(r,250)))&&n>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let n of e)t.touchesRange(n.from,n.to)||r.push(new Ji(t.mapPos(n.from),t.mapPos(n.to),n.size,n.displaySize));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,n=r?1e4:2e3,s=n>>1,o=n<<1;if(this.defaultTextDirection!=he.LTR&&!r)return[];let l=[],a=(c,u,d,p)=>{if(u-c<s)return;let v=this.state.selection.main,y=[v.from];v.empty||y.push(v.to);for(let S of y)if(S>c&&S<u){a(c,S-10,d,p),a(S+10,u,d,p);return}let w=Kp(e,S=>S.from>=d.from&&S.to<=d.to&&Math.abs(S.from-c)<s&&Math.abs(S.to-u)<s&&!y.some(A=>S.from<A&&S.to>A));if(!w){if(u<d.to&&t&&r&&t.visibleRanges.some(M=>M.from<=u&&M.to>=u)){let M=t.moveToLineBoundary(I.cursor(u),!1,!0).head;M>c&&(u=M)}let S=this.gapSize(d,c,u,p),A=r||S<2e6?S:2e6;w=new Ji(c,u,S,A)}l.push(w)},h=c=>{if(c.length<o||c.type!=Ve.Text)return;let u=Up(c.from,c.to,this.stateDeco);if(u.total<o)return;let d=this.scrollTarget?this.scrollTarget.range.head:null,p,v;if(r){let y=n/this.heightOracle.lineLength*this.heightOracle.lineHeight,w,S;if(d!=null){let A=ns(u,d),M=((this.visibleBottom-this.visibleTop)/2+y)/c.height;w=A-M,S=A+M}else w=(this.visibleTop-c.top-y)/c.height,S=(this.visibleBottom-c.top+y)/c.height;p=is(u,w),v=is(u,S)}else{let y=u.total*this.heightOracle.charWidth,w=n*this.heightOracle.charWidth,S=0;if(y>2e6)for(let B of e)B.from>=c.from&&B.from<c.to&&B.size!=B.displaySize&&B.from*this.heightOracle.charWidth+S<this.pixelViewport.left&&(S=B.size-B.displaySize);let A=this.pixelViewport.left+S,M=this.pixelViewport.right+S,E,T;if(d!=null){let B=ns(u,d),D=((M-A)/2+w)/y;E=B-D,T=B+D}else E=(A-w)/y,T=(M+w)/y;p=is(u,E),v=is(u,T)}p>c.from&&a(c.from,p,c,u),v<c.to&&a(v,c.to,c,u)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(h):h(c);return l}gapSize(e,t,r,n){let s=ns(n,r)-ns(n,t);return this.heightOracle.lineWrapping?e.height*s:n.total*this.heightOracle.charWidth*s}updateLineGaps(e){Ji.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=X.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let r=[];le.spans(t,this.viewport.from,this.viewport.to,{span(s,o){r.push({from:s,to:o})},point(){}},20);let n=0;if(r.length!=this.visibleRanges.length)n=12;else for(let s=0;s<r.length&&!(n&8);s++){let o=this.visibleRanges[s],l=r[s];(o.from!=l.from||o.to!=l.to)&&(n|=4,e&&e.mapPos(o.from,-1)==l.from&&e.mapPos(o.to,1)==l.to||(n|=8))}return this.visibleRanges=r,n}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||$i(this.heightMap.lineAt(e,de.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||$i(this.heightMap.lineAt(this.scaler.fromDOM(e),de.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return $i(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}},fi=class{constructor(e,t){this.from=e,this.to=t}};function Up(i,e,t){let r=[],n=i,s=0;return le.spans(t,i,e,{span(){},point(o,l){o>n&&(r.push({from:n,to:o}),s+=o-n),n=l}},20),n<e&&(r.push({from:n,to:e}),s+=e-n),{total:s,ranges:r}}function is({total:i,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(i*t);for(let n=0;;n++){let{from:s,to:o}=e[n],l=o-s;if(r<=l)return s+r;r-=l}}function ns(i,e){let t=0;for(let{from:r,to:n}of i.ranges){if(e<=n){t+=e-r;break}t+=n-r}return t/i.total}function Kp(i,e){for(let t of i)if(e(t))return t}var Tc={toDOM(i){return i},fromDOM(i){return i},scale:1,eq(i){return i==this}};function Dc(i){let e=i.facet(Rs).filter(r=>typeof r!="function"),t=i.facet(Oa).filter(r=>typeof r!="function");return t.length&&e.push(le.join(t)),e}var ha=class i{constructor(e,t,r){let n=0,s=0,o=0;this.viewports=r.map(({from:l,to:a})=>{let h=t.lineAt(l,de.ByPos,e,0,0).top,c=t.lineAt(a,de.ByPos,e,0,0).bottom;return n+=c-h,{from:l,to:a,top:h,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let t=0,r=0,n=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return n+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,n=s.domBottom}}fromDOM(e){for(let t=0,r=0,n=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return r+(e-n)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,n=s.domBottom}}eq(e){return e instanceof i?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to):!1}};function $i(i,e){if(e.scale==1)return i;let t=e.toDOM(i.top),r=e.toDOM(i.bottom);return new Ot(i.from,i.length,t,r-t,Array.isArray(i._content)?i._content.map(n=>$i(n,e)):i._content)}var ss=H.define({combine:i=>i.join(" ")}),ca=H.define({combine:i=>i.indexOf(!0)>-1}),ua=bt.newName(),Eu=bt.newName(),Ou=bt.newName(),zu={"&light":"."+Eu,"&dark":"."+Ou};function fa(i,e,t){return new bt(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,n=>{if(n=="&")return i;if(!t||!t[n])throw new RangeError(`Unsupported selector: ${n}`);return t[n]}):i+" "+r}})}var jp=fa("."+ua,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},zu),Yp={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Tl=W.ie&&W.ie_version<=11,da=class{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Pl,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(W.ie&&W.ie_version<=11||W.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&W.android&&e.constructor.EDIT_CONTEXT!==!1&&!(W.chrome&&W.chrome_version<126)&&(this.editContext=new ma(e),e.state.facet(or)&&(e.contentDOM.editContext=this.editContext.editContext)),Tl&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,n=this.selectionRange;if(r.state.facet(or)?r.root.activeElement!=this.dom:!Ui(this.dom,n))return;let s=n.anchorNode&&r.docView.tile.nearest(n.anchorNode);if(s&&s.isWidget()&&s.widget.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(W.ie&&W.ie_version<=11||W.android&&W.chrome)&&!r.state.selection.main.empty&&n.focusNode&&Ki(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=tn(e.root);if(!t)return!1;let r=W.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&Xp(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let n=Ui(this.dom,r);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&G1(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Yp),Tl&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Tl&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let n=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&gi(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(n)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,n=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(n=!0),t==-1?{from:t,to:r}=o:(t=Math.min(o.from,t),r=Math.max(o.to,r)))}return{from:t,to:r,typeOver:n}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),n=this.selectionChanged&&Ui(this.dom,this.selectionRange);if(e<0&&!n)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new Ql(this.view,e,t,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,n=xu(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!Ss(this.view.state.selection,t.newSel.main))&&this.view.update([]),n}readMutation(e){let t=this.view.docView.tile.nearest(e.target);if(!t||t.isWidget())return null;if(t.markDirty(e.type=="attributes"),e.type=="childList"){let r=Bc(t,e.previousSibling||e.target.previousSibling,-1),n=Bc(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(or)!=e.state.facet(or)&&(e.view.contentDOM.editContext=e.state.facet(or)?this.editContext.editContext:null))}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}};function Bc(i,e,t){for(;e;){let r=ke.get(e);if(r&&r.parent==i)return r;let n=e.parentNode;e=n!=i.dom?n:t>0?e.nextSibling:e.previousSibling}return null}function Ec(i,e){let t=e.startContainer,r=e.startOffset,n=e.endContainer,s=e.endOffset,o=i.docView.domAtPos(i.state.selection.main.anchor,1);return Ki(o.node,o.offset,n,s)&&([t,r,n,s]=[n,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:n,focusOffset:s}}function Xp(i,e){if(e.getComposedRanges){let n=e.getComposedRanges(i.root)[0];if(n)return Ec(i,n)}let t=null;function r(n){n.preventDefault(),n.stopImmediatePropagation(),t=n.getTargetRanges()[0]}return i.contentDOM.addEventListener("beforeinput",r,!0),i.dom.ownerDocument.execCommand("indent"),i.contentDOM.removeEventListener("beforeinput",r,!0),t?Ec(i,t):null}var ma=class{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let n=e.state.selection.main,{anchor:s,head:o}=n,l=this.toEditorPos(r.updateRangeStart),a=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:l,drifted:!1});let h=a-l>r.text.length;l==this.from&&s<this.from?l=s:a==this.to&&s>this.to&&(a=s);let c=wu(e.state.sliceDoc(l,a),r.text,(h?n.from:n.to)-l,h?"end":null);if(!c){let d=I.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));Ss(d,n)||e.dispatch({selection:d,userEvent:"select"});return}let u={from:c.from+l,to:c.toA+l,insert:se.of(r.text.slice(c.from,c.toB).split(`
`))};if((W.mac||W.android)&&u.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:l,to:a,insert:se.of([r.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let d=this.to-this.from+(u.to-u.from+u.insert.length);La(e,u,I.single(this.toEditorPos(r.selectionStart,d),this.toEditorPos(r.selectionEnd,d)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),u.from<u.to&&!u.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(t.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let n=[],s=null;for(let o=this.toEditorPos(r.rangeStart),l=this.toEditorPos(r.rangeEnd);o<l;o++){let a=e.coordsForChar(o);s=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||s||new DOMRect,n.push(s)}t.updateCharacterBounds(r.rangeStart,n)},this.handlers.textformatupdate=r=>{let n=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,l=s.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(l)){let a=this.toEditorPos(s.rangeStart),h=this.toEditorPos(s.rangeEnd);if(a<h){let c=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(l)?1:2}px`;n.push(X.mark({attributes:{style:c}}).range(a,h))}}}e.dispatch({effects:uu.of(X.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)t.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let n=tn(r.root);n&&n.rangeCount&&this.editContext.updateSelectionBounds(n.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,n=this.pendingContextChange;return e.changes.iterChanges((s,o,l,a,h)=>{if(r)return;let c=h.length-(o-s);if(n&&o>=n.to)if(n.from==s&&n.to==o&&n.insert.eq(h)){n=this.pendingContextChange=null,t+=c,this.to+=c;return}else n=null,this.revertPending(e.state);if(s+=t,o+=t,o<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+h.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),h.toString()),this.to+=c}t+=c}),n&&!r&&this.revertPending(e.state),!r}update(e){let t=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(n=>!n.isUserEvent("input.type")&&n.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),n=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=n)&&this.editContext.updateSelection(r,n)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}},K=class i{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(n=>n.forEach(s=>r(s,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||$1(e.parent)||document,this.viewState=new Ms(e.state||fe.create(e)),e.scrollTo&&e.scrollTo.is(es)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(ui).map(n=>new Yi(n));for(let n of this.plugins)n.update(this);this.observer=new da(this),this.inputState=new ea(this),this.inputState.ensureHandlers(this.plugins),this.docView=new ws(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>{this.viewState.mustMeasureContent="refresh",this.requestMeasure()})}dispatch(...e){let t=e.length==1&&e[0]instanceof Le?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,n,s=this.state;for(let d of e){if(d.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=d.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,l=0,a=null;e.some(d=>d.annotation(Tu))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=Du(s,o),a||(l=1));let h=this.observer.delayedAndroidKey,c=null;if(h?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(fe.phrases)!=this.state.facet(fe.phrases))return this.setState(s);n=ys.create(this,s,e),n.flags|=l;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let d of e){if(u&&(u=u.map(d.changes)),d.scrollIntoView){let{main:p}=d.state.selection;u=new ji(p.empty?p:I.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of d.effects)p.is(es)&&(u=p.value.clip(this.state))}this.viewState.update(n,u),this.bidiCache=Ts.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),t=this.docView.update(n),this.state.facet(Wi)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(d=>d.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(ss)!=n.state.facet(ss)&&(this.viewState.mustMeasureContent=!0),(t||r||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!n.empty)for(let d of this.state.facet(ql))try{d(n)}catch(p){Fe(this.state,p,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!xu(this,c)&&h.force&&gi(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new Ms(e),this.plugins=e.facet(ui).map(r=>new Yi(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new ws(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(ui),r=e.state.facet(ui);if(t!=r){let n=[];for(let s of r){let o=t.indexOf(s);if(o<0)n.push(new Yi(s));else{let l=this.plugins[o];l.mustUpdate=e,n.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=n,this.pluginMap.clear()}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(r){Fe(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,n=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(n-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(Yc(r))s=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(n);s=p.from,o=p.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];a&4||([this.measureRequests,h]=[h,this.measureRequests]);let c=h.map(p=>{try{return p.read(this)}catch(v){return Fe(this.state,v),Oc}}),u=ys.create(this,this.state,[]),d=!1;u.flags|=a,t?t.flags|=a:t=u,this.updateState=2,u.empty||(this.updatePlugins(u),this.inputState.update(u),this.updateAttrs(),d=this.docView.update(u),d&&this.docViewUpdate());for(let p=0;p<h.length;p++)if(c[p]!=Oc)try{let v=h[p];v.write&&v.write(c[p],this)}catch(v){Fe(this.state,v)}if(d&&this.docView.updateSelection(!0),!u.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let v=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(v>1||v<-1){n=n+v,r.scrollTop=n/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(ql))l(t)}get themeClasses(){return ua+" "+(this.state.facet(ca)?Ou:Eu)+" "+this.state.facet(ss)}updateAttrs(){let e=zc(this,fu,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(or)?"true":"false",class:"cm-content",style:`${W.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),zc(this,Ea,t);let r=this.observer.ignore(()=>{let n=cc(this.contentDOM,this.contentAttrs,t),s=cc(this.dom,this.editorAttrs,e);return n||s});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let n of r.effects)if(n.is(i.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(Wi);let e=this.state.facet(i.cspNonce);bt.mount(this.root,this.styleModules.concat(jp).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return Ml(this,e,gc(this,e,t,r))}moveByGroup(e,t){return Ml(this,e,gc(this,e,t,r=>bp(this,e.head,r)))}visualLineSide(e,t){let r=this.bidiSpans(e),n=this.textDirectionAt(e.from),s=r[t?r.length-1:0];return I.cursor(s.side(t,n)+e.from,s.forward(!t,n)?1:-1)}moveToLineBoundary(e,t,r=!0){return vp(this,e,t,r)}moveVertically(e,t,r){return Ml(this,e,yp(this,e,t,r))}domAtPos(e,t=1){return this.docView.domAtPos(e,t)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){this.readMeasured();let r=_l(this,e,t);return r&&r.pos}posAndSideAtCoords(e,t=!0){return this.readMeasured(),_l(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let n=this.state.doc.lineAt(e),s=this.bidiSpans(n),o=s[wt.find(s,e-n.from,-1,t)];return bs(r,o.dir==he.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(au)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>_p)return eu(e.length);let t=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t&&(s.fresh||Qc(s.isolates,r=dc(this,e))))return s.order;r||(r=dc(this,e));let n=J1(e.text,t,r);return this.bidiCache.push(new Ts(e.from,e.to,t,r,!0,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||W.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{jc(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return es.of(new ji(typeof e=="number"?I.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return es.of(new ji(I.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Se.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Se.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=bt.newName(),n=[ss.of(r),Wi.of(fa(`.${r}`,e))];return t&&t.dark&&n.push(ca.of(!0)),n}static baseTheme(e){return Wt.lowest(Wi.of(fa("."+ua,e,zu)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),n=r&&ke.get(r)||ke.get(e);return((t=n?.root)===null||t===void 0?void 0:t.view)||null}};K.styleModule=Wi;K.inputHandler=ou;K.clipboardInputFilter=Da;K.clipboardOutputFilter=Ba;K.scrollHandler=cu;K.focusChangeEffect=lu;K.perLineTextDirection=au;K.exceptionSink=su;K.updateListener=ql;K.editable=or;K.mouseSelectionStyle=nu;K.dragMovesSelection=iu;K.clickAddsSelectionRange=ru;K.decorations=Rs;K.blockWrappers=du;K.outerDecorations=Oa;K.atomicRanges=ln;K.bidiIsolatedRanges=mu;K.scrollMargins=pu;K.darkTheme=ca;K.cspNonce=H.define({combine:i=>i.length?i[0]:""});K.contentAttributes=Ea;K.editorAttributes=fu;K.lineWrapping=K.contentAttributes.of({class:"cm-lineWrapping"});K.announce=te.define();var _p=4096,Oc={},Ts=class i{constructor(e,t,r,n,s,o){this.from=e,this.to=t,this.dir=r,this.isolates=n,this.fresh=s,this.order=o}static update(e,t){if(t.empty&&!e.some(s=>s.fresh))return e;let r=[],n=e.length?e[e.length-1].dir:he.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==n&&!t.touchesRange(o.from,o.to)&&r.push(new i(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}};function zc(i,e,t){for(let r=i.state.facet(e),n=r.length-1;n>=0;n--){let s=r[n],o=typeof s=="function"?s(i):s;o&&Aa(o,t)}return t}var Jp=W.mac?"mac":W.windows?"win":W.linux?"linux":"key";function Zp(i,e){let t=i.split(/-(?!$)/),r=t[t.length-1];r=="Space"&&(r=" ");let n,s,o,l;for(let a=0;a<t.length-1;++a){let h=t[a];if(/^(cmd|meta|m)$/i.test(h))l=!0;else if(/^a(lt)?$/i.test(h))n=!0;else if(/^(c|ctrl|control)$/i.test(h))s=!0;else if(/^s(hift)?$/i.test(h))o=!0;else if(/^mod$/i.test(h))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+h)}return n&&(r="Alt-"+r),s&&(r="Ctrl-"+r),l&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function os(i,e,t){return e.altKey&&(i="Alt-"+i),e.ctrlKey&&(i="Ctrl-"+i),e.metaKey&&(i="Meta-"+i),t!==!1&&e.shiftKey&&(i="Shift-"+i),i}var Qp=Wt.default(K.domEventHandlers({keydown(i,e){return ig(eg(e.state),i,e,"editor")}})),an=H.define({enables:Qp}),Lc=new WeakMap;function eg(i){let e=i.facet(an),t=Lc.get(e);return t||Lc.set(e,t=rg(e.reduce((r,n)=>r.concat(n),[]))),t}var br=null,tg=4e3;function rg(i,e=Jp){let t=Object.create(null),r=Object.create(null),n=(o,l)=>{let a=r[o];if(a==null)r[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,l,a,h,c)=>{var u,d;let p=t[o]||(t[o]=Object.create(null)),v=l.split(/ (?!$)/).map(S=>Zp(S,e));for(let S=1;S<v.length;S++){let A=v.slice(0,S).join(" ");n(A,!0),p[A]||(p[A]={preventDefault:!0,stopPropagation:!1,run:[M=>{let E=br={view:M,prefix:A,scope:o};return setTimeout(()=>{br==E&&(br=null)},tg),!0}]})}let y=v.join(" ");n(y,!1);let w=p[y]||(p[y]={preventDefault:!1,stopPropagation:!1,run:((d=(u=p._any)===null||u===void 0?void 0:u.run)===null||d===void 0?void 0:d.slice())||[]});a&&w.run.push(a),h&&(w.preventDefault=!0),c&&(w.stopPropagation=!0)};for(let o of i){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let h of l){let c=t[h]||(t[h]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:u}=o;for(let d in c)c[d].run.push(p=>u(p,pa))}let a=o[e]||o.key;if(a)for(let h of l)s(h,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(h,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return t}var pa=null;function ig(i,e,t,r){pa=e;let n=sc(e),s=Xe(n,0),o=vt(s)==n.length&&n!=" ",l="",a=!1,h=!1,c=!1;br&&br.view==t&&br.scope==r&&(l=br.prefix+" ",Su.indexOf(e.keyCode)<0&&(h=!0,br=null));let u=new Set,d=w=>{if(w){for(let S of w.run)if(!u.has(S)&&(u.add(S),S(t)))return w.stopPropagation&&(c=!0),!0;w.preventDefault&&(w.stopPropagation&&(c=!0),h=!0)}return!1},p=i[r],v,y;return p&&(d(p[l+os(n,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(W.windows&&e.ctrlKey&&e.altKey)&&!(W.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(v=sr[e.keyCode])&&v!=n?(d(p[l+os(v,e,!0)])||e.shiftKey&&(y=ci[e.keyCode])!=n&&y!=v&&d(p[l+os(y,e,!1)]))&&(a=!0):o&&e.shiftKey&&d(p[l+os(n,e,!0)])&&(a=!0),!a&&d(p._any)&&(a=!0)),h&&(a=!0),a&&c&&e.stopPropagation(),pa=null,a}var nn=class i{constructor(e,t,r,n,s){this.className=e,this.left=t,this.top=r,this.width=n,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let n=e.coordsAtPos(r.head,r.assoc||1);if(!n)return[];let s=Lu(e);return[new i(t,n.left-s.left,n.top-s.top,null,n.bottom-n.top)]}else return ng(e,t,r)}};function Lu(i){let e=i.scrollDOM.getBoundingClientRect();return{left:(i.textDirection==he.LTR?e.left:e.right-i.scrollDOM.clientWidth*i.scaleX)-i.scrollDOM.scrollLeft*i.scaleX,top:e.top-i.scrollDOM.scrollTop*i.scaleY}}function Rc(i,e,t,r){let n=i.coordsAtPos(e,t*2);if(!n)return r;let s=i.dom.getBoundingClientRect(),o=(n.top+n.bottom)/2,l=i.posAtCoords({x:s.left+1,y:o}),a=i.posAtCoords({x:s.right-1,y:o});return l==null||a==null?r:{from:Math.max(r.from,Math.min(l,a)),to:Math.min(r.to,Math.max(l,a))}}function ng(i,e,t){if(t.to<=i.viewport.from||t.from>=i.viewport.to)return[];let r=Math.max(t.from,i.viewport.from),n=Math.min(t.to,i.viewport.to),s=i.textDirection==he.LTR,o=i.contentDOM,l=o.getBoundingClientRect(),a=Lu(i),h=o.querySelector(".cm-line"),c=h&&window.getComputedStyle(h),u=l.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),d=l.right-(c?parseInt(c.paddingRight):0),p=Xl(i,r,1),v=Xl(i,n,-1),y=p.type==Ve.Text?p:null,w=v.type==Ve.Text?v:null;if(y&&(i.lineWrapping||p.widgetLineBreaks)&&(y=Rc(i,r,1,y)),w&&(i.lineWrapping||v.widgetLineBreaks)&&(w=Rc(i,n,-1,w)),y&&w&&y.from==w.from&&y.to==w.to)return A(M(t.from,t.to,y));{let T=y?M(t.from,null,y):E(p,!1),B=w?M(null,t.to,w):E(v,!0),D=[];return(y||p).to<(w||v).from-(y&&w?1:0)||p.widgetLineBreaks>1&&T.bottom+i.defaultLineHeight/2<B.top?D.push(S(u,T.bottom,d,B.top)):T.bottom<B.top&&i.elementAtHeight((T.bottom+B.top)/2).type==Ve.Text&&(T.bottom=B.top=(T.bottom+B.top)/2),A(T).concat(D).concat(A(B))}function S(T,B,D,V){return new nn(e,T-a.left,B-a.top,Math.max(0,D-T),V-B)}function A({top:T,bottom:B,horizontal:D}){let V=[];for(let U=0;U<D.length;U+=2)V.push(S(D[U],T,D[U+1],B));return V}function M(T,B,D){let V=1e9,U=-1e9,ie=[];function j(J,re,ge,Be,qe){let Me=i.coordsAtPos(J,J==D.to?-2:2),Te=i.coordsAtPos(ge,ge==D.from?2:-2);!Me||!Te||(V=Math.min(Me.top,Te.top,V),U=Math.max(Me.bottom,Te.bottom,U),qe==he.LTR?ie.push(s&&re?u:Me.left,s&&Be?d:Te.right):ie.push(!s&&Be?u:Te.left,!s&&re?d:Me.right))}let $=T??D.from,ne=B??D.to;for(let J of i.visibleRanges)if(J.to>$&&J.from<ne)for(let re=Math.max(J.from,$),ge=Math.min(J.to,ne);;){let Be=i.state.doc.lineAt(re);for(let qe of i.bidiSpans(Be)){let Me=qe.from+Be.from,Te=qe.to+Be.from;if(Me>=ge)break;Te>re&&j(Math.max(Me,re),T==null&&Me<=$,Math.min(Te,ge),B==null&&Te>=ne,qe.dir)}if(re=Be.to+1,re>=ge)break}return ie.length==0&&j($,T==null,ne,B==null,i.textDirection),{top:V,bottom:U,horizontal:ie}}function E(T,B){let D=l.top+(B?T.top:T.bottom);return{top:D,bottom:D,horizontal:[]}}}function sg(i,e){return i.constructor==e.constructor&&i.eq(e)}var ga=class{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(us)!=e.state.facet(us)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(us);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!sg(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let n of e)n.update&&t&&n.constructor&&this.drawn[r].constructor&&n.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(n.draw(),t);for(;t;){let n=t.nextSibling;t.remove(),t=n}this.drawn=e,W.safari&&W.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}},us=H.define();function Ru(i){return[Se.define(e=>new ga(e,i)),us.of(i)]}var sn=H.define({combine(i){return it(i,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function Iu(i={}){return[sn.of(i),og,lg,ag,hu.of(!0)]}function Pu(i){return i.startState.facet(sn)!=i.state.facet(sn)}var og=Ru({above:!0,markers(i){let{state:e}=i,t=e.facet(sn),r=[];for(let n of e.selection.ranges){let s=n==e.selection.main;if(n.empty||t.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=n.empty?n:I.cursor(n.head,n.head>n.anchor?-1:1);for(let a of nn.forRange(i,o,l))r.push(a)}}return r},update(i,e){i.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Pu(i);return t&&Ic(i.state,e),i.docChanged||i.selectionSet||t},mount(i,e){Ic(e.state,i)},class:"cm-cursorLayer"});function Ic(i,e){e.style.animationDuration=i.facet(sn).cursorBlinkRate+"ms"}var lg=Ru({above:!1,markers(i){return i.state.selection.ranges.map(e=>e.empty?[]:nn.forRange(i,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(i,e){return i.docChanged||i.selectionSet||i.viewportChanged||Pu(i)},class:"cm-selectionLayer"}),ag=Wt.highest(K.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),Nu=te.define({map(i,e){return i==null?null:e.mapPos(i)}}),Gi=Ie.define({create(){return null},update(i,e){return i!=null&&(i=e.changes.mapPos(i)),e.effects.reduce((t,r)=>r.is(Nu)?r.value:t,i)}}),hg=Se.fromClass(class{constructor(i){this.view=i,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(i){var e;let t=i.state.field(Gi);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(i.startState.field(Gi)!=t||i.docChanged||i.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:i}=this,e=i.state.field(Gi),t=e!=null&&i.coordsAtPos(e);if(!t)return null;let r=i.scrollDOM.getBoundingClientRect();return{left:t.left-r.left+i.scrollDOM.scrollLeft*i.scaleX,top:t.top-r.top+i.scrollDOM.scrollTop*i.scaleY,height:t.bottom-t.top}}drawCursor(i){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;i?(this.cursor.style.left=i.left/e+"px",this.cursor.style.top=i.top/t+"px",this.cursor.style.height=i.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(i){this.view.state.field(Gi)!=i&&this.view.dispatch({effects:Nu.of(i)})}},{eventObservers:{dragover(i){this.setDropPos(this.view.posAtCoords({x:i.clientX,y:i.clientY}))},dragleave(i){(i.target==this.view.contentDOM||!this.view.contentDOM.contains(i.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Fu(){return[Gi,hg]}function Pc(i,e,t,r,n){e.lastIndex=0;for(let s=i.iterRange(t,r),o=t,l;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)n(o+l.index,l)}function cg(i,e){let t=i.visibleRanges;if(t.length==1&&t[0].from==i.viewport.from&&t[0].to==i.viewport.to)return t;let r=[];for(let{from:n,to:s}of t)n=Math.max(i.state.doc.lineAt(n).from,n-e),s=Math.min(i.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=n?r[r.length-1].to=s:r.push({from:n,to:s});return r}var va=class{constructor(e){let{regexp:t,decoration:r,decorate:n,boundary:s,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,n)this.addMatch=(l,a,h,c)=>n(c,h,h+l[0].length,l,a);else if(typeof r=="function")this.addMatch=(l,a,h,c)=>{let u=r(l,a,h);u&&c(h,h+l[0].length,u)};else if(r)this.addMatch=(l,a,h,c)=>c(h,h+l[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let t=new Et,r=t.add.bind(t);for(let{from:n,to:s}of cg(e,this.maxLength))Pc(e.state.doc,this.regexp,n,s,(o,l)=>this.addMatch(l,e,o,r));return t.finish()}updateDeco(e,t){let r=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((s,o,l,a)=>{a>=e.view.viewport.from&&l<=e.view.viewport.to&&(r=Math.min(l,r),n=Math.max(a,n))}),e.viewportMoved||n-r>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,t.map(e.changes),r,n):t}updateRange(e,t,r,n){for(let s of e.visibleRanges){let o=Math.max(s.from,r),l=Math.min(s.to,n);if(l>=o){let a=e.state.doc.lineAt(o),h=a.to<l?e.state.doc.lineAt(l):a,c=Math.max(s.from,a.from),u=Math.min(s.to,h.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){c=o;break}for(;l<h.to;l++)if(this.boundary.test(h.text[l-h.from])){u=l;break}}let d=[],p,v=(y,w,S)=>d.push(S.range(y,w));if(a==h)for(this.regexp.lastIndex=c-a.from;(p=this.regexp.exec(a.text))&&p.index<u-a.from;)this.addMatch(p,e,p.index+a.from,v);else Pc(e.state.doc,this.regexp,c,u,(y,w)=>this.addMatch(w,e,y,v));t=t.update({filterFrom:c,filterTo:u,filter:(y,w)=>y<c||w>u,add:d})}}return t}},ba=/x/.unicode!=null?"gu":"g",ug=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,ba),fg={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},Dl=null;function dg(){var i;if(Dl==null&&typeof document<"u"&&document.body){let e=document.body.style;Dl=((i=e.tabSize)!==null&&i!==void 0?i:e.MozTabSize)!=null}return Dl||!1}var fs=H.define({combine(i){let e=it(i,{render:null,specialChars:ug,addSpecialChars:null});return(e.replaceTabs=!dg())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,ba)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,ba)),e}});function Hu(i={}){return[fs.of(i),mg()]}var Nc=null;function mg(){return Nc||(Nc=Se.fromClass(class{constructor(i){this.view=i,this.decorations=X.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(i.state.facet(fs)),this.decorations=this.decorator.createDeco(i)}makeDecorator(i){return new va({regexp:i.specialChars,decoration:(e,t,r)=>{let{doc:n}=t.state,s=Xe(e[0],0);if(s==9){let o=n.lineAt(r),l=t.state.tabSize,a=vr(o.text,l,r-o.from);return X.replace({widget:new xa((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=X.replace({widget:new ya(i,s)}))},boundary:i.replaceTabs?void 0:/[^]/})}update(i){let e=i.state.facet(fs);i.startState.facet(fs)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(i.view)):this.decorations=this.decorator.updateDeco(i,this.decorations)}},{decorations:i=>i.decorations}))}var pg="\u2022";function gg(i){return i>=32?pg:i==10?"\u2424":String.fromCharCode(9216+i)}var ya=class extends kt{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=gg(this.code),r=e.state.phrase("Control character")+" "+(fg[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,r,t);if(n)return n;let s=document.createElement("span");return s.textContent=t,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}},xa=class extends kt{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}};function qu(){return bg}var vg=X.line({class:"cm-activeLine"}),bg=Se.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.docChanged||i.selectionSet)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let e=-1,t=[];for(let r of i.state.selection.ranges){let n=i.lineBlockAt(r.head);n.from>e&&(t.push(vg.range(n.from)),e=n.from)}return X.set(t)}},{decorations:i=>i.decorations});var ls="-10000px",Ds=class{constructor(e,t,r,n){this.facet=t,this.createTooltipView=r,this.removeTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=r(o,s))}update(e,t){var r;let n=e.state.facet(this.facet),s=n.filter(a=>a);if(n===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[],l=t?[]:null;for(let a=0;a<s.length;a++){let h=s[a],c=-1;if(h){for(let u=0;u<this.tooltips.length;u++){let d=this.tooltips[u];d&&d.create==h.create&&(c=u)}if(c<0)o[a]=this.createTooltipView(h,a?o[a-1]:null),l&&(l[a]=!!h.above);else{let u=o[a]=this.tooltipViews[c];l&&(l[a]=t[c]),u.update&&u.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),(r=a.destroy)===null||r===void 0||r.call(a));return t&&(l.forEach((a,h)=>t[h]=a),t.length=l.length),this.input=n,this.tooltips=s,this.tooltipViews=o,!0}};function yg(i){let e=i.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}var Bl=H.define({combine:i=>{var e,t,r;return{position:W.ios?"absolute":((e=i.find(n=>n.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=i.find(n=>n.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((r=i.find(n=>n.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||yg}}}),Fc=new WeakMap,Ra=Se.fromClass(class{constructor(i){this.view=i,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=i.state.facet(Bl);this.position=e.position,this.parent=e.parent,this.classes=i.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Ds(i,hn,(t,r)=>this.createTooltip(t,r),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),i.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let i of this.manager.tooltipViews)this.intersectionObserver.observe(i.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(i){i.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(i,this.above);e&&this.observeIntersection();let t=e||i.geometryChanged,r=i.state.facet(Bl);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;t=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(i,e){let t=i.create(this.view),r=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),i.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",t.dom.appendChild(n)}return t.dom.style.position=this.position,t.dom.style.top=ls,t.dom.style.left="0px",this.container.insertBefore(t.dom,r),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var i,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(i=r.destroy)===null||i===void 0||i.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let i=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(W.safari){let o=s.getBoundingClientRect();t=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}else t=!!s.offsetParent&&s.offsetParent!=this.container.ownerDocument.body}if(t||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(i=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:i,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),n=za(this.view);return{visible:{left:r.left+n.left,top:r.top+n.top,right:r.right-n.right,bottom:r.bottom-n.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let l=this.manager.tooltipViews[o];return l.getCoords?l.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(Bl).tooltipSpace(this.view),scaleX:i,scaleY:e,makeAbsolute:t}}writeMeasure(i){var e;if(i.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:t,space:r,scaleX:n,scaleY:s}=i,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],h=this.manager.tooltipViews[l],{dom:c}=h,u=i.pos[l],d=i.size[l];if(!u||a.clip!==!1&&(u.bottom<=Math.max(t.top,r.top)||u.top>=Math.min(t.bottom,r.bottom)||u.right<Math.max(t.left,r.left)-.1||u.left>Math.min(t.right,r.right)+.1)){c.style.top=ls;continue}let p=a.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,v=p?7:0,y=d.right-d.left,w=(e=Fc.get(h))!==null&&e!==void 0?e:d.bottom-d.top,S=h.offset||wg,A=this.view.textDirection==he.LTR,M=d.width>r.right-r.left?A?r.left:r.right-d.width:A?Math.max(r.left,Math.min(u.left-(p?14:0)+S.x,r.right-y)):Math.min(Math.max(r.left,u.left-y+(p?14:0)-S.x),r.right-y),E=this.above[l];!a.strictSide&&(E?u.top-w-v-S.y<r.top:u.bottom+w+v+S.y>r.bottom)&&E==r.bottom-u.bottom>u.top-r.top&&(E=this.above[l]=!E);let T=(E?u.top-r.top:r.bottom-u.bottom)-v;if(T<w&&h.resize!==!1){if(T<this.view.defaultLineHeight){c.style.top=ls;continue}Fc.set(h,w),c.style.height=(w=T)/s+"px"}else c.style.height&&(c.style.height="");let B=E?u.top-w-v-S.y:u.bottom+v+S.y,D=M+y;if(h.overlap!==!0)for(let V of o)V.left<D&&V.right>M&&V.top<B+w&&V.bottom>B&&(B=E?V.top-w-2-v:V.bottom+v+2);if(this.position=="absolute"?(c.style.top=(B-i.parent.top)/s+"px",Hc(c,(M-i.parent.left)/n)):(c.style.top=B/s+"px",Hc(c,M/n)),p){let V=u.left+(A?S.x:-S.x)-(M+14-7);p.style.left=V/n+"px"}h.overlap!==!0&&o.push({left:M,top:B,right:D,bottom:B+w}),c.classList.toggle("cm-tooltip-above",E),c.classList.toggle("cm-tooltip-below",!E),h.positioned&&h.positioned(i.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let i of this.manager.tooltipViews)i.dom.style.top=ls}},{eventObservers:{scroll(){this.maybeMeasure()}}});function Hc(i,e){let t=parseInt(i.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(i.style.left=e+"px")}var xg=K.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),wg={x:0,y:0},hn=H.define({enables:[Ra,xg]}),Bs=H.define({combine:i=>i.reduce((e,t)=>e.concat(t),[])}),Es=class i{static create(e){return new i(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Ds(e,Bs,(t,r)=>this.createHostedView(t,r),t=>t.dom.remove())}createHostedView(e,t){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let r of this.manager.tooltipViews){let n=r[e];if(n!==void 0){if(t===void 0)t=n;else if(t!==n)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}},kg=hn.compute([Bs],i=>{let e=i.facet(Bs);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var r;return(r=t.end)!==null&&r!==void 0?r:t.pos})),create:Es.create,above:e[0].above,arrow:e.some(t=>t.arrow)}}),wa=class{constructor(e,t,r,n,s){this.view=e,this.source=t,this.field=r,this.setHover=n,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,r=e.docView.tile.nearest(t.target);if(!r)return;let n,s=1;if(r.isWidget())n=r.posAtStart;else{if(n=e.posAtCoords(t),n==null)return;let l=e.coordsAtPos(n);if(!l||t.y<l.top||t.y>l.bottom||t.x<l.left-e.defaultCharacterWidth||t.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(n)).find(c=>c.from<=n&&c.to>=n),h=a&&a.dir==he.RTL?-1:1;s=t.x<l.left?-h:h}let o=this.source(e,n,s);if(o?.then){let l=this.pending={pos:n};o.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>Fe(e.state,a,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(Ra),t=e?e.manager.tooltips.findIndex(r=>r.create==Es.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:s}=this;if(n.length&&s&&!Sg(s.dom,e)||this.pending){let{pos:o}=n[0]||this.pending,l=(r=(t=n[0])===null||t===void 0?void 0:t.end)!==null&&r!==void 0?r:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!Cg(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=r=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),clearTimeout(this.restartTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}},as=4;function Sg(i,e){let{left:t,right:r,top:n,bottom:s}=i.getBoundingClientRect(),o;if(o=i.querySelector(".cm-tooltip-arrow")){let l=o.getBoundingClientRect();n=Math.min(l.top,n),s=Math.max(l.bottom,s)}return e.clientX>=t-as&&e.clientX<=r+as&&e.clientY>=n-as&&e.clientY<=s+as}function Cg(i,e,t,r,n,s){let o=i.scrollDOM.getBoundingClientRect(),l=i.documentTop+i.documentPadding.top+i.contentHeight;if(o.left>r||o.right<r||o.top>n||Math.min(o.bottom,l)<n)return!1;let a=i.posAtCoords({x:r,y:n},!1);return a>=e&&a<=t}function Ps(i,e={}){let t=te.define(),r=Ie.define({create(){return[]},update(n,s){if(n.length&&(e.hideOnChange&&(s.docChanged||s.selection)?n=[]:e.hideOn&&(n=n.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let l of n){let a=s.changes.mapPos(l.pos,-1,We.TrackDel);if(a!=null){let h=Object.assign(Object.create(null),l);h.pos=a,h.end!=null&&(h.end=s.changes.mapPos(h.end)),o.push(h)}}n=o}for(let o of s.effects)o.is(t)&&(n=o.value),o.is(Ag)&&(n=[]);return n},provide:n=>Bs.from(n)});return{active:r,extension:[r,Se.define(n=>new wa(n,i,r,t,e.hoverTime||300)),kg]}}function Ia(i,e){let t=i.plugin(Ra);if(!t)return null;let r=t.manager.tooltips.indexOf(e);return r<0?null:t.manager.tooltipViews[r]}var Ag=te.define();var qc=H.define({combine(i){let e,t;for(let r of i)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}});var Mg=Se.fromClass(class{constructor(i){this.input=i.state.facet(on),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(i));let e=i.state.facet(qc);this.top=new di(i,!0,e.topContainer),this.bottom=new di(i,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(i){let e=i.state.facet(qc);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new di(i.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new di(i.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=i.state.facet(on);if(t!=this.input){let r=t.filter(a=>a),n=[],s=[],o=[],l=[];for(let a of r){let h=this.specs.indexOf(a),c;h<0?(c=a(i.view),l.push(c)):(c=this.panels[h],c.update&&c.update(i)),n.push(c),(c.top?s:o).push(c)}this.specs=r,this.panels=n,this.top.sync(s),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let r of this.panels)r.update&&r.update(i)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:i=>K.scrollMargins.of(e=>{let t=e.plugin(i);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})}),di=class{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Wc(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Wc(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}};function Wc(i){let e=i.nextSibling;return i.remove(),e}var on=H.define({enables:Mg});var Ct=class extends gt{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}};Ct.prototype.elementClass="";Ct.prototype.toDOM=void 0;Ct.prototype.mapMode=We.TrackBefore;Ct.prototype.startSide=Ct.prototype.endSide=-1;Ct.prototype.point=!0;var ds=H.define(),Tg=H.define();var ms=H.define();var ka=H.define({combine:i=>i.some(e=>e)});function Dg(i){let e=[Bg];return i&&i.fixed===!1&&e.push(ka.of(!0)),e}var Bg=Se.fromClass(class{constructor(i){this.view=i,this.domAfter=null,this.prevViewport=i.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=i.state.facet(ms).map(e=>new Os(i,e)),this.fixed=!i.state.facet(ka);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),i.scrollDOM.insertBefore(this.dom,i.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(i){if(this.updateGutters(i)){let e=this.prevViewport,t=i.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}if(i.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(ka)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=i.view.viewport}syncGutters(i){let e=this.dom.nextSibling;i&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=le.iter(this.view.state.facet(ds),this.view.viewport.from),r=[],n=this.gutters.map(s=>new Ca(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let l of s.type)if(l.type==Ve.Text&&o){Sa(t,r,l.from);for(let a of n)a.line(this.view,l,r);o=!1}else if(l.widget)for(let a of n)a.widget(this.view,l)}else if(s.type==Ve.Text){Sa(t,r,s.from);for(let o of n)o.line(this.view,s,r)}else if(s.widget)for(let o of n)o.widget(this.view,s);for(let s of n)s.finish();i&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(i){let e=i.startState.facet(ms),t=i.state.facet(ms),r=i.docChanged||i.heightChanged||i.viewportChanged||!le.eq(i.startState.facet(ds),i.state.facet(ds),i.view.viewport.from,i.view.viewport.to);if(e==t)for(let n of this.gutters)n.update(i)&&(r=!0);else{r=!0;let n=[];for(let s of t){let o=e.indexOf(s);o<0?n.push(new Os(this.view,s)):(this.gutters[o].update(i),n.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),n.indexOf(s)<0&&s.destroy();for(let s of n)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=n}return r}destroy(){for(let i of this.gutters)i.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:i=>K.scrollMargins.of(e=>{let t=e.plugin(i);if(!t||t.gutters.length==0||!t.fixed)return null;let r=t.dom.offsetWidth*e.scaleX,n=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==he.LTR?{left:r,right:n}:{right:r,left:n}})});function Vc(i){return Array.isArray(i)?i:[i]}function Sa(i,e,t){for(;i.value&&i.from<=t;)i.from==t&&e.push(i.value),i.next()}var Ca=class{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=le.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:n}=this,s=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==n.elements.length){let l=new zs(e,o,s,r);n.elements.push(l),n.dom.appendChild(l.dom)}else n.elements[this.i].update(e,o,s,r);this.height=t.bottom,this.i++}line(e,t,r){let n=[];Sa(this.cursor,n,t.from),r.length&&(n=n.concat(r));let s=this.gutter.config.lineMarker(e,t,n);s&&n.unshift(s);let o=this.gutter;n.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,n)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t),n=r?[r]:null;for(let s of e.state.facet(Tg)){let o=s(e,t.widget,t);o&&(n||(n=[])).push(o)}n&&this.addElement(e,t,n)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}},Os=class{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,n=>{let s=n.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=n.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[r](e,l,n)&&n.preventDefault()});this.markers=Vc(t.markers(e)),t.initialSpacer&&(this.spacer=new zs(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Vc(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let r=e.view.viewport;return!le.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}},zs=class{constructor(e,t,r,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,n)}update(e,t,r,n){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),Eg(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,t){let r="cm-gutterElement",n=this.dom.firstChild;for(let s=0,o=0;;){let l=o,a=s<t.length?t[s++]:null,h=!1;if(a){let c=a.elementClass;c&&(r+=" "+c);for(let u=o;u<this.markers.length;u++)if(this.markers[u].compare(a)){l=u,h=!0;break}}else l=this.markers.length;for(;o<l;){let c=this.markers[o++];if(c.toDOM){c.destroy(n);let u=n.nextSibling;n.remove(),n=u}}if(!a)break;a.toDOM&&(h?n=n.nextSibling:this.dom.insertBefore(a.toDOM(e),n)),h&&o++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}};function Eg(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(!i[t].compare(e[t]))return!1;return!0}var Og=H.define(),zg=H.define(),mi=H.define({combine(i){return it(i,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let n in t){let s=r[n],o=t[n];r[n]=s?(l,a,h)=>s(l,a,h)||o(l,a,h):o}return r}})}}),Zi=class extends Ct{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}};function El(i,e){return i.state.facet(mi).formatNumber(e,i.state)}var Lg=ms.compute([mi],i=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Og)},lineMarker(e,t,r){return r.some(n=>n.toDOM)?null:new Zi(El(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,r)=>{for(let n of e.state.facet(zg)){let s=n(e,t,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(mi)!=e.state.facet(mi),initialSpacer(e){return new Zi(El(e,$c(e.state.doc.lines)))},updateSpacer(e,t){let r=El(t.view,$c(t.view.state.doc.lines));return r==e.number?e:new Zi(r)},domEventHandlers:i.facet(mi).domEventHandlers,side:"before"}));function Wu(i={}){return[mi.of(i),Dg(),Lg]}function $c(i){let e=9;for(;e<i;)e=e*10+9;return e}var Rg=new class extends Ct{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Ig=ds.compute(["selection"],i=>{let e=[],t=-1;for(let r of i.selection.ranges){let n=i.doc.lineAt(r.head).from;n>t&&(t=n,e.push(Rg.range(n)))}return le.of(e)});function Vu(){return Ig}var Pg=0,cn=class{constructor(e,t){this.from=e,this.to=t}},ee=class{constructor(e={}){this.id=Pg++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Je.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}};ee.closedBy=new ee({deserialize:i=>i.split(" ")});ee.openedBy=new ee({deserialize:i=>i.split(" ")});ee.group=new ee({deserialize:i=>i.split(" ")});ee.isolate=new ee({deserialize:i=>{if(i&&i!="rtl"&&i!="ltr"&&i!="auto")throw new RangeError("Invalid value for isolate: "+i);return i||"auto"}});ee.contextHash=new ee({perNode:!0});ee.lookAhead=new ee({perNode:!0});ee.mounted=new ee({perNode:!0});var $r=class{constructor(e,t,r,n=!1){this.tree=e,this.overlay=t,this.parser=r,this.bracketed=n}static get(e){return e&&e.props&&e.props[ee.mounted.id]}},Ng=Object.create(null),Je=class i{constructor(e,t,r,n=0){this.name=e,this.props=t,this.id=r,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):Ng,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new i(e.name||"",t,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(ee.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let n of r.split(" "))t[n]=e[r];return r=>{for(let n=r.prop(ee.group),s=-1;s<(n?n.length:0);s++){let o=t[s<0?r.name:n[s]];if(o)return o}}}};Je.none=new Je("",Object.create(null),0,8);var Hs=class i{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let n=null;for(let s of e){let o=s(r);if(o){n||(n=Object.assign({},r.props));let l=o[1],a=o[0];a.combine&&a.id in n&&(l=a.combine(n[a.id],l)),n[a.id]=l}}t.push(n?new Je(r.name,n,r.id,r.flags):r)}return new i(t)}},Ns=new WeakMap,$u=new WeakMap,Ce;(function(i){i[i.ExcludeBuffers=1]="ExcludeBuffers",i[i.IncludeAnonymous=2]="IncludeAnonymous",i[i.IgnoreMounts=4]="IgnoreMounts",i[i.IgnoreOverlays=8]="IgnoreOverlays",i[i.EnterBracketed=16]="EnterBracketed"})(Ce||(Ce={}));var ve=class i{constructor(e,t,r,n,s){if(this.type=e,this.children=t,this.positions=r,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=$r.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let n=r.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new dn(this.topNode,e)}cursorAt(e,t=0,r=0){let n=Ns.get(this)||this.topNode,s=new dn(n);return s.moveTo(e,t),Ns.set(this,s._tree),s}get topNode(){return new Gt(this,0,0,null)}resolve(e,t=0){let r=un(Ns.get(this)||this.topNode,e,t,!1);return Ns.set(this,r),r}resolveInner(e,t=0){let r=un($u.get(this)||this.topNode,e,t,!0);return $u.set(this,r),r}resolveStack(e,t=0){return Fg(this,e,t)}iterate(e){let{enter:t,leave:r,from:n=0,to:s=this.length}=e,o=e.mode||0,l=(o&Ce.IncludeAnonymous)>0;for(let a=this.cursor(o|Ce.IncludeAnonymous);;){let h=!1;if(a.from<=s&&a.to>=n&&(!l&&a.type.isAnonymous||t(a)!==!1)){if(a.firstChild())continue;h=!0}for(;h&&r&&(l||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Va(Je.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,n)=>new i(this.type,t,r,n,this.propValues),e.makeTree||((t,r,n)=>new i(Je.none,t,r,n)))}static build(e){return Hg(e)}};ve.empty=new ve(Je.none,[],[],0);var Pa=class i{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new i(this.buffer,this.index)}},kr=class i{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return Je.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],n=this.set.types[t],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,r,n,s){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(Ku(s,n,o[a+1],o[a+2])&&(l=a,r>0));a=o[a+3]);return l}slice(e,t,r){let n=this.buffer,s=new Uint16Array(t-e),o=0;for(let l=e,a=0;l<t;){s[a++]=n[l++],s[a++]=n[l++]-r;let h=s[a++]=n[l++]-r;s[a++]=n[l++]-e,o=Math.max(o,h)}return new i(s,o,this.set)}};function Ku(i,e,t,r){switch(i){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function un(i,e,t,r){for(var n;i.from==i.to||(t<1?i.from>=e:i.from>e)||(t>-1?i.to<=e:i.to<e);){let o=!r&&i instanceof Gt&&i.index<0?null:i.parent;if(!o)return i;i=o}let s=r?0:Ce.IgnoreOverlays;if(r)for(let o=i,l=o.parent;l;o=l,l=o.parent)o instanceof Gt&&o.index<0&&((n=l.enter(e,t,s))===null||n===void 0?void 0:n.from)!=o.from&&(i=l);for(;;){let o=i.enter(e,t,s);if(!o)return i;i=o}}var qs=class{cursor(e=0){return new dn(this,e)}getChild(e,t=null,r=null){let n=Gu(this,e,t,r);return n.length?n[0]:null}getChildren(e,t=null,r=null){return Gu(this,e,t,r)}resolve(e,t=0){return un(this,e,t,!1)}resolveInner(e,t=0){return un(this,e,t,!0)}matchContext(e){return Na(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let n=t.lastChild;if(!n||n.to!=t.to)break;n.type.isError&&n.from==n.to?(r=t,t=n.prevSibling):t=n}return r}get node(){return this}get next(){return this.parent}},Gt=class i extends qs{constructor(e,t,r,n){super(),this._tree=e,this.from=t,this.index=r,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,n,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,h=t>0?l.length:-1;e!=h;e+=t){let c=l[e],u=a[e]+o.from,d;if(!(!(s&Ce.EnterBracketed&&c instanceof ve&&(d=$r.get(c))&&!d.overlay&&d.bracketed&&r>=u&&r<=u+c.length)&&!Ku(n,r,u,u+c.length))){if(c instanceof kr){if(s&Ce.ExcludeBuffers)continue;let p=c.findChild(0,c.buffer.length,t,r-u,n);if(p>-1)return new fn(new Fa(o,c,e,u),null,p)}else if(s&Ce.IncludeAnonymous||!c.type.isAnonymous||Wa(c)){let p;if(!(s&Ce.IgnoreMounts)&&(p=$r.get(c))&&!p.overlay)return new i(p.tree,u,e,o);let v=new i(c,u,e,o);return s&Ce.IncludeAnonymous||!v.type.isAnonymous?v:v.nextChild(t<0?c.children.length-1:0,t,r,n,s)}}}if(s&Ce.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,t,r=0){let n;if(!(r&Ce.IgnoreOverlays)&&(n=$r.get(this._tree))&&n.overlay){let s=e-this.from,o=r&Ce.EnterBracketed&&n.bracketed;for(let{from:l,to:a}of n.overlay)if((t>0||o?l<=s:l<s)&&(t<0||o?a>=s:a>s))return new i(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};function Gu(i,e,t,r){let n=i.cursor(),s=[];if(!n.firstChild())return s;if(t!=null){for(let o=!1;!o;)if(o=n.type.is(t),!n.nextSibling())return s}for(;;){if(r!=null&&n.type.is(r))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return r==null?s:[]}}function Na(i,e,t=e.length-1){for(let r=i;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}var Fa=class{constructor(e,t,r,n){this.parent=e,this.buffer=t,this.index=r,this.start=n}},fn=class i extends qs{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,r);return s<0?null:new i(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,t,r=0){if(r&Ce.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new i(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new i(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new i(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,n=this.index+4,s=r.buffer[this.index+3];if(s>n){let o=r.buffer[this.index+1];e.push(r.slice(n,s,o)),t.push(0)}return new ve(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}};function ju(i){if(!i.length)return null;let e=0,t=i[0];for(let s=1;s<i.length;s++){let o=i[s];(o.from>t.from||o.to<t.to)&&(t=o,e=s)}let r=t instanceof Gt&&t.index<0?null:t.parent,n=i.slice();return r?n[e]=r:n.splice(e,1),new Ha(n,t)}var Ha=class{constructor(e,t){this.heads=e,this.node=t}get next(){return ju(this.heads)}};function Fg(i,e,t){let r=i.resolveInner(e,t),n=null;for(let s=r instanceof Gt?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(n||(n=[r])).push(o.resolve(e,t)),s=o}else{let o=$r.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new Gt(o.tree,o.overlay[0].from+s.from,-1,s);(n||(n=[r])).push(un(l,e,t,!1))}}return n?ju(n):r}var dn=class{get name(){return this.type.name}constructor(e,t=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=t&~Ce.EnterBracketed,e instanceof Gt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=r+n.buffer[e+1],this.to=r+n.buffer[e+2],!0}yield(e){return e?e instanceof Gt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&Ce.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ce.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ce.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let n=r<0?0:this.stack[r]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(n)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:r}=n)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let s=t+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let l=r._tree.children[s];if(this.mode&Ce.IncludeAnonymous||l instanceof kr||!l.type.isAnonymous||Wa(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let n=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;t=o,r=s+1;break e}n=this.stack[--s]}for(let n=r;n<this.stack.length;n++)t=new fn(this.buffer,t,this.stack[n]);return this.bufferNode=new fn(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(n=!0)}for(;;){if(n&&t&&t(this),n=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,n=!0}}}matchContext(e){if(!this.buffer)return Na(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return Na(this._tree,e,n);let o=r[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}};function Wa(i){return i.children.some(e=>e instanceof kr||!e.type.isAnonymous||Wa(e))}function Hg(i){var e;let{buffer:t,nodeSet:r,maxBufferLength:n=1024,reused:s=[],minRepeatType:o=r.types.length}=i,l=Array.isArray(t)?new Pa(t,t.length):t,a=r.types,h=0,c=0;function u(T,B,D,V,U,ie){let{id:j,start:$,end:ne,size:J}=l,re=c,ge=h;if(J<0)if(l.next(),J==-1){let Ne=s[j];D.push(Ne),V.push($-T);return}else if(J==-3){h=j;return}else if(J==-4){c=j;return}else throw new RangeError(`Unrecognized record size: ${J}`);let Be=a[j],qe,Me,Te=$-T;if(ne-$<=n&&(Me=w(l.pos-B,U))){let Ne=new Uint16Array(Me.size-Me.skip),pe=l.pos-Me.size,je=Ne.length;for(;l.pos>pe;)je=S(Me.start,Ne,je);qe=new kr(Ne,ne-Me.start,r),Te=Me.start-T}else{let Ne=l.pos-J;l.next();let pe=[],je=[],Bt=j>=o?j:-1,ct=0,Lr=ne;for(;l.pos>Ne;)Bt>=0&&l.id==Bt&&l.size>=0?(l.end<=Lr-n&&(v(pe,je,$,ct,l.end,Lr,Bt,re,ge),ct=pe.length,Lr=l.end),l.next()):ie>2500?d($,Ne,pe,je):u($,Ne,pe,je,Bt,ie+1);if(Bt>=0&&ct>0&&ct<pe.length&&v(pe,je,$,ct,$,Lr,Bt,re,ge),pe.reverse(),je.reverse(),Bt>-1&&ct>0){let ir=p(Be,ge);qe=Va(Be,pe,je,0,pe.length,0,ne-$,ir,ir)}else qe=y(Be,pe,je,ne-$,re-ne,ge)}D.push(qe),V.push(Te)}function d(T,B,D,V){let U=[],ie=0,j=-1;for(;l.pos>B;){let{id:$,start:ne,end:J,size:re}=l;if(re>4)l.next();else{if(j>-1&&ne<j)break;j<0&&(j=J-n),U.push($,ne,J),ie++,l.next()}}if(ie){let $=new Uint16Array(ie*4),ne=U[U.length-2];for(let J=U.length-3,re=0;J>=0;J-=3)$[re++]=U[J],$[re++]=U[J+1]-ne,$[re++]=U[J+2]-ne,$[re++]=re;D.push(new kr($,U[2]-ne,r)),V.push(ne-T)}}function p(T,B){return(D,V,U)=>{let ie=0,j=D.length-1,$,ne;if(j>=0&&($=D[j])instanceof ve){if(!j&&$.type==T&&$.length==U)return $;(ne=$.prop(ee.lookAhead))&&(ie=V[j]+$.length+ne)}return y(T,D,V,U,ie,B)}}function v(T,B,D,V,U,ie,j,$,ne){let J=[],re=[];for(;T.length>V;)J.push(T.pop()),re.push(B.pop()+D-U);T.push(y(r.types[j],J,re,ie-U,$-ie,ne)),B.push(U-D)}function y(T,B,D,V,U,ie,j){if(ie){let $=[ee.contextHash,ie];j=j?[$].concat(j):[$]}if(U>25){let $=[ee.lookAhead,U];j=j?[$].concat(j):[$]}return new ve(T,B,D,V,j)}function w(T,B){let D=l.fork(),V=0,U=0,ie=0,j=D.end-n,$={size:0,start:0,skip:0};e:for(let ne=D.pos-T;D.pos>ne;){let J=D.size;if(D.id==B&&J>=0){$.size=V,$.start=U,$.skip=ie,ie+=4,V+=4,D.next();continue}let re=D.pos-J;if(J<0||re<ne||D.start<j)break;let ge=D.id>=o?4:0,Be=D.start;for(D.next();D.pos>re;){if(D.size<0)if(D.size==-3||D.size==-4)ge+=4;else break e;else D.id>=o&&(ge+=4);D.next()}U=Be,V+=J,ie+=ge}return(B<0||V==T)&&($.size=V,$.start=U,$.skip=ie),$.size>4?$:void 0}function S(T,B,D){let{id:V,start:U,end:ie,size:j}=l;if(l.next(),j>=0&&V<o){let $=D;if(j>4){let ne=l.pos-(j-4);for(;l.pos>ne;)D=S(T,B,D)}B[--D]=$,B[--D]=ie-T,B[--D]=U-T,B[--D]=V}else j==-3?h=V:j==-4&&(c=V);return D}let A=[],M=[];for(;l.pos>0;)u(i.start||0,i.bufferStart||0,A,M,-1,0);let E=(e=i.length)!==null&&e!==void 0?e:A.length?M[0]+A[0].length:0;return new ve(a[i.topID],A.reverse(),M.reverse(),E)}var Uu=new WeakMap;function Fs(i,e){if(!i.isAnonymous||e instanceof kr||e.type!=i)return 1;let t=Uu.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=i||!(r instanceof ve)){t=1;break}t+=Fs(i,r)}Uu.set(e,t)}return t}function Va(i,e,t,r,n,s,o,l,a){let h=0;for(let v=r;v<n;v++)h+=Fs(i,e[v]);let c=Math.ceil(h*1.5/8),u=[],d=[];function p(v,y,w,S,A){for(let M=w;M<S;){let E=M,T=y[M],B=Fs(i,v[M]);for(M++;M<S;M++){let D=Fs(i,v[M]);if(B+D>=c)break;B+=D}if(M==E+1){if(B>c){let D=v[E];p(D.children,D.positions,0,D.children.length,y[E]+A);continue}u.push(v[E])}else{let D=y[M-1]+v[M-1].length-T;u.push(Va(i,v,y,E,M,T,D,null,a))}d.push(T+A-s)}}return p(e,t,r,n,0),(l||a)(u,d,o)}var Gr=class i{constructor(e,t,r,n,s=!1,o=!1){this.from=e,this.to=t,this.tree=r,this.offset=n,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let n=[new i(0,e.length,e,0,!1,r)];for(let s of t)s.to>e.length&&n.push(s);return n}static applyChanges(e,t,r=128){if(!t.length)return e;let n=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,h=0;;l++){let c=l<t.length?t[l]:null,u=c?c.fromA:1e9;if(u-a>=r)for(;o&&o.from<u;){let d=o;if(a>=d.from||u<=d.to||h){let p=Math.max(d.from,a)-h,v=Math.min(d.to,u)-h;d=p>=v?null:new i(p,v,d.tree,d.offset+h,l>0,!!c)}if(d&&n.push(d),o.to>u)break;o=s<e.length?e[s++]:null}if(!c)break;a=c.toA,h=c.toA-c.toB}return n}},mn=class{startParse(e,t,r){return typeof e=="string"&&(e=new qa(e)),r=r?r.length?r.map(n=>new cn(n.from,n.to)):[new cn(0,0)]:[new cn(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let n=this.startParse(e,t,r);for(;;){let s=n.advance();if(s)return s}}},qa=class{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}};var o7=new ee({perNode:!0});var qg=0,Rt=class i{constructor(e,t,r,n){this.name=e,this.set=t,this.base=r,this.modified=n,this.id=qg++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let r=typeof e=="string"?e:"?";if(e instanceof i&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let n=new i(r,[],null,[]);if(n.set.push(n),t)for(let s of t.set)n.set.push(s);return n}static defineModifier(e){let t=new Gs(e);return r=>r.modified.indexOf(t)>-1?r:Gs.get(r.base||r,r.modified.concat(t).sort((n,s)=>n.id-s.id))}},Wg=0,Gs=class i{constructor(e){this.name=e,this.instances=[],this.id=Wg++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(l=>l.base==e&&Vg(t,l.modified));if(r)return r;let n=[],s=new Rt(e.name,n,e,t);for(let l of t)l.instances.push(s);let o=$g(t);for(let l of e.set)if(!l.modified.length)for(let a of o)n.push(i.get(l,a));return s}};function Vg(i,e){return i.length==e.length&&i.every((t,r)=>t==e[r])}function $g(i){let e=[[]];for(let t=0;t<i.length;t++)for(let r=0,n=e.length;r<n;r++)e.push(e[r].concat(i[t]));return e.sort((t,r)=>r.length-t.length)}function _u(i){let e=Object.create(null);for(let t in i){let r=i[t];Array.isArray(r)||(r=[r]);for(let n of t.split(" "))if(n){let s=[],o=2,l=n;for(let u=0;;){if(l=="..."&&u>0&&u+3==n.length){o=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!d)throw new RangeError("Invalid path: "+n);if(s.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),u+=d[0].length,u==n.length)break;let p=n[u++];if(u==n.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+n);l=n.slice(u)}let a=s.length-1,h=s[a];if(!h)throw new RangeError("Invalid path: "+n);let c=new Kr(r,o,a>0?s.slice(0,a):null);e[h]=c.sort(e[h])}}return Ju.add(e)}var Ju=new ee({combine(i,e){let t,r,n;for(;i||e;){if(!i||e&&i.depth>=e.depth?(n=e,e=e.next):(n=i,i=i.next),t&&t.mode==n.mode&&!n.context&&!t.context)continue;let s=new Kr(n.tags,n.mode,n.context);t?t.next=s:r=s,t=s}return r}}),Kr=class{constructor(e,t,r,n){this.tags=e,this.mode=t,this.context=r,this.next=n}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};Kr.empty=new Kr([],2,null);function Ka(i,e){let t=Object.create(null);for(let s of i)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:r,all:n=null}=e||{};return{style:s=>{let o=n;for(let l of s)for(let a of l.set){let h=t[a.id];if(h){o=o?o+" "+h:h;break}}return o},scope:r}}function Gg(i,e){let t=null;for(let r of i){let n=r.style(e);n&&(t=t?t+" "+n:n)}return t}function Zu(i,e,t,r=0,n=i.length){let s=new Ga(r,Array.isArray(e)?e:[e],t);s.highlightRange(i.cursor(),r,n,"",s.highlighters),s.flush(n)}var Ga=class{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,n,s){let{type:o,from:l,to:a}=e;if(l>=r||a<=t)return;o.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(o)));let h=n,c=Ug(e)||Kr.empty,u=Gg(s,c.tags);if(u&&(h&&(h+=" "),h+=u,c.mode==1&&(n+=(n?" ":"")+u)),this.startSpan(Math.max(t,l),h),c.opaque)return;let d=e.tree&&e.tree.prop(ee.mounted);if(d&&d.overlay){let p=e.node.enter(d.overlay[0].from+l,1),v=this.highlighters.filter(w=>!w.scope||w.scope(d.tree.type)),y=e.firstChild();for(let w=0,S=l;;w++){let A=w<d.overlay.length?d.overlay[w]:null,M=A?A.from+l:a,E=Math.max(t,S),T=Math.min(r,M);if(E<T&&y)for(;e.from<T&&(this.highlightRange(e,E,T,n,s),this.startSpan(Math.min(T,e.to),h),!(e.to>=M||!e.nextSibling())););if(!A||M>r)break;S=A.to+l,S>t&&(this.highlightRange(p.cursor(),Math.max(t,A.from+l),Math.min(r,S),"",v),this.startSpan(Math.min(r,S),h))}y&&e.parent()}else if(e.firstChild()){d&&(n="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,n,s),this.startSpan(Math.min(r,e.to),h)}while(e.nextSibling());e.parent()}}};function Ug(i){let e=i.type.prop(Ju);for(;e&&e.context&&!i.matchContext(e.context);)e=e.next;return e||null}var F=Rt.define,Ws=F(),Sr=F(),Yu=F(Sr),Xu=F(Sr),Cr=F(),Vs=F(Cr),$a=F(Cr),jt=F(),Ur=F(jt),Ut=F(),Kt=F(),Ua=F(),pn=F(Ua),$s=F(),P={comment:Ws,lineComment:F(Ws),blockComment:F(Ws),docComment:F(Ws),name:Sr,variableName:F(Sr),typeName:Yu,tagName:F(Yu),propertyName:Xu,attributeName:F(Xu),className:F(Sr),labelName:F(Sr),namespace:F(Sr),macroName:F(Sr),literal:Cr,string:Vs,docString:F(Vs),character:F(Vs),attributeValue:F(Vs),number:$a,integer:F($a),float:F($a),bool:F(Cr),regexp:F(Cr),escape:F(Cr),color:F(Cr),url:F(Cr),keyword:Ut,self:F(Ut),null:F(Ut),atom:F(Ut),unit:F(Ut),modifier:F(Ut),operatorKeyword:F(Ut),controlKeyword:F(Ut),definitionKeyword:F(Ut),moduleKeyword:F(Ut),operator:Kt,derefOperator:F(Kt),arithmeticOperator:F(Kt),logicOperator:F(Kt),bitwiseOperator:F(Kt),compareOperator:F(Kt),updateOperator:F(Kt),definitionOperator:F(Kt),typeOperator:F(Kt),controlOperator:F(Kt),punctuation:Ua,separator:F(Ua),bracket:pn,angleBracket:F(pn),squareBracket:F(pn),paren:F(pn),brace:F(pn),content:jt,heading:Ur,heading1:F(Ur),heading2:F(Ur),heading3:F(Ur),heading4:F(Ur),heading5:F(Ur),heading6:F(Ur),contentSeparator:F(jt),list:F(jt),quote:F(jt),emphasis:F(jt),strong:F(jt),link:F(jt),monospace:F(jt),strikethrough:F(jt),inserted:F(),deleted:F(),changed:F(),invalid:F(),meta:$s,documentMeta:F($s),annotation:F($s),processingInstruction:F($s),definition:Rt.defineModifier("definition"),constant:Rt.defineModifier("constant"),function:Rt.defineModifier("function"),standard:Rt.defineModifier("standard"),local:Rt.defineModifier("local"),special:Rt.defineModifier("special")};for(let i in P){let e=P[i];e instanceof Rt&&(e.name=i)}var h7=Ka([{tag:P.link,class:"tok-link"},{tag:P.heading,class:"tok-heading"},{tag:P.emphasis,class:"tok-emphasis"},{tag:P.strong,class:"tok-strong"},{tag:P.keyword,class:"tok-keyword"},{tag:P.atom,class:"tok-atom"},{tag:P.bool,class:"tok-bool"},{tag:P.url,class:"tok-url"},{tag:P.labelName,class:"tok-labelName"},{tag:P.inserted,class:"tok-inserted"},{tag:P.deleted,class:"tok-deleted"},{tag:P.literal,class:"tok-literal"},{tag:P.string,class:"tok-string"},{tag:P.number,class:"tok-number"},{tag:[P.regexp,P.escape,P.special(P.string)],class:"tok-string2"},{tag:P.variableName,class:"tok-variableName"},{tag:P.local(P.variableName),class:"tok-variableName tok-local"},{tag:P.definition(P.variableName),class:"tok-variableName tok-definition"},{tag:P.special(P.variableName),class:"tok-variableName2"},{tag:P.definition(P.propertyName),class:"tok-propertyName tok-definition"},{tag:P.typeName,class:"tok-typeName"},{tag:P.namespace,class:"tok-namespace"},{tag:P.className,class:"tok-className"},{tag:P.macroName,class:"tok-macroName"},{tag:P.propertyName,class:"tok-propertyName"},{tag:P.operator,class:"tok-operator"},{tag:P.comment,class:"tok-comment"},{tag:P.meta,class:"tok-meta"},{tag:P.invalid,class:"tok-invalid"},{tag:P.punctuation,class:"tok-punctuation"}]);var ja,ki=new ee;function jg(i){return H.define({combine:i?e=>e.concat(i):void 0})}var Yg=new ee,dt=class{constructor(e,t,r=[],n=""){this.data=e,this.name=n,fe.prototype.hasOwnProperty("tree")||Object.defineProperty(fe.prototype,"tree",{get(){return Ze(this)}}),this.parser=t,this.extension=[Si.of(this),fe.languageData.of((s,o,l)=>{let a=Qu(s,o,l),h=a.type.prop(ki);if(!h)return[];let c=s.facet(h),u=a.type.prop(Yg);if(u){let d=a.resolve(o-a.from,l);for(let p of u)if(p.test(d,s)){let v=s.facet(p.facet);return p.type=="replace"?v:v.concat(c)}}return c})].concat(r)}isActiveAt(e,t,r=-1){return Qu(e,t,r).type.prop(ki)==this.data}findRegions(e){let t=e.facet(Si);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],n=(s,o)=>{if(s.prop(ki)==this.data){r.push({from:o,to:o+s.length});return}let l=s.prop(ee.mounted);if(l){if(l.tree.prop(ki)==this.data){if(l.overlay)for(let a of l.overlay)r.push({from:a.from+o,to:a.to+o});else r.push({from:o,to:o+s.length});return}else if(l.overlay){let a=r.length;if(n(l.tree,l.overlay[0].from+o),r.length>a)return}}for(let a=0;a<s.children.length;a++){let h=s.children[a];h instanceof ve&&n(h,s.positions[a]+o)}};return n(Ze(e),0),r}get allowsNesting(){return!0}};dt.setState=te.define();function Qu(i,e,t){let r=i.facet(Si),n=Ze(i).topNode;if(!r||r.allowsNesting)for(let s=n;s;s=s.enter(e,t,Ce.ExcludeBuffers|Ce.EnterBracketed))s.type.isTop&&(n=s);return n}function Ze(i){let e=i.field(dt.state,!1);return e?e.tree:ve.empty}var Ja=class{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}},gn=null,vn=class i{constructor(e,t,r=[],n,s,o,l,a){this.parser=e,this.state=t,this.fragments=r,this.tree=n,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new i(e,t,[],ve.empty,0,r,[],null)}startParse(){return this.parser.startParse(new Ja(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=ve.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(Gr.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Gr.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=gn;gn=this;try{return e()}finally{gn=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=ef(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:n,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((h,c,u,d)=>a.push({fromA:h,toA:c,fromB:u,toB:d})),r=Gr.applyChanges(r,a),n=ve.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let h of this.skipped){let c=e.mapPos(h.from,1),u=e.mapPos(h.to,-1);c<u&&l.push({from:c,to:u})}}}return new i(this.parser,t,r,n,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:n,to:s}=this.skipped[r];n<e.to&&s>e.from&&(this.fragments=ef(this.fragments,n,s),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends mn{createParse(t,r,n){let s=n[0].from,o=n[n.length-1].to;return{parsedPos:s,advance(){let a=gn;if(a){for(let h of n)a.tempSkipped.push(h);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new ve(Je.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return gn}};function ef(i,e,t){return Gr.applyChanges(i,[{fromA:e,toA:t,fromB:e,toB:t}])}var bn=class i{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new i(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=vn.create(e.facet(Si).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new i(r)}};dt.state=Ie.define({create:bn.init,update(i,e){for(let t of e.effects)if(t.is(dt.setState))return t.value;return e.startState.facet(Si)!=e.state.facet(Si)?bn.init(e.state):i.apply(e)}});var lf=i=>{let e=setTimeout(()=>i(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(lf=i=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(i,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});var Ya=typeof navigator<"u"&&(!((ja=navigator.scheduling)===null||ja===void 0)&&ja.isInputPending)?()=>navigator.scheduling.isInputPending():null,Xg=Se.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(dt.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(dt.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=lf(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:n}}=this.view,s=r.field(dt.state);if(s.tree==s.context.tree&&s.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Ya?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<n&&r.doc.length>n+1e3,a=s.context.work(()=>Ya&&Ya()||Date.now()>o,n+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:dt.setState.of(new bn(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Fe(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Si=H.define({combine(i){return i.length?i[0]:null},enables:i=>[dt.state,Xg,K.contentAttributes.compute([i],e=>{let t=e.facet(i);return t&&t.name?{"data-language":t.name}:{}})]});var _g=H.define(),xn=H.define({combine:i=>{if(!i.length)return"  ";let e=i[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(i[0]));return e}});function Ar(i){let e=i.facet(xn);return e.charCodeAt(0)==9?i.tabSize*e.length:e.length}function Ai(i,e){let t="",r=i.tabSize,n=i.facet(xn)[0];if(n=="	"){for(;e>=r;)t+="	",e-=r;n=" "}for(let s=0;s<e;s++)t+=n;return t}function Ys(i,e){i instanceof fe&&(i=new jr(i));for(let r of i.state.facet(_g)){let n=r(i,e);if(n!==void 0)return n}let t=Ze(i.state);return t.length>=e?Jg(i,t,e):null}var jr=class{constructor(e,t={}){this.state=e,this.options=t,this.unit=Ar(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:s}=this.options;return n!=null&&n>=r.from&&n<=r.to?s&&n==e?{text:"",from:e}:(t<0?n<e:n<=e)?{text:r.text.slice(n-r.from),from:n}:{text:r.text.slice(0,n-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:n}=this.lineAt(e,t);return r.slice(e-n,Math.min(r.length,e+100-n))}column(e,t=1){let{text:r,from:n}=this.lineAt(e,t),s=this.countColumn(r,e-n),o=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,t=e.length){return vr(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:n}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(n);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}},af=new ee;function Jg(i,e,t){let r=e.resolveStack(t),n=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(n!=r.node){let s=[];for(let o=n;o&&!(o.from<r.node.from||o.to>r.node.to||o.from==r.node.from&&o.type==r.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return hf(r,i,t)}function hf(i,e,t){for(let r=i;r;r=r.next){let n=Qg(r.node);if(n)return n(Za.create(e,t,r))}return 0}function Zg(i){return i.pos==i.options.simulateBreak&&i.options.simulateDoubleBreak}function Qg(i){let e=i.type.prop(af);if(e)return e;let t=i.firstChild,r;if(t&&(r=t.type.prop(ee.closedBy))){let n=i.lastChild,s=n&&r.indexOf(n.name)>-1;return o=>i4(o,!0,1,void 0,s&&!Zg(o)?n.from:void 0)}return i.parent==null?e4:null}function e4(){return 0}var Za=class i extends jr{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new i(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(t4(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return hf(this.context.next,this.base,this.pos)}};function t4(i,e){for(let t=e;t;t=t.parent)if(i==t)return!0;return!1}function r4(i){let e=i.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let n=i.options.simulateBreak,s=i.state.doc.lineAt(t.from),o=n==null||n<=s.from?s.to:Math.min(s.to,n);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==r)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let h=/^ */.exec(s.text.slice(t.to-s.from))[0].length;return{from:t.from,to:t.to+h}}l=a.to}}function i4(i,e,t,r,n){let s=i.textAfter,o=s.match(/^\s*/)[0].length,l=r&&s.slice(o,o+r.length)==r||n==i.pos+o,a=e?r4(i):null;return a?l?i.column(a.from):i.column(a.to):i.baseIndent+(l?0:i.unit*t)}var n4=200;function cf(){return fe.transactionFilter.of(i=>{if(!i.docChanged||!i.isUserEvent("input.type")&&!i.isUserEvent("input.complete"))return i;let e=i.startState.languageDataAt("indentOnInput",i.startState.selection.main.head);if(!e.length)return i;let t=i.newDoc,{head:r}=i.newSelection.main,n=t.lineAt(r);if(r>n.from+n4)return i;let s=t.sliceString(n.from,r);if(!e.some(h=>h.test(s)))return i;let{state:o}=i,l=-1,a=[];for(let{head:h}of o.selection.ranges){let c=o.doc.lineAt(h);if(c.from==l)continue;l=c.from;let u=Ys(o,c.from);if(u==null)continue;let d=/^\s*/.exec(c.text)[0],p=Ai(o,u);d!=p&&a.push({from:c.from,to:c.from+d.length,insert:p})}return a.length?[i,{changes:a,sequential:!0}]:i})}var Ci=class i{constructor(e,t){this.specs=e;let r;function n(l){let a=bt.newName();return(r||(r=Object.create(null)))["."+a]=l,a}let s=typeof t.all=="string"?t.all:t.all?n(t.all):void 0,o=t.scope;this.scope=o instanceof dt?l=>l.prop(ki)==o.data:o?l=>l==o:void 0,this.style=Ka(e.map(l=>({tag:l.tag,class:l.class||n(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=r?new bt(r):null,this.themeType=t.themeType}static define(e,t){return new i(e,t||{})}},Qa=H.define(),uf=H.define({combine(i){return i.length?[i[0]]:null}});function Xa(i){let e=i.facet(Qa);return e.length?e:i.facet(uf)}function ff(i,e){let t=[s4],r;return i instanceof Ci&&(i.module&&t.push(K.styleModule.of(i.module)),r=i.themeType),e?.fallback?t.push(uf.of(i)):r?t.push(Qa.computeN([K.darkTheme],n=>n.facet(K.darkTheme)==(r=="dark")?[i]:[])):t.push(Qa.of(i)),t}var e0=class{constructor(e){this.markCache=Object.create(null),this.tree=Ze(e.state),this.decorations=this.buildDeco(e,Xa(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=Ze(e.state),r=Xa(e.state),n=r!=Xa(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!n&&t.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||n)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return X.none;let r=new Et;for(let{from:n,to:s}of e.visibleRanges)Zu(this.tree,t,(o,l,a)=>{r.add(o,l,this.markCache[a]||(this.markCache[a]=X.mark({class:a})))},n,s);return r.finish()}},s4=Wt.high(Se.fromClass(e0,{decorations:i=>i.decorations})),v7=Ci.define([{tag:P.meta,color:"#404740"},{tag:P.link,textDecoration:"underline"},{tag:P.heading,textDecoration:"underline",fontWeight:"bold"},{tag:P.emphasis,fontStyle:"italic"},{tag:P.strong,fontWeight:"bold"},{tag:P.strikethrough,textDecoration:"line-through"},{tag:P.keyword,color:"#708"},{tag:[P.atom,P.bool,P.url,P.contentSeparator,P.labelName],color:"#219"},{tag:[P.literal,P.inserted],color:"#164"},{tag:[P.string,P.deleted],color:"#a11"},{tag:[P.regexp,P.escape,P.special(P.string)],color:"#e40"},{tag:P.definition(P.variableName),color:"#00f"},{tag:P.local(P.variableName),color:"#30a"},{tag:[P.typeName,P.namespace],color:"#085"},{tag:P.className,color:"#167"},{tag:[P.special(P.variableName),P.macroName],color:"#256"},{tag:P.definition(P.propertyName),color:"#00c"},{tag:P.comment,color:"#940"},{tag:P.invalid,color:"#f00"}]),o4=K.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),df=1e4,mf="()[]{}",pf=H.define({combine(i){return it(i,{afterCursor:!0,brackets:mf,maxScanDistance:df,renderMatch:h4})}}),l4=X.mark({class:"cm-matchingBracket"}),a4=X.mark({class:"cm-nonmatchingBracket"});function h4(i){let e=[],t=i.matched?l4:a4;return e.push(t.range(i.start.from,i.start.to)),i.end&&e.push(t.range(i.end.from,i.end.to)),e}function tf(i){let e=[],t=i.facet(pf);for(let r of i.selection.ranges){if(!r.empty)continue;let n=It(i,r.head,-1,t)||r.head>0&&It(i,r.head-1,1,t)||t.afterCursor&&(It(i,r.head,1,t)||r.head<i.doc.length&&It(i,r.head+1,-1,t));n&&(e=e.concat(t.renderMatch(n,i)))}return X.set(e,!0)}var c4=Se.fromClass(class{constructor(i){this.paused=!1,this.decorations=tf(i.state)}update(i){(i.docChanged||i.selectionSet||this.paused)&&(i.view.composing?(this.decorations=this.decorations.map(i.changes),this.paused=!0):(this.decorations=tf(i.state),this.paused=!1))}},{decorations:i=>i.decorations}),u4=[c4,o4];function gf(i={}){return[pf.of(i),u4]}var f4=new ee;function t0(i,e,t){let r=i.prop(e<0?ee.openedBy:ee.closedBy);if(r)return r;if(i.name.length==1){let n=t.indexOf(i.name);if(n>-1&&n%2==(e<0?1:0))return[t[n+e]]}return null}function r0(i){let e=i.type.prop(f4);return e?e(i.node):i}function It(i,e,t,r={}){let n=r.maxScanDistance||df,s=r.brackets||mf,o=Ze(i),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let h=t0(a.type,t,s);if(h&&a.from<a.to){let c=r0(a);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return d4(i,e,t,a,c,h,s)}}return m4(i,e,t,o,l.type,n,s)}function d4(i,e,t,r,n,s,o){let l=r.parent,a={from:n.from,to:n.to},h=0,c=l?.cursor();if(c&&(t<0?c.childBefore(r.from):c.childAfter(r.to)))do if(t<0?c.to<=r.from:c.from>=r.to){if(h==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let u=r0(c);return{start:a,end:u?{from:u.from,to:u.to}:void 0,matched:!0}}else if(t0(c.type,t,o))h++;else if(t0(c.type,-t,o)){if(h==0){let u=r0(c);return{start:a,end:u&&u.from<u.to?{from:u.from,to:u.to}:void 0,matched:!1}}h--}}while(t<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function m4(i,e,t,r,n,s,o){let l=t<0?i.sliceDoc(e-1,e):i.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},c=i.doc.iterRange(e,t>0?i.doc.length:0),u=0;for(let d=0;!c.next().done&&d<=s;){let p=c.value;t<0&&(d+=p.length);let v=e+d*t;for(let y=t>0?0:p.length-1,w=t>0?p.length:-1;y!=w;y+=t){let S=o.indexOf(p[y]);if(!(S<0||r.resolveInner(v+y,1).type!=n))if(S%2==0==t>0)u++;else{if(u==1)return{start:h,end:{from:v+y,to:v+y+1},matched:S>>1==a>>1};u--}}t>0&&(d+=p.length)}return c.done?{start:h,matched:!1}:null}function rf(i,e,t,r=0,n=0){e==null&&(e=i.search(/[^\s\u00a0]/),e==-1&&(e=i.length));let s=n;for(let o=r;o<e;o++)i.charCodeAt(o)==9?s+=t-s%t:s++;return s}var Us=class{constructor(e,t,r,n){this.string=e,this.tabSize=t,this.indentUnit=r,this.overrideIndent=n,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),r;if(typeof e=="string"?r=t==e:r=t&&(e instanceof RegExp?e.test(t):e(t)),r)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=rf(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:rf(this.string,null,this.tabSize)}match(e,t,r){if(typeof e=="string"){let n=o=>r?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return n(s)==n(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&t!==!1&&(this.pos+=n[0].length),n)}}current(){return this.string.slice(this.start,this.pos)}};function p4(i){return{name:i.name||"",token:i.token,blankLine:i.blankLine||(()=>{}),startState:i.startState||(()=>!0),copyState:i.copyState||g4,indent:i.indent||(()=>null),languageData:i.languageData||{},tokenTable:i.tokenTable||s0,mergeTokens:i.mergeTokens!==!1}}function g4(i){if(typeof i!="object")return i;let e={};for(let t in i){let r=i[t];e[t]=r instanceof Array?r.slice():r}return e}var nf=new WeakMap,Ks=class i extends dt{constructor(e){let t=jg(e.languageData),r=p4(e),n,s=new class extends mn{createParse(o,l,a){return new i0(n,o,l,a)}};super(t,s,[],e.name),this.topNode=x4(t,this),n=this,this.streamParser=r,this.stateAfter=new ee({perNode:!0}),this.tokenTable=e.tokenTable?new js(r.tokenTable):y4}static define(e){return new i(e)}getIndent(e){let t,{overrideIndentation:r}=e.options;r&&(t=nf.get(e.state),t!=null&&t<e.pos-1e4&&(t=void 0));let n=n0(this,e.node.tree,e.node.from,e.node.from,t??e.pos),s,o;if(n?(o=n.state,s=n.pos+1):(o=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let a=e.state.doc.lineAt(s),h=Math.min(e.pos,a.to);if(a.length){let c=r?r(a.from):-1,u=new Us(a.text,e.state.tabSize,e.unit,c<0?void 0:c);for(;u.pos<h-a.from;)bf(this.streamParser.token,u,o)}else this.streamParser.blankLine(o,e.unit);if(h==e.pos)break;s=a.to+1}let l=e.lineAt(e.pos);return r&&t==null&&nf.set(e.state,l.from),this.streamParser.indent(o,/^\s*(.*)/.exec(l.text)[1],e)}get allowsNesting(){return!1}};function n0(i,e,t,r,n){let s=t>=r&&t+e.length<=n&&e.prop(i.stateAfter);if(s)return{state:i.streamParser.copyState(s),pos:t+e.length};for(let o=e.children.length-1;o>=0;o--){let l=e.children[o],a=t+e.positions[o],h=l instanceof ve&&a<n&&n0(i,l,a,r,n);if(h)return h}return null}function vf(i,e,t,r,n){if(n&&t<=0&&r>=e.length)return e;!n&&t==0&&e.type==i.topNode&&(n=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],l=e.children[s],a;if(o<r&&l instanceof ve){if(!(a=vf(i,l,t-o,r-o,n)))break;return n?new ve(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),o+a.length):a}}return null}function v4(i,e,t,r,n){for(let s of e){let o=s.from+(s.openStart?25:0),l=s.to-(s.openEnd?25:0),a=o<=t&&l>t&&n0(i,s.tree,0-s.offset,t,l),h;if(a&&a.pos<=r&&(h=vf(i,s.tree,t+s.offset,a.pos+s.offset,!1)))return{state:a.state,tree:h}}return{state:i.streamParser.startState(n?Ar(n):4),tree:ve.empty}}var i0=class{constructor(e,t,r,n){this.lang=e,this.input=t,this.fragments=r,this.ranges=n,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=n[n.length-1].to;let s=vn.get(),o=n[0].from,{state:l,tree:a}=v4(e,r,o,this.to,s?.state);this.state=l,this.parsedPos=this.chunkStart=o+a.length;for(let h=0;h<a.children.length;h++)this.chunks.push(a.children[h]),this.chunkPos.push(a.positions[h]);s&&this.parsedPos<s.viewport.from-1e5&&n.some(h=>h.from<=s.viewport.from&&h.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Ar(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=vn.get(),t=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(t,this.chunkStart+512);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)t==`
`&&(t="");else{let r=t.indexOf(`
`);r>-1&&(t=t.slice(0,r))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),r=e+t.length;for(let n=this.rangeIndex;;){let s=this.ranges[n].to;if(s>=r||(t=t.slice(0,s-(r-t.length)),n++,n==this.ranges.length))break;let o=this.ranges[n].from,l=this.lineAfter(o);t+=l,r=o+l.length}return{line:t,end:r}}skipGapsTo(e,t,r){for(;;){let n=this.ranges[this.rangeIndex].to,s=e+t;if(r>0?n>s:n>=s)break;let o=this.ranges[++this.rangeIndex].from;t+=o-n}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,r,n){let s=4;if(this.ranges.length>1){n=this.skipGapsTo(t,n,1),t+=n;let l=this.chunk.length;n=this.skipGapsTo(r,n,-1),r+=n,s+=this.chunk.length-l}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==t?this.chunk[o+2]=r:this.chunk.push(e,t,r,s),n}parseLine(e){let{line:t,end:r}=this.nextLine(),n=0,{streamParser:s}=this.lang,o=new Us(t,e?e.state.tabSize:4,e?Ar(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let l=bf(s.token,o,this.state);if(l&&(n=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+o.start,this.parsedPos+o.pos,n)),o.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=ve.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:b4,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new ve(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new ve(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}};function bf(i,e,t){e.start=e.pos;for(let r=0;r<10;r++){let n=i(e,t);if(e.pos>e.start)return n}throw new Error("Stream parser failed to advance stream.")}var s0=Object.create(null),yn=[Je.none],b4=new Hs(yn),sf=[],of=Object.create(null),yf=Object.create(null);for(let[i,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])yf[i]=xf(s0,e);var js=class{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),yf)}resolve(e){return e?this.table[e]||(this.table[e]=xf(this.extra,e)):0}},y4=new js(s0);function _a(i,e){sf.indexOf(i)>-1||(sf.push(i),console.warn(e))}function xf(i,e){let t=[];for(let l of e.split(" ")){let a=[];for(let h of l.split(".")){let c=i[h]||P[h];c?typeof c=="function"?a.length?a=a.map(c):_a(h,`Modifier ${h} used at start of tag`):a.length?_a(h,`Tag ${h} used as modifier`):a=Array.isArray(c)?c:[c]:_a(h,`Unknown highlighting tag ${h}`)}for(let h of a)t.push(h)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),n=r+" "+t.map(l=>l.id),s=of[n];if(s)return s.id;let o=of[n]=Je.define({id:yn.length,name:r,props:[_u({[r]:t})]});return yn.push(o),o.id}function x4(i,e){let t=Je.define({id:yn.length,name:"Document",props:[ki.add(()=>i),af.add(()=>r=>e.getIndent(r))],top:!0});return yn.push(t),t}var b7={rtl:X.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:he.RTL}),ltr:X.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:he.LTR}),auto:X.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})};function o0(i){var e={as:"keyword",do:"keyword",else:"keyword",end:"keyword",exception:"keyword",fun:"keyword",functor:"keyword",if:"keyword",in:"keyword",include:"keyword",let:"keyword",of:"keyword",open:"keyword",rec:"keyword",struct:"keyword",then:"keyword",type:"keyword",val:"keyword",while:"keyword",with:"keyword"},t=i.extraWords||{};for(var r in t)t.hasOwnProperty(r)&&(e[r]=i.extraWords[r]);var n=[];for(var s in e)n.push(s);function o(c,u){var d=c.next();if(d==='"')return u.tokenize=l,u.tokenize(c,u);if(d==="{"&&c.eat("|"))return u.longString=!0,u.tokenize=h,u.tokenize(c,u);if(d==="("&&c.match(/^\*(?!\))/))return u.commentLevel++,u.tokenize=a,u.tokenize(c,u);if(d==="~"||d==="?")return c.eatWhile(/\w/),"variableName.special";if(d==="`")return c.eatWhile(/\w/),"quote";if(d==="/"&&i.slashComments&&c.eat("/"))return c.skipToEnd(),"comment";if(/\d/.test(d))return d==="0"&&c.eat(/[bB]/)&&c.eatWhile(/[01]/),d==="0"&&c.eat(/[xX]/)&&c.eatWhile(/[0-9a-fA-F]/),d==="0"&&c.eat(/[oO]/)?c.eatWhile(/[0-7]/):(c.eatWhile(/[\d_]/),c.eat(".")&&c.eatWhile(/[\d]/),c.eat(/[eE]/)&&c.eatWhile(/[\d\-+]/)),"number";if(/[+\-*&%=<>!?|@\.~:]/.test(d))return"operator";if(/[\w\xa1-\uffff]/.test(d)){c.eatWhile(/[\w\xa1-\uffff]/);var p=c.current();return e.hasOwnProperty(p)?e[p]:"variable"}return null}function l(c,u){for(var d,p=!1,v=!1;(d=c.next())!=null;){if(d==='"'&&!v){p=!0;break}v=!v&&d==="\\"}return p&&!v&&(u.tokenize=o),"string"}function a(c,u){for(var d,p;u.commentLevel>0&&(p=c.next())!=null;)d==="("&&p==="*"&&u.commentLevel++,d==="*"&&p===")"&&u.commentLevel--,d=p;return u.commentLevel<=0&&(u.tokenize=o),"comment"}function h(c,u){for(var d,p;u.longString&&(p=c.next())!=null;)d==="|"&&p==="}"&&(u.longString=!1),d=p;return u.longString||(u.tokenize=o),"string"}return{startState:function(){return{tokenize:o,commentLevel:0,longString:!1}},token:function(c,u){return c.eatSpace()?null:u.tokenize(c,u)},languageData:{autocomplete:n,commentTokens:{line:i.slashComments?"//":void 0,block:{open:"(*",close:"*)"}}}}}var wf=o0({name:"ocaml",extraWords:{and:"keyword",assert:"keyword",begin:"keyword",class:"keyword",constraint:"keyword",done:"keyword",downto:"keyword",external:"keyword",function:"keyword",initializer:"keyword",lazy:"keyword",match:"keyword",method:"keyword",module:"keyword",mutable:"keyword",new:"keyword",nonrec:"keyword",object:"keyword",private:"keyword",sig:"keyword",to:"keyword",try:"keyword",value:"keyword",virtual:"keyword",when:"keyword",raise:"builtin",failwith:"builtin",true:"builtin",false:"builtin",asr:"builtin",land:"builtin",lor:"builtin",lsl:"builtin",lsr:"builtin",lxor:"builtin",mod:"builtin",or:"builtin",raise_notrace:"builtin",trace:"builtin",exit:"builtin",print_string:"builtin",print_endline:"builtin",int:"type",float:"type",bool:"type",char:"type",string:"type",unit:"type",List:"builtin"}}),S7=o0({name:"fsharp",extraWords:{abstract:"keyword",assert:"keyword",base:"keyword",begin:"keyword",class:"keyword",default:"keyword",delegate:"keyword","do!":"keyword",done:"keyword",downcast:"keyword",downto:"keyword",elif:"keyword",extern:"keyword",finally:"keyword",for:"keyword",function:"keyword",global:"keyword",inherit:"keyword",inline:"keyword",interface:"keyword",internal:"keyword",lazy:"keyword","let!":"keyword",match:"keyword",member:"keyword",module:"keyword",mutable:"keyword",namespace:"keyword",new:"keyword",null:"keyword",override:"keyword",private:"keyword",public:"keyword","return!":"keyword",return:"keyword",select:"keyword",static:"keyword",to:"keyword",try:"keyword",upcast:"keyword","use!":"keyword",use:"keyword",void:"keyword",when:"keyword","yield!":"keyword",yield:"keyword",atomic:"keyword",break:"keyword",checked:"keyword",component:"keyword",const:"keyword",constraint:"keyword",constructor:"keyword",continue:"keyword",eager:"keyword",event:"keyword",external:"keyword",fixed:"keyword",method:"keyword",mixin:"keyword",object:"keyword",parallel:"keyword",process:"keyword",protected:"keyword",pure:"keyword",sealed:"keyword",tailcall:"keyword",trait:"keyword",virtual:"keyword",volatile:"keyword",List:"builtin",Seq:"builtin",Map:"builtin",Set:"builtin",Option:"builtin",int:"builtin",string:"builtin",not:"builtin",true:"builtin",false:"builtin",raise:"builtin",failwith:"builtin"},slashComments:!0}),C7=o0({name:"sml",extraWords:{abstype:"keyword",and:"keyword",andalso:"keyword",case:"keyword",datatype:"keyword",fn:"keyword",handle:"keyword",infix:"keyword",infixr:"keyword",local:"keyword",nonfix:"keyword",op:"keyword",orelse:"keyword",raise:"keyword",withtype:"keyword",eqtype:"keyword",sharing:"keyword",sig:"keyword",signature:"keyword",structure:"keyword",where:"keyword",true:"keyword",false:"keyword",int:"builtin",real:"builtin",string:"builtin",char:"builtin",bool:"builtin"},slashComments:!0});var _s=class{constructor(e,t,r,n){this.state=e,this.pos=t,this.explicit=r,this.view=n,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=Ze(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),n=t.text.slice(r-t.from,this.pos-t.from),s=n.search(Bf(e,!1));return s<0?null:{from:r+s,to:this.pos,text:n.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),r&&r.onDocChange&&(this.abortOnDocChange=!0))}};function kf(i){let e=Object.keys(i).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function w4(i){let e=Object.create(null),t=Object.create(null);for(let{label:n}of i){e[n[0]]=!0;for(let s=1;s<n.length;s++)t[n[s]]=!0}let r=kf(e)+kf(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function k4(i){let e=i.map(n=>typeof n=="string"?{label:n}:n),[t,r]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:w4(e);return n=>{let s=n.matchBefore(r);return s||n.explicit?{from:s?s.from:n.pos,options:e,validFor:t}:null}}var Js=class{constructor(e,t,r,n){this.completion=e,this.source=t,this.match=r,this.score=n}};function Xr(i){return i.selection.main.from}function Bf(i,e){var t;let{source:r}=i,n=e&&r[0]!="^",s=r[r.length-1]!="$";return!n&&!s?i:new RegExp(`${n?"^":""}(?:${r})${s?"$":""}`,(t=i.flags)!==null&&t!==void 0?t:i.ignoreCase?"i":"")}var Ef=rt.define();function S4(i,e,t,r){let{main:n}=i.selection,s=t-n.from,o=r-n.from;return{...i.changeByRange(l=>{if(l!=n&&t!=r&&i.sliceDoc(l.from+s,l.from+o)!=i.sliceDoc(t,r))return{range:l};let a=i.toText(e);return{changes:{from:l.from+s,to:r==n.from?l.to:l.from+o,insert:a},range:I.cursor(l.from+s+a.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}var Sf=new WeakMap;function C4(i){if(!Array.isArray(i))return i;let e=Sf.get(i);return e||Sf.set(i,e=k4(i)),e}var Zs=te.define(),wn=te.define(),c0=class{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let r=Xe(e,t),n=vt(r);this.chars.push(r);let s=e.slice(t,t+n),o=s.toUpperCase();this.folded.push(Xe(o==s?s.toLowerCase():o,0)),t+=n}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:n,precise:s,byWord:o}=this;if(t.length==1){let A=Xe(e,0),M=vt(A),E=M==e.length?0:-100;if(A!=t[0])if(A==r[0])E+=-200;else return null;return this.ret(E,[0,M])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,h=0;if(l<0){for(let A=0,M=Math.min(e.length,200);A<M&&h<a;){let E=Xe(e,A);(E==t[h]||E==r[h])&&(n[h++]=A),A+=vt(E)}if(h<a)return null}let c=0,u=0,d=!1,p=0,v=-1,y=-1,w=/[a-z]/.test(e),S=!0;for(let A=0,M=Math.min(e.length,200),E=0;A<M&&u<a;){let T=Xe(e,A);l<0&&(c<a&&T==t[c]&&(s[c++]=A),p<a&&(T==t[p]||T==r[p]?(p==0&&(v=A),y=A+1,p++):p=0));let B,D=T<255?T>=48&&T<=57||T>=97&&T<=122?2:T>=65&&T<=90?1:0:(B=qi(T))!=B.toLowerCase()?1:B!=B.toUpperCase()?2:0;(!A||D==1&&w||E==0&&D!=0)&&(t[u]==T||r[u]==T&&(d=!0)?o[u++]=A:o.length&&(S=!1)),E=D,A+=vt(T)}return u==a&&o[0]==0&&S?this.result(-100+(d?-200:0),o,e):p==a&&v==0?this.ret(-200-e.length+(y==e.length?0:-100),[0,y]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):p==a?this.ret(-900-e.length,[v,y]):u==a?this.result(-100+(d?-200:0)+-700+(S?0:-1100),o,e):t.length==2?null:this.result((n[0]?-700:0)+-200+-1100,n,e)}result(e,t,r){let n=[],s=0;for(let o of t){let l=o+(this.astral?vt(Xe(r,o)):1);s&&n[s-1]==o?n[s-1]=l:(n[s++]=o,n[s++]=l)}return this.ret(e-r.length,n)}},u0=class{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),r=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,t.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}},He=H.define({combine(i){return it(i,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:A4,filterStrict:!1,compareCompletions:(e,t)=>(e.sortText||e.label).localeCompare(t.sortText||t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>r=>Cf(e(r),t(r)),optionClass:(e,t)=>r=>Cf(e(r),t(r)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function Cf(i,e){return i?e?i+" "+e:i:e}function A4(i,e,t,r,n,s){let o=i.textDirection==he.RTL,l=o,a=!1,h="top",c,u,d=e.left-n.left,p=n.right-e.right,v=r.right-r.left,y=r.bottom-r.top;if(l&&d<Math.min(v,p)?l=!1:!l&&p<Math.min(v,d)&&(l=!0),v<=(l?d:p))c=Math.max(n.top,Math.min(t.top,n.bottom-y))-e.top,u=Math.min(400,l?d:p);else{a=!0,u=Math.min(400,(o?e.right:n.right-e.left)-30);let A=n.bottom-e.bottom;A>=y||A>e.top?c=t.bottom-e.top:(h="bottom",c=e.bottom-t.top)}let w=(e.bottom-e.top)/s.offsetHeight,S=(e.right-e.left)/s.offsetWidth;return{style:`${h}: ${c/w}px; max-width: ${u/S}px`,class:"cm-completionInfo-"+(a?o?"left-narrow":"right-narrow":l?"left":"right")}}function M4(i){let e=i.addToOptions.slice();return i.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(n=>"cm-completionIcon-"+n)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,n,s){let o=document.createElement("span");o.className="cm-completionLabel";let l=t.displayLabel||t.label,a=0;for(let h=0;h<s.length;){let c=s[h++],u=s[h++];c>a&&o.appendChild(document.createTextNode(l.slice(a,c)));let d=o.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(l.slice(c,u))),d.className="cm-completionMatchedText",a=u}return a<l.length&&o.appendChild(document.createTextNode(l.slice(a))),o},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}function l0(i,e,t){if(i<=t)return{from:0,to:i};if(e<0&&(e=0),e<=i>>1){let n=Math.floor(e/t);return{from:n*t,to:(n+1)*t}}let r=Math.floor((i-e)/t);return{from:i-(r+1)*t,to:i-r*t}}var f0=class{constructor(e,t,r){this.view=e,this.stateField=t,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let n=e.state.field(t),{options:s,selected:o}=n.open,l=e.state.facet(He);this.optionContent=M4(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=l0(s.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:h}=e.state.field(t).open;for(let c=a.target,u;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(u=/-(\d+)$/.exec(c.id))&&+u[1]<h.length){this.applyCompletion(e,h[+u[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet(He).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:wn.of(null)})}),this.showOptions(s,n.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let r=e.state.field(this.stateField),n=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=n){let{options:s,selected:o,disabled:l}=r.open;(!n.open||n.open.options!=s)&&(this.range=l0(s.length,o,e.state.facet(He).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),l!=((t=n.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of t.split(" "))r&&this.dom.classList.add(r);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;(t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=l0(t.options.length,t.selected,this.view.state.facet(He).maxRenderedOptions),this.showOptions(t.options,e.id));let r=this.updateSelectedOption(t.selected);if(r){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:s}=n;if(!s)return;let o=typeof s=="string"?document.createTextNode(s):s(n);if(!o)return;"then"in o?o.then(l=>{l&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(l,n)}).catch(l=>Fe(this.view.state,l,"completion info")):(this.addInfoPane(o,n),r.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,t){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",r.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:n,destroy:s}=e;r.appendChild(n),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,n=this.range.from;r;r=r.nextSibling,n++)r.nodeName!="LI"||!r.id?n--:n==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&(r.removeAttribute("aria-selected"),r.removeAttribute("aria-describedby"));return t&&D4(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),n=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return n.top>Math.min(s.bottom,t.bottom)-10||n.bottom<Math.max(s.top,t.top)+10?null:this.view.state.facet(He).positionInfo(this.view,t,n,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,r){let n=document.createElement("ul");n.id=t,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions")),n.addEventListener("mousedown",o=>{o.target==n&&o.preventDefault()});let s=null;for(let o=r.from;o<r.to;o++){let{completion:l,match:a}=e[o],{section:h}=l;if(h){let d=typeof h=="string"?h:h.name;if(d!=s&&(o>r.from||r.from==0))if(s=d,typeof h!="string"&&h.header)n.appendChild(h.header(h));else{let p=n.appendChild(document.createElement("completion-section"));p.textContent=d}}let c=n.appendChild(document.createElement("li"));c.id=t+"-"+o,c.setAttribute("role","option");let u=this.optionClass(l);u&&(c.className=u);for(let d of this.optionContent){let p=d(l,this.view.state,this.view,a);p&&c.appendChild(p)}}return r.from&&n.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}};function T4(i,e){return t=>new f0(t,i,e)}function D4(i,e){let t=i.getBoundingClientRect(),r=e.getBoundingClientRect(),n=t.height/i.offsetHeight;r.top<t.top?i.scrollTop-=(t.top-r.top)/n:r.bottom>t.bottom&&(i.scrollTop+=(r.bottom-t.bottom)/n)}function Af(i){return(i.boost||0)*100+(i.apply?10:0)+(i.info?5:0)+(i.type?1:0)}function B4(i,e){let t=[],r=null,n=null,s=c=>{t.push(c);let{section:u}=c.completion;if(u){r||(r=[]);let d=typeof u=="string"?u:u.name;r.some(p=>p.name==d)||r.push(typeof u=="string"?{name:d}:u)}},o=e.facet(He);for(let c of i)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let d of c.result.options)s(new Js(d,c.source,u?u(d):[],1e9-t.length));else{let d=e.sliceDoc(c.from,c.to),p,v=o.filterStrict?new u0(d):new c0(d);for(let y of c.result.options)if(p=v.match(y.label)){let w=y.displayLabel?u?u(y,p.matched):[]:p.matched,S=p.score+(y.boost||0);if(s(new Js(y,c.source,w,S)),typeof y.section=="object"&&y.section.rank==="dynamic"){let{name:A}=y.section;n||(n=Object.create(null)),n[A]=Math.max(S,n[A]||-1e9)}}}}if(r){let c=Object.create(null),u=0,d=(p,v)=>(p.rank==="dynamic"&&v.rank==="dynamic"?n[v.name]-n[p.name]:0)||(typeof p.rank=="number"?p.rank:1e9)-(typeof v.rank=="number"?v.rank:1e9)||(p.name<v.name?-1:1);for(let p of r.sort(d))u-=1e5,c[p.name]=u;for(let p of t){let{section:v}=p.completion;v&&(p.score+=c[typeof v=="string"?v:v.name])}}let l=[],a=null,h=o.compareCompletions;for(let c of t.sort((u,d)=>d.score-u.score||h(u.completion,d.completion))){let u=c.completion;!a||a.label!=u.label||a.detail!=u.detail||a.type!=null&&u.type!=null&&a.type!=u.type||a.apply!=u.apply||a.boost!=u.boost?l.push(c):Af(c.completion)>Af(a)&&(l[l.length-1]=c),a=c.completion}return l}var d0=class i{constructor(e,t,r,n,s,o){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=n,this.selected=s,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new i(this.options,Mf(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,r,n,s,o){if(n&&!o&&e.some(h=>h.isPending))return n.setDisabled();let l=B4(e,t);if(!l.length)return n&&e.some(h=>h.isPending)?n.setDisabled():null;let a=t.facet(He).selectOnOpen?0:-1;if(n&&n.selected!=a&&n.selected!=-1){let h=n.options[n.selected].completion;for(let c=0;c<l.length;c++)if(l[c].completion==h){a=c;break}}return new i(l,Mf(r,a),{pos:e.reduce((h,c)=>c.hasResult()?Math.min(h,c.from):h,1e8),create:I4,above:s.aboveCursor},n?n.timestamp:Date.now(),a,!1)}map(e){return new i(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new i(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}},m0=class i{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new i(L4,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,r=t.facet(He),s=(r.override||t.languageDataAt("autocomplete",Xr(t)).map(C4)).map(a=>(this.active.find(c=>c.source==a)||new hr(a,this.active.some(c=>c.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((a,h)=>a==this.active[h])&&(s=this.active);let o=this.open,l=e.effects.some(a=>a.is(g0));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!E4(s,this.active)||l?o=d0.build(s,t,this.id,o,r,l):o&&o.disabled&&!s.some(a=>a.isPending)&&(o=null),!o&&s.every(a=>!a.isPending)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new hr(a.source,0):a));for(let a of e.effects)a.is(zf)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new i(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?O4:z4}};function E4(i,e){if(i==e)return!0;for(let t=0,r=0;;){for(;t<i.length&&!i[t].hasResult();)t++;for(;r<e.length&&!e[r].hasResult();)r++;let n=t==i.length,s=r==e.length;if(n||s)return n==s;if(i[t++].result!=e[r++].result)return!1}}var O4={"aria-autocomplete":"list"},z4={};function Mf(i,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":i};return e>-1&&(t["aria-activedescendant"]=i+"-"+e),t}var L4=[];function Of(i,e){if(i.isUserEvent("input.complete")){let r=i.annotation(Ef);if(r&&e.activateOnCompletion(r))return 12}let t=i.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:i.isUserEvent("delete.backward")?2:i.selection?8:i.docChanged?16:0}var hr=class i{constructor(e,t,r=!1){this.source=e,this.state=t,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let r=Of(e,t),n=this;(r&8||r&16&&this.touches(e))&&(n=new i(n.source,0)),r&4&&n.state==0&&(n=new i(this.source,1)),n=n.updateFor(e,r);for(let s of e.effects)if(s.is(Zs))n=new i(n.source,1,s.value);else if(s.is(wn))n=new i(n.source,0);else if(s.is(g0))for(let o of s.value)o.source==n.source&&(n=o);return n}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Xr(e.state))}},Qs=class i extends hr{constructor(e,t,r,n,s,o){super(e,3,t),this.limit=r,this.result=n,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,t){var r;if(!(t&3))return this.map(e.changes);let n=this.result;n.map&&!e.changes.empty&&(n=n.map(n,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=Xr(e.state);if(l>o||!n||t&2&&(Xr(e.startState)==this.from||l<this.limit))return new hr(this.source,t&4?1:0);let a=e.changes.mapPos(this.limit);return R4(n.validFor,e.state,s,o)?new i(this.source,this.explicit,a,n,s,o):n.update&&(n=n.update(n,s,o,new _s(e.state,l,!1)))?new i(this.source,this.explicit,a,n,n.from,(r=n.to)!==null&&r!==void 0?r:Xr(e.state)):new hr(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new i(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new hr(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}};function R4(i,e,t,r){if(!i)return!1;let n=e.sliceDoc(t,r);return typeof i=="function"?i(n,t,r,e):Bf(i,!0).test(n)}var g0=te.define({map(i,e){return i.map(t=>t.map(e))}}),zf=te.define(),ot=Ie.define({create(){return m0.start()},update(i,e){return i.update(e)},provide:i=>[hn.from(i,e=>e.tooltip),K.contentAttributes.from(i,e=>e.attrs)]});function v0(i,e){let t=e.completion.apply||e.completion.label,r=i.state.field(ot).active.find(n=>n.source==e.source);return r instanceof Qs?(typeof t=="string"?i.dispatch({...S4(i.state,t,r.from,r.to),annotations:Ef.of(e.completion)}):t(i,e.completion,r.from,r.to),!0):!1}var I4=T4(ot,v0);function Xs(i,e="option"){return t=>{let r=t.state.field(ot,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<t.state.facet(He).interactionDelay)return!1;let n=1,s;e=="page"&&(s=Ia(t,r.open.tooltip))&&(n=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,l=r.open.selected>-1?r.open.selected+n*(i?1:-1):i?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),t.dispatch({effects:zf.of(l)}),!0}}var P4=i=>{let e=i.state.field(ot,!1);return i.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<i.state.facet(He).interactionDelay?!1:v0(i,e.open.options[e.open.selected])},a0=i=>i.state.field(ot,!1)?(i.dispatch({effects:Zs.of(!0)}),!0):!1,N4=i=>{let e=i.state.field(ot,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(i.dispatch({effects:wn.of(null)}),!0)},p0=class{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}},F4=50,H4=1e3,q4=Se.fromClass(class{constructor(i){this.view=i,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of i.state.field(ot).active)e.isPending&&this.startQuery(e)}update(i){let e=i.state.field(ot),t=i.state.facet(He);if(!i.selectionSet&&!i.docChanged&&i.startState.field(ot)==e)return;let r=i.transactions.some(s=>{let o=Of(s,t);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(r||o.context.abortOnDocChange&&i.docChanged||o.updates.length+i.transactions.length>F4&&Date.now()-o.time>H4){for(let l of o.context.abortListeners)try{l()}catch(a){Fe(this.view.state,a)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...i.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),i.transactions.some(s=>s.effects.some(o=>o.is(Zs)))&&(this.pendingStart=!0);let n=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),n):-1,this.composing!=0)for(let s of i.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:i}=this.view,e=i.field(ot);for(let t of e.active)t.isPending&&!this.running.some(r=>r.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(He).updateSyncTime))}startQuery(i){let{state:e}=this.view,t=Xr(e),r=new _s(e,t,i.explicit,this.view),n=new p0(i,r);this.running.push(n),Promise.resolve(i.source(r)).then(s=>{n.context.aborted||(n.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:wn.of(null)}),Fe(this.view.state,s)})}scheduleAccept(){this.running.every(i=>i.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(He).updateSyncTime))}accept(){var i;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(He),r=this.view.state.field(ot);for(let n=0;n<this.running.length;n++){let s=this.running[n];if(s.done===void 0)continue;if(this.running.splice(n--,1),s.done){let l=Xr(s.updates.length?s.updates[0].startState:this.view.state),a=Math.min(l,s.done.from+(s.active.explicit?0:1)),h=new Qs(s.active.source,s.active.explicit,a,s.done,s.done.from,(i=s.done.to)!==null&&i!==void 0?i:l);for(let c of s.updates)h=h.update(c,t);if(h.hasResult()){e.push(h);continue}}let o=r.active.find(l=>l.source==s.active.source);if(o&&o.isPending)if(s.done==null){let l=new hr(s.active.source,0);for(let a of s.updates)l=l.update(a,t);l.isPending||e.push(l)}else this.startQuery(o)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:g0.of(e)})}},{eventHandlers:{blur(i){let e=this.view.state.field(ot,!1);if(e&&e.tooltip&&this.view.state.facet(He).closeOnBlur){let t=e.open&&Ia(this.view,e.open.tooltip);(!t||!t.dom.contains(i.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:wn.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Zs.of(!1)}),20),this.composing=0}}}),W4=typeof navigator=="object"&&/Win/.test(navigator.platform),V4=Wt.highest(K.domEventHandlers({keydown(i,e){let t=e.state.field(ot,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||i.key.length>1||i.ctrlKey&&!(W4&&i.altKey)||i.metaKey)return!1;let r=t.open.options[t.open.selected],n=t.active.find(o=>o.source==r.source),s=r.completion.commitCharacters||n.result.commitCharacters;return s&&s.indexOf(i.key)>-1&&v0(e,r),!1}})),$4=K.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});var eo={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Yr=te.define({map(i,e){let t=e.mapPos(i,-1,We.TrackAfter);return t??void 0}}),b0=new class extends gt{};b0.startSide=1;b0.endSide=-1;var Lf=Ie.define({create(){return le.empty},update(i,e){if(i=i.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);i=i.update({filter:r=>r>=t.from&&r<=t.to})}for(let t of e.effects)t.is(Yr)&&(i=i.update({add:[b0.range(t.value,t.value+1)]}));return i}});function Rf(){return[j4,Lf]}var h0="()[]{}<>\xAB\xBB\xBB\xAB\uFF3B\uFF3D\uFF5B\uFF5D";function G4(i){for(let e=0;e<h0.length;e+=2)if(h0.charCodeAt(e)==i)return h0.charAt(e+1);return qi(i<128?i:i+1)}function U4(i,e){return i.languageDataAt("closeBrackets",e)[0]||eo}var K4=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),j4=K.inputHandler.of((i,e,t,r)=>{if((K4?i.composing:i.compositionStarted)||i.state.readOnly)return!1;let n=i.state.selection.main;if(r.length>2||r.length==2&&vt(Xe(r,0))==1||e!=n.from||t!=n.to)return!1;let s=Y4(i.state,r);return s?(i.dispatch(s),!0):!1});function Y4(i,e){let t=U4(i,i.selection.main.head),r=t.brackets||eo.brackets;for(let n of r){let s=G4(Xe(n,0));if(e==n)return s==n?J4(i,n,r.indexOf(n+n+n)>-1,t):X4(i,n,s,t.before||eo.before);if(e==s&&If(i,i.selection.main.from))return _4(i,n,s)}return null}function If(i,e){let t=!1;return i.field(Lf).between(0,i.doc.length,r=>{r==e&&(t=!0)}),t}function y0(i,e){let t=i.sliceString(e,e+2);return t.slice(0,vt(Xe(t,0)))}function X4(i,e,t,r){let n=null,s=i.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:Yr.of(o.to+e.length),range:I.range(o.anchor+e.length,o.head+e.length)};let l=y0(i.doc,o.head);return!l||/\s/.test(l)||r.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:Yr.of(o.head+e.length),range:I.cursor(o.head+e.length)}:{range:n=o}});return n?null:i.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function _4(i,e,t){let r=null,n=i.changeByRange(s=>s.empty&&y0(i.doc,s.head)==t?{changes:{from:s.head,to:s.head+t.length,insert:t},range:I.cursor(s.head+t.length)}:r={range:s});return r?null:i.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function J4(i,e,t,r){let n=r.stringPrefixes||eo.stringPrefixes,s=null,o=i.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Yr.of(l.to+e.length),range:I.range(l.anchor+e.length,l.head+e.length)};let a=l.head,h=y0(i.doc,a),c;if(h==e){if(Tf(i,a))return{changes:{insert:e+e,from:a},effects:Yr.of(a+e.length),range:I.cursor(a+e.length)};if(If(i,a)){let d=t&&i.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+d.length,insert:d},range:I.cursor(a+d.length)}}}else{if(t&&i.sliceDoc(a-2*e.length,a)==e+e&&(c=Df(i,a-2*e.length,n))>-1&&Tf(i,c))return{changes:{insert:e+e+e+e,from:a},effects:Yr.of(a+e.length),range:I.cursor(a+e.length)};if(i.charCategorizer(a)(h)!=Ee.Word&&Df(i,a,n)>-1&&!Z4(i,a,e,n))return{changes:{insert:e+e,from:a},effects:Yr.of(a+e.length),range:I.cursor(a+e.length)}}return{range:s=l}});return s?null:i.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Tf(i,e){let t=Ze(i).resolveInner(e+1);return t.parent&&t.from==e}function Z4(i,e,t,r){let n=Ze(i).resolveInner(e,-1),s=r.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=i.sliceDoc(n.from,Math.min(n.to,n.from+t.length+s)),a=l.indexOf(t);if(!a||a>-1&&r.indexOf(l.slice(0,a))>-1){let c=n.firstChild;for(;c&&c.from==n.from&&c.to-c.from>t.length+a;){if(i.sliceDoc(c.to-t.length,c.to)==t)return!1;c=c.firstChild}return!0}let h=n.to==e&&n.parent;if(!h)break;n=h}return!1}function Df(i,e,t){let r=i.charCategorizer(e);if(r(i.sliceDoc(e-1,e))!=Ee.Word)return e;for(let n of t){let s=e-n.length;if(i.sliceDoc(s,e)==n&&r(i.sliceDoc(s-1,s))!=Ee.Word)return s}return-1}function Pf(i={}){return[V4,ot,He.of(i),q4,e2,$4]}var Q4=[{key:"Ctrl-Space",run:a0},{mac:"Alt-`",run:a0},{mac:"Alt-i",run:a0},{key:"Escape",run:N4},{key:"ArrowDown",run:Xs(!0)},{key:"ArrowUp",run:Xs(!1)},{key:"PageDown",run:Xs(!0,"page")},{key:"PageUp",run:Xs(!1,"page")},{key:"Enter",run:P4}],e2=Wt.highest(an.computeN([He],i=>i.facet(He).defaultKeymap?[Q4]:[]));var t2=i=>{let{state:e}=i,t=e.doc.lineAt(e.selection.main.from),r=M0(i.state,t.from);return r.line?r2(i):r.block?n2(i):!1};function A0(i,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let n=i(e,t);return n?(r(t.update(n)),!0):!1}}var r2=A0(l2,0);var i2=A0(Uf,0);var n2=A0((i,e)=>Uf(i,e,o2(e)),0);function M0(i,e){let t=i.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}var kn=50;function s2(i,{open:e,close:t},r,n){let s=i.sliceDoc(r-kn,r),o=i.sliceDoc(n,n+kn),l=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(o)[0].length,h=s.length-l;if(s.slice(h-e.length,h)==e&&o.slice(a,a+t.length)==t)return{open:{pos:r-l,margin:l&&1},close:{pos:n+a,margin:a&&1}};let c,u;n-r<=2*kn?c=u=i.sliceDoc(r,n):(c=i.sliceDoc(r,r+kn),u=i.sliceDoc(n-kn,n));let d=/^\s*/.exec(c)[0].length,p=/\s*$/.exec(u)[0].length,v=u.length-p-t.length;return c.slice(d,d+e.length)==e&&u.slice(v,v+t.length)==t?{open:{pos:r+d+e.length,margin:/\s/.test(c.charAt(d+e.length))?1:0},close:{pos:n-p-t.length,margin:/\s/.test(u.charAt(v-1))?1:0}}:null}function o2(i){let e=[];for(let t of i.selection.ranges){let r=i.doc.lineAt(t.from),n=t.to<=r.to?r:i.doc.lineAt(t.to);n.from>r.from&&n.from==t.to&&(n=t.to==r.to+1?r:i.doc.lineAt(t.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=n.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:n.to})}return e}function Uf(i,e,t=e.selection.ranges){let r=t.map(s=>M0(e,s.from).block);if(!r.every(s=>s))return null;let n=t.map((s,o)=>s2(e,r[o],s.from,s.to));if(i!=2&&!n.every(s=>s))return{changes:e.changes(t.map((s,o)=>n[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(i!=1&&n.some(s=>s)){let s=[];for(let o=0,l;o<n.length;o++)if(l=n[o]){let a=r[o],{open:h,close:c}=l;s.push({from:h.pos-a.open.length,to:h.pos+h.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:s}}return null}function l2(i,e,t=e.selection.ranges){let r=[],n=-1;e:for(let{from:s,to:o}of t){let l=r.length,a=1e9,h;for(let c=s;c<=o;){let u=e.doc.lineAt(c);if(h==null&&(h=M0(e,u.from).line,!h))continue e;if(u.from>n&&(s==o||o>u.from)){n=u.from;let d=/^\s*/.exec(u.text)[0].length,p=d==u.length,v=u.text.slice(d,d+h.length)==h?d:-1;d<u.text.length&&d<a&&(a=d),r.push({line:u,comment:v,token:h,indent:d,empty:p,single:!1})}c=u.to+1}if(a<1e9)for(let c=l;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=a);r.length==l+1&&(r[l].single=!0)}if(i!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:a,indent:h,empty:c,single:u}of r)(u||!c)&&s.push({from:l.from+h,insert:a+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(i!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:l,token:a}of r)if(l>=0){let h=o.from+l,c=h+a.length;o.text[c-o.from]==" "&&c++,s.push({from:h,to:c})}return{changes:s}}return null}var w0=rt.define(),a2=rt.define(),h2=H.define(),Kf=H.define({combine(i){return it(i,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(r,n)=>e(r,n)||t(r,n)})}}),jf=Ie.define({create(){return _r.empty},update(i,e){let t=e.state.facet(Kf),r=e.annotation(w0);if(r){let a=Pt.fromTransaction(e,r.selection),h=r.side,c=h==0?i.undone:i.done;return a?c=ro(c,c.length,t.minDepth,a):c=Jf(c,e.startState.selection),new _r(h==0?r.rest:c,h==0?c:r.rest)}let n=e.annotation(a2);if((n=="full"||n=="before")&&(i=i.isolate()),e.annotation(Le.addToHistory)===!1)return e.changes.empty?i:i.addMapping(e.changes.desc);let s=Pt.fromTransaction(e),o=e.annotation(Le.time),l=e.annotation(Le.userEvent);return s?i=i.addChanges(s,o,l,t,e):e.selection&&(i=i.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(n=="full"||n=="after")&&(i=i.isolate()),i},toJSON(i){return{done:i.done.map(e=>e.toJSON()),undone:i.undone.map(e=>e.toJSON())}},fromJSON(i){return new _r(i.done.map(Pt.fromJSON),i.undone.map(Pt.fromJSON))}});function Yf(i={}){return[jf,Kf.of(i),K.domEventHandlers({beforeinput(e,t){let r=e.inputType=="historyUndo"?Xf:e.inputType=="historyRedo"?k0:null;return r?(e.preventDefault(),r(t)):!1}})]}function io(i,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let n=t.field(jf,!1);if(!n)return!1;let s=n.pop(i,t,e);return s?(r(s),!0):!1}}var Xf=io(0,!1),k0=io(1,!1),c2=io(0,!0),u2=io(1,!0);var Pt=class i{constructor(e,t,r,n,s){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=n,this.selectionsAfter=s}setSelAfter(e){return new i(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(e){return new i(e.changes&&Ye.fromJSON(e.changes),[],e.mapped&&nr.fromJSON(e.mapped),e.startSelection&&I.fromJSON(e.startSelection),e.selectionsAfter.map(I.fromJSON))}static fromTransaction(e,t){let r=At;for(let n of e.startState.facet(h2)){let s=n(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new i(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,At)}static selection(e){return new i(void 0,At,void 0,void 0,e)}};function ro(i,e,t,r){let n=e+1>t+20?e-t-1:0,s=i.slice(n,e);return s.push(r),s}function f2(i,e){let t=[],r=!1;return i.iterChangedRanges((n,s)=>t.push(n,s)),e.iterChangedRanges((n,s,o,l)=>{for(let a=0;a<t.length;){let h=t[a++],c=t[a++];l>=h&&o<=c&&(r=!0)}}),r}function d2(i,e){return i.ranges.length==e.ranges.length&&i.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function _f(i,e){return i.length?e.length?i.concat(e):i:e}var At=[],m2=200;function Jf(i,e){if(i.length){let t=i[i.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-m2));return r.length&&r[r.length-1].eq(e)?i:(r.push(e),ro(i,i.length-1,1e9,t.setSelAfter(r)))}else return[Pt.selection([e])]}function p2(i){let e=i[i.length-1],t=i.slice();return t[i.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function x0(i,e){if(!i.length)return i;let t=i.length,r=At;for(;t;){let n=g2(i[t-1],e,r);if(n.changes&&!n.changes.empty||n.effects.length){let s=i.slice(0,t);return s[t-1]=n,s}else e=n.mapped,t--,r=n.selectionsAfter}return r.length?[Pt.selection(r)]:At}function g2(i,e,t){let r=_f(i.selectionsAfter.length?i.selectionsAfter.map(l=>l.map(e)):At,t);if(!i.changes)return Pt.selection(r);let n=i.changes.map(e),s=e.mapDesc(i.changes,!0),o=i.mapped?i.mapped.composeDesc(s):s;return new Pt(n,te.mapEffects(i.effects,e),o,i.startSelection.map(s),r)}var v2=/^(input\.type|delete)($|\.)/,_r=class i{constructor(e,t,r=0,n=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=n}isolate(){return this.prevTime?new i(this.done,this.undone):this}addChanges(e,t,r,n,s){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!r||v2.test(r))&&(!l.selectionsAfter.length&&t-this.prevTime<n.newGroupDelay&&n.joinToEvent(s,f2(l.changes,e.changes))||r=="input.type.compose")?o=ro(o,o.length-1,n.minDepth,new Pt(e.changes.compose(l.changes),_f(te.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,At)):o=ro(o,o.length,n.minDepth,e),new i(o,At,t,r)}addSelection(e,t,r,n){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:At;return s.length>0&&t-this.prevTime<n&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&d2(s[s.length-1],e)?this:new i(Jf(this.done,e),this.undone,t,r)}addMapping(e){return new i(x0(this.done,e),x0(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let n=e==0?this.done:this.undone;if(n.length==0)return null;let s=n[n.length-1],o=s.selectionsAfter[0]||(s.startSelection?s.startSelection.map(s.changes.invertedDesc,1):t.selection);if(r&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:w0.of({side:e,rest:p2(n),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let l=n.length==1?At:n.slice(0,n.length-1);return s.mapped&&(l=x0(l,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:w0.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}};_r.empty=new _r(At,At);var Zf=[{key:"Mod-z",run:Xf,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:k0,preventDefault:!0},{linux:"Ctrl-Shift-z",run:k0,preventDefault:!0},{key:"Mod-u",run:c2,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:u2,preventDefault:!0}];function Mi(i,e){return I.create(i.ranges.map(e),i.mainIndex)}function Nt(i,e){return i.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Ft({state:i,dispatch:e},t){let r=Mi(i.selection,t);return r.eq(i.selection,!0)?!1:(e(Nt(i,r)),!0)}function no(i,e){return I.cursor(e?i.to:i.from)}function Qf(i,e){return Ft(i,t=>t.empty?i.moveByChar(t,e):no(t,e))}function Ge(i){return i.textDirectionAt(i.state.selection.main.head)==he.LTR}var ed=i=>Qf(i,!Ge(i)),td=i=>Qf(i,Ge(i));function rd(i,e){return Ft(i,t=>t.empty?i.moveByGroup(t,e):no(t,e))}var b2=i=>rd(i,!Ge(i)),y2=i=>rd(i,Ge(i));var P7=typeof Intl<"u"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function x2(i,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(i.sliceDoc(e.from,e.to)))||e.firstChild}function so(i,e,t){let r=Ze(i).resolveInner(e.head),n=t?ee.closedBy:ee.openedBy;for(let a=e.head;;){let h=t?r.childAfter(a):r.childBefore(a);if(!h)break;x2(i,h,n)?r=h:a=t?h.to:h.from}let s=r.type.prop(n),o,l;return s&&(o=t?It(i,r.from,1):It(i,r.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?r.to:r.from,I.cursor(l,t?-1:1)}var w2=i=>Ft(i,e=>so(i.state,e,!Ge(i))),k2=i=>Ft(i,e=>so(i.state,e,Ge(i)));function id(i,e){return Ft(i,t=>{if(!t.empty)return no(t,e);let r=i.moveVertically(t,e);return r.head!=t.head?r:i.moveToLineBoundary(t,e)})}var nd=i=>id(i,!1),sd=i=>id(i,!0);function od(i){let e=i.scrollDOM.clientHeight<i.scrollDOM.scrollHeight-2,t=0,r=0,n;if(e){for(let s of i.state.facet(K.scrollMargins)){let o=s(i);o?.top&&(t=Math.max(o?.top,t)),o?.bottom&&(r=Math.max(o?.bottom,r))}n=i.scrollDOM.clientHeight-t-r}else n=(i.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(i.defaultLineHeight,n-5)}}function ld(i,e){let t=od(i),{state:r}=i,n=Mi(r.selection,o=>o.empty?i.moveVertically(o,e,t.height):no(o,e));if(n.eq(r.selection))return!1;let s;if(t.selfScroll){let o=i.coordsAtPos(r.selection.main.head),l=i.scrollDOM.getBoundingClientRect(),a=l.top+t.marginTop,h=l.bottom-t.marginBottom;o&&o.top>a&&o.bottom<h&&(s=K.scrollIntoView(n.main.head,{y:"start",yMargin:o.top-a}))}return i.dispatch(Nt(r,n),{effects:s}),!0}var Nf=i=>ld(i,!1),S0=i=>ld(i,!0);function Mr(i,e,t){let r=i.lineBlockAt(e.head),n=i.moveToLineBoundary(e,t);if(n.head==e.head&&n.head!=(t?r.to:r.from)&&(n=i.moveToLineBoundary(e,t,!1)),!t&&n.head==r.from&&r.length){let s=/^\s*/.exec(i.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(n=I.cursor(r.from+s))}return n}var S2=i=>Ft(i,e=>Mr(i,e,!0)),C2=i=>Ft(i,e=>Mr(i,e,!1)),A2=i=>Ft(i,e=>Mr(i,e,!Ge(i))),M2=i=>Ft(i,e=>Mr(i,e,Ge(i))),T2=i=>Ft(i,e=>I.cursor(i.lineBlockAt(e.head).from,1)),D2=i=>Ft(i,e=>I.cursor(i.lineBlockAt(e.head).to,-1));function B2(i,e,t){let r=!1,n=Mi(i.selection,s=>{let o=It(i,s.head,-1)||It(i,s.head,1)||s.head>0&&It(i,s.head-1,1)||s.head<i.doc.length&&It(i,s.head+1,-1);if(!o||!o.end)return s;r=!0;let l=o.start.from==s.head?o.end.to:o.end.from;return t?I.range(s.anchor,l):I.cursor(l)});return r?(e(Nt(i,n)),!0):!1}var E2=({state:i,dispatch:e})=>B2(i,e,!1);function Mt(i,e){let t=Mi(i.state.selection,r=>{let n=e(r);return I.range(r.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return t.eq(i.state.selection)?!1:(i.dispatch(Nt(i.state,t)),!0)}function ad(i,e){return Mt(i,t=>i.moveByChar(t,e))}var hd=i=>ad(i,!Ge(i)),cd=i=>ad(i,Ge(i));function ud(i,e){return Mt(i,t=>i.moveByGroup(t,e))}var O2=i=>ud(i,!Ge(i)),z2=i=>ud(i,Ge(i));var L2=i=>Mt(i,e=>so(i.state,e,!Ge(i))),R2=i=>Mt(i,e=>so(i.state,e,Ge(i)));function fd(i,e){return Mt(i,t=>i.moveVertically(t,e))}var dd=i=>fd(i,!1),md=i=>fd(i,!0);function pd(i,e){return Mt(i,t=>i.moveVertically(t,e,od(i).height))}var Ff=i=>pd(i,!1),Hf=i=>pd(i,!0),I2=i=>Mt(i,e=>Mr(i,e,!0)),P2=i=>Mt(i,e=>Mr(i,e,!1)),N2=i=>Mt(i,e=>Mr(i,e,!Ge(i))),F2=i=>Mt(i,e=>Mr(i,e,Ge(i))),H2=i=>Mt(i,e=>I.cursor(i.lineBlockAt(e.head).from)),q2=i=>Mt(i,e=>I.cursor(i.lineBlockAt(e.head).to)),qf=({state:i,dispatch:e})=>(e(Nt(i,{anchor:0})),!0),Wf=({state:i,dispatch:e})=>(e(Nt(i,{anchor:i.doc.length})),!0),Vf=({state:i,dispatch:e})=>(e(Nt(i,{anchor:i.selection.main.anchor,head:0})),!0),$f=({state:i,dispatch:e})=>(e(Nt(i,{anchor:i.selection.main.anchor,head:i.doc.length})),!0),W2=({state:i,dispatch:e})=>(e(i.update({selection:{anchor:0,head:i.doc.length},userEvent:"select"})),!0),V2=({state:i,dispatch:e})=>{let t=oo(i).map(({from:r,to:n})=>I.range(r,Math.min(n+1,i.doc.length)));return e(i.update({selection:I.create(t),userEvent:"select"})),!0},$2=({state:i,dispatch:e})=>{let t=Mi(i.selection,r=>{let n=Ze(i),s=n.resolveStack(r.from,1);if(r.empty){let o=n.resolveStack(r.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:l}=o;if((l.from<r.from&&l.to>=r.to||l.to>r.to&&l.from<=r.from)&&o.next)return I.range(l.to,l.from)}return r});return t.eq(i.selection)?!1:(e(Nt(i,t)),!0)};function gd(i,e){let{state:t}=i,r=t.selection,n=t.selection.ranges.slice();for(let s of t.selection.ranges){let o=t.doc.lineAt(s.head);if(e?o.to<i.state.doc.length:o.from>0)for(let l=s;;){let a=i.moveVertically(l,e);if(a.head<o.from||a.head>o.to){n.some(h=>h.head==a.head)||n.push(a);break}else{if(a.head==l.head)break;l=a}}}return n.length==r.ranges.length?!1:(i.dispatch(Nt(t,I.create(n,n.length-1))),!0)}var G2=i=>gd(i,!1),U2=i=>gd(i,!0),K2=({state:i,dispatch:e})=>{let t=i.selection,r=null;return t.ranges.length>1?r=I.create([t.main]):t.main.empty||(r=I.create([I.cursor(t.main.head)])),r?(e(Nt(i,r)),!0):!1};function Sn(i,e){if(i.state.readOnly)return!1;let t="delete.selection",{state:r}=i,n=r.changeByRange(s=>{let{from:o,to:l}=s;if(o==l){let a=e(s);a<o?(t="delete.backward",a=to(i,a,!1)):a>o&&(t="delete.forward",a=to(i,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=to(i,o,!1),l=to(i,l,!0);return o==l?{range:s}:{changes:{from:o,to:l},range:I.cursor(o,o<s.head?-1:1)}});return n.changes.empty?!1:(i.dispatch(r.update(n,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?K.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function to(i,e,t){if(i instanceof K)for(let r of i.state.facet(K.atomicRanges).map(n=>n(i)))r.between(e,e,(n,s)=>{n<e&&s>e&&(e=t?s:n)});return e}var vd=(i,e,t)=>Sn(i,r=>{let n=r.from,{state:s}=i,o=s.doc.lineAt(n),l,a;if(t&&!e&&n>o.from&&n<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,n-o.from))){if(l[l.length-1]=="	")return n-1;let h=vr(l,s.tabSize),c=h%Ar(s)||Ar(s);for(let u=0;u<c&&l[l.length-1-u]==" ";u++)n--;a=n}else a=Re(o.text,n-o.from,e,e)+o.from,a==n&&o.number!=(e?s.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,n-o.from))&&(a=Re(o.text,a-o.from,!1,!1)+o.from);return a}),C0=i=>vd(i,!1,!0);var bd=i=>vd(i,!0,!1),yd=(i,e)=>Sn(i,t=>{let r=t.head,{state:n}=i,s=n.doc.lineAt(r),o=n.charCategorizer(r);for(let l=null;;){if(r==(e?s.to:s.from)){r==t.head&&s.number!=(e?n.doc.lines:1)&&(r+=e?1:-1);break}let a=Re(s.text,r-s.from,e)+s.from,h=s.text.slice(Math.min(r,a)-s.from,Math.max(r,a)-s.from),c=o(h);if(l!=null&&c!=l)break;(h!=" "||r!=t.head)&&(l=c),r=a}return r}),xd=i=>yd(i,!1),j2=i=>yd(i,!0);var Y2=i=>Sn(i,e=>{let t=i.lineBlockAt(e.head).to;return e.head<t?t:Math.min(i.state.doc.length,e.head+1)});var X2=i=>Sn(i,e=>{let t=i.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),_2=i=>Sn(i,e=>{let t=i.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(i.state.doc.length,e.head+1)});var J2=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=i.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:se.of(["",""])},range:I.cursor(r.from)}));return e(i.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},Z2=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=i.changeByRange(r=>{if(!r.empty||r.from==0||r.from==i.doc.length)return{range:r};let n=r.from,s=i.doc.lineAt(n),o=n==s.from?n-1:Re(s.text,n-s.from,!1)+s.from,l=n==s.to?n+1:Re(s.text,n-s.from,!0)+s.from;return{changes:{from:o,to:l,insert:i.doc.slice(n,l).append(i.doc.slice(o,n))},range:I.cursor(l)}});return t.changes.empty?!1:(e(i.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function oo(i){let e=[],t=-1;for(let r of i.selection.ranges){let n=i.doc.lineAt(r.from),s=i.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=i.doc.lineAt(r.to-1)),t>=n.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:n.from,to:s.to,ranges:[r]});t=s.number+1}return e}function wd(i,e,t){if(i.readOnly)return!1;let r=[],n=[];for(let s of oo(i)){if(t?s.to==i.doc.length:s.from==0)continue;let o=i.doc.lineAt(t?s.to+1:s.from-1),l=o.length+1;if(t){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+i.lineBreak});for(let a of s.ranges)n.push(I.range(Math.min(i.doc.length,a.anchor+l),Math.min(i.doc.length,a.head+l)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:i.lineBreak+o.text});for(let a of s.ranges)n.push(I.range(a.anchor-l,a.head-l))}}return r.length?(e(i.update({changes:r,scrollIntoView:!0,selection:I.create(n,i.selection.mainIndex),userEvent:"move.line"})),!0):!1}var Q2=({state:i,dispatch:e})=>wd(i,e,!1),e5=({state:i,dispatch:e})=>wd(i,e,!0);function kd(i,e,t){if(i.readOnly)return!1;let r=[];for(let s of oo(i))t?r.push({from:s.from,insert:i.doc.slice(s.from,s.to)+i.lineBreak}):r.push({from:s.to,insert:i.lineBreak+i.doc.slice(s.from,s.to)});let n=i.changes(r);return e(i.update({changes:n,selection:i.selection.map(n,t?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}var t5=({state:i,dispatch:e})=>kd(i,e,!1),r5=({state:i,dispatch:e})=>kd(i,e,!0),i5=i=>{if(i.state.readOnly)return!1;let{state:e}=i,t=e.changes(oo(e).map(({from:n,to:s})=>(n>0?n--:s<e.doc.length&&s++,{from:n,to:s}))),r=Mi(e.selection,n=>{let s;if(i.lineWrapping){let o=i.lineBlockAt(n.head),l=i.coordsAtPos(n.head,n.assoc||1);l&&(s=o.bottom+i.documentTop-l.bottom+i.defaultLineHeight/2)}return i.moveVertically(n,!0,s)}).map(t);return i.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function n5(i,e){if(/\(\)|\[\]|\{\}/.test(i.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Ze(i).resolveInner(e),r=t.childBefore(e),n=t.childAfter(e),s;return r&&n&&r.to<=e&&n.from>=e&&(s=r.type.prop(ee.closedBy))&&s.indexOf(n.name)>-1&&i.doc.lineAt(r.to).from==i.doc.lineAt(n.from).from&&!/\S/.test(i.sliceDoc(r.to,n.from))?{from:r.to,to:n.from}:null}var Gf=Sd(!1),s5=Sd(!0);function Sd(i){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(n=>{let{from:s,to:o}=n,l=e.doc.lineAt(s),a=!i&&s==o&&n5(e,s);i&&(s=o=(o<=l.to?l:e.doc.lineAt(o)).to);let h=new jr(e,{simulateBreak:s,simulateDoubleBreak:!!a}),c=Ys(h,s);for(c==null&&(c=vr(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:s,to:o}=a:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let u=["",Ai(e,c)];return a&&u.push(Ai(e,h.lineIndent(l.from,-1))),{changes:{from:s,to:o,insert:se.of(u)},range:I.cursor(s+1+u[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function T0(i,e){let t=-1;return i.changeByRange(r=>{let n=[];for(let o=r.from;o<=r.to;){let l=i.doc.lineAt(o);l.number>t&&(r.empty||r.to>l.from)&&(e(l,n,r),t=l.number),o=l.to+1}let s=i.changes(n);return{changes:n,range:I.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}var o5=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=Object.create(null),r=new jr(i,{overrideIndentation:s=>{let o=t[s];return o??-1}}),n=T0(i,(s,o,l)=>{let a=Ys(r,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let h=/^\s*/.exec(s.text)[0],c=Ai(i,a);(h!=c||l.from<s.from+h.length)&&(t[s.from]=a,o.push({from:s.from,to:s.from+h.length,insert:c}))});return n.changes.empty||e(i.update(n,{userEvent:"indent"})),!0},l5=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(T0(i,(t,r)=>{r.push({from:t.from,insert:i.facet(xn)})}),{userEvent:"input.indent"})),!0),a5=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(T0(i,(t,r)=>{let n=/^\s*/.exec(t.text)[0];if(!n)return;let s=vr(n,i.tabSize),o=0,l=Ai(i,Math.max(0,s-Ar(i)));for(;o<n.length&&o<l.length&&n.charCodeAt(o)==l.charCodeAt(o);)o++;r.push({from:t.from+o,to:t.from+n.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),h5=i=>(i.setTabFocusMode(),!0);var c5=[{key:"Ctrl-b",run:ed,shift:hd,preventDefault:!0},{key:"Ctrl-f",run:td,shift:cd},{key:"Ctrl-p",run:nd,shift:dd},{key:"Ctrl-n",run:sd,shift:md},{key:"Ctrl-a",run:T2,shift:H2},{key:"Ctrl-e",run:D2,shift:q2},{key:"Ctrl-d",run:bd},{key:"Ctrl-h",run:C0},{key:"Ctrl-k",run:Y2},{key:"Ctrl-Alt-h",run:xd},{key:"Ctrl-o",run:J2},{key:"Ctrl-t",run:Z2},{key:"Ctrl-v",run:S0}],u5=[{key:"ArrowLeft",run:ed,shift:hd,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:b2,shift:O2,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:A2,shift:N2,preventDefault:!0},{key:"ArrowRight",run:td,shift:cd,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:y2,shift:z2,preventDefault:!0},{mac:"Cmd-ArrowRight",run:M2,shift:F2,preventDefault:!0},{key:"ArrowUp",run:nd,shift:dd,preventDefault:!0},{mac:"Cmd-ArrowUp",run:qf,shift:Vf},{mac:"Ctrl-ArrowUp",run:Nf,shift:Ff},{key:"ArrowDown",run:sd,shift:md,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Wf,shift:$f},{mac:"Ctrl-ArrowDown",run:S0,shift:Hf},{key:"PageUp",run:Nf,shift:Ff},{key:"PageDown",run:S0,shift:Hf},{key:"Home",run:C2,shift:P2,preventDefault:!0},{key:"Mod-Home",run:qf,shift:Vf},{key:"End",run:S2,shift:I2,preventDefault:!0},{key:"Mod-End",run:Wf,shift:$f},{key:"Enter",run:Gf,shift:Gf},{key:"Mod-a",run:W2},{key:"Backspace",run:C0,shift:C0,preventDefault:!0},{key:"Delete",run:bd,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:xd,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:j2,preventDefault:!0},{mac:"Mod-Backspace",run:X2,preventDefault:!0},{mac:"Mod-Delete",run:_2,preventDefault:!0}].concat(c5.map(i=>({mac:i.key,run:i.run,shift:i.shift}))),Cd=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:w2,shift:L2},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:k2,shift:R2},{key:"Alt-ArrowUp",run:Q2},{key:"Shift-Alt-ArrowUp",run:t5},{key:"Alt-ArrowDown",run:e5},{key:"Shift-Alt-ArrowDown",run:r5},{key:"Mod-Alt-ArrowUp",run:G2},{key:"Mod-Alt-ArrowDown",run:U2},{key:"Escape",run:K2},{key:"Mod-Enter",run:s5},{key:"Alt-l",mac:"Ctrl-l",run:V2},{key:"Mod-i",run:$2,preventDefault:!0},{key:"Mod-[",run:a5},{key:"Mod-]",run:l5},{key:"Mod-Alt-\\",run:o5},{key:"Shift-Mod-k",run:i5},{key:"Shift-Mod-\\",run:E2},{key:"Mod-/",run:t2},{key:"Alt-A",run:i2},{key:"Ctrl-m",mac:"Shift-Alt-m",run:h5}].concat(u5);var Ad=typeof String.prototype.normalize=="function"?i=>i.normalize("NFKD"):i=>i,lo=class{constructor(e,t,r=0,n=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,n),this.bufferStart=r,this.normalize=s?l=>s(Ad(l)):Ad,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Xe(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=qi(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=vt(e);let n=this.normalize(t);if(n.length)for(let s=0,o=r;;s++){let l=n.charCodeAt(s),a=this.match(l,o,this.bufferPos+this.bufferStart);if(s==n.length-1){if(a)return this.value=a,this;break}o==r&&s<t.length&&t.charCodeAt(s)==l&&o++}}}match(e,t,r){let n=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?n={from:this.matches[s+1],to:r}:(this.matches[s]++,l=!0)),l||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:t,to:r}:this.matches.push(1,t)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}};typeof Symbol<"u"&&(lo.prototype[Symbol.iterator]=function(){return this});var Td={from:-1,to:-1,match:/.*/.exec("")},Dd="gm"+(/x/.unicode==null?"":"u"),B0=class{constructor(e,t,r,n=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=Td,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new ho(e,t,r,n,s);this.re=new RegExp(t,Dd+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let o=e.lineAt(n);this.curLineStart=o.from,this.matchPos=co(e,n),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,n=r+t[0].length;if(this.matchPos=co(this.text,n+(r==n?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<n||r>this.value.to)&&(!this.test||this.test(r,n,t)))return this.value={from:r,to:n,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}},D0=new WeakMap,ao=class i{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let n=D0.get(e);if(!n||n.from>=r||n.to<=t){let l=new i(t,e.sliceString(t,r));return D0.set(e,l),l}if(n.from==t&&n.to==r)return n;let{text:s,from:o}=n;return o>t&&(s=e.sliceString(t,o)+s,o=t),n.to<r&&(s+=e.sliceString(n.to,r)),D0.set(e,new i(o,s)),new i(t,s.slice(t-o,r-o))}},ho=class{constructor(e,t,r,n,s){this.text=e,this.to=s,this.done=!1,this.value=Td,this.matchPos=co(e,n),this.re=new RegExp(t,Dd+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=ao.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let r=this.flat.from+t.index,n=r+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,n,t)))return this.value={from:r,to:n,match:t},this.matchPos=co(this.text,n+(r==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ao.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}};typeof Symbol<"u"&&(B0.prototype[Symbol.iterator]=ho.prototype[Symbol.iterator]=function(){return this});function co(i,e){if(e>=i.length)return e;let t=i.lineAt(e),r;for(;e<t.to&&(r=t.text.charCodeAt(e-t.from))>=56320&&r<57344;)e++;return e}var d5={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Bd=H.define({combine(i){return it(i,d5,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function Ed(i){let e=[b5,v5];return i&&e.push(Bd.of(i)),e}var m5=X.mark({class:"cm-selectionMatch"}),p5=X.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Md(i,e,t,r){return(t==0||i(e.sliceDoc(t-1,t))!=Ee.Word)&&(r==e.doc.length||i(e.sliceDoc(r,r+1))!=Ee.Word)}function g5(i,e,t,r){return i(e.sliceDoc(t,t+1))==Ee.Word&&i(e.sliceDoc(r-1,r))==Ee.Word}var v5=Se.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.selectionSet||i.docChanged||i.viewportChanged)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let e=i.state.facet(Bd),{state:t}=i,r=t.selection;if(r.ranges.length>1)return X.none;let n=r.main,s,o=null;if(n.empty){if(!e.highlightWordAroundCursor)return X.none;let a=t.wordAt(n.head);if(!a)return X.none;o=t.charCategorizer(n.head),s=t.sliceDoc(a.from,a.to)}else{let a=n.to-n.from;if(a<e.minSelectionLength||a>200)return X.none;if(e.wholeWords){if(s=t.sliceDoc(n.from,n.to),o=t.charCategorizer(n.head),!(Md(o,t,n.from,n.to)&&g5(o,t,n.from,n.to)))return X.none}else if(s=t.sliceDoc(n.from,n.to),!s)return X.none}let l=[];for(let a of i.visibleRanges){let h=new lo(t.doc,s,a.from,a.to);for(;!h.next().done;){let{from:c,to:u}=h.value;if((!o||Md(o,t,c,u))&&(n.empty&&c<=n.from&&u>=n.to?l.push(p5.range(c,u)):(c>=n.to||u<=n.from)&&l.push(m5.range(c,u)),l.length>e.maxMatches))return X.none}}return X.set(l)}},{decorations:i=>i.decorations}),b5=K.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});var fo=class{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}},Jr=class i{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let n=r.facet(Yt).markerFilter;n&&(e=n(e,r));let s=e.slice().sort((p,v)=>p.from-v.from||p.to-v.to),o=new Et,l=[],a=0,h=r.doc.iter(),c=0,u=r.doc.length;for(let p=0;;){let v=p==s.length?null:s[p];if(!v&&!l.length)break;let y,w;if(l.length)y=a,w=l.reduce((M,E)=>Math.min(M,E.to),v&&v.from>y?v.from:1e8);else{if(y=v.from,y>u)break;w=v.to,l.push(v),p++}for(;p<s.length;){let M=s[p];if(M.from==y&&(M.to>M.from||M.to==y))l.push(M),p++,w=Math.min(M.to,w);else{w=Math.min(M.from,w);break}}w=Math.min(w,u);let S=!1;if(l.some(M=>M.from==y&&(M.to==w||w==u))&&(S=y==w,!S&&w-y<10)){let M=y-(c+h.value.length);M>0&&(h.next(M),c=y);for(let E=y;;){if(E>=w){S=!0;break}if(!h.lineBreak&&c+h.value.length>E)break;E=c+h.value.length,c+=h.value.length,h.next()}}let A=E5(l);if(S)o.add(y,y,X.widget({widget:new E0(A),diagnostics:l.slice()}));else{let M=l.reduce((E,T)=>T.markClass?E+" "+T.markClass:E,"");o.add(y,w,X.mark({class:"cm-lintRange cm-lintRange-"+A+M,diagnostics:l.slice(),inclusiveEnd:l.some(E=>E.to>w)}))}if(a=w,a==u)break;for(let M=0;M<l.length;M++)l[M].to<=a&&l.splice(M--,1)}let d=o.finish();return new i(d,t,Ti(d))}};function Ti(i,e=null,t=0){let r=null;return i.between(t,1e9,(n,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!r)r=new fo(n,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new fo(r.from,s,r.diagnostic)}}),r}function y5(i,e){let t=e.pos,r=e.end||t,n=i.state.facet(Yt).hideOn(i,t,r);if(n!=null)return n;let s=i.startState.doc.lineAt(e.pos);return!!(i.effects.some(o=>o.is(O0))||i.changes.touchesRange(s.from,Math.max(s.to,r)))}function x5(i,e){return i.field(Ht,!1)?e:e.concat(te.appendConfig.of(Fd))}function w5(i,e){return{effects:x5(i,[O0.of(e)])}}var O0=te.define(),Ld=te.define(),Rd=te.define(),Ht=Ie.define({create(){return new Jr(X.none,null,null)},update(i,e){if(e.docChanged&&i.diagnostics.size){let t=i.diagnostics.map(e.changes),r=null,n=i.panel;if(i.selected){let s=e.changes.mapPos(i.selected.from,1);r=Ti(t,i.selected.diagnostic,s)||Ti(t,null,s)}!t.size&&n&&e.state.facet(Yt).autoPanel&&(n=null),i=new Jr(t,n,r)}for(let t of e.effects)if(t.is(O0)){let r=e.state.facet(Yt).autoPanel?t.value.length?po.open:null:i.panel;i=Jr.init(t.value,r,e.state)}else t.is(Ld)?i=new Jr(i.diagnostics,t.value?po.open:null,i.selected):t.is(Rd)&&(i=new Jr(i.diagnostics,i.panel,t.value));return i},provide:i=>[on.from(i,e=>e.panel),K.decorations.from(i,e=>e.diagnostics)]});var k5=X.mark({class:"cm-lintRange cm-lintRange-active"});function S5(i,e,t){let{diagnostics:r}=i.state.field(Ht),n,s=-1,o=-1;r.between(e-(t<0?1:0),e+(t>0?1:0),(a,h,{spec:c})=>{if(e>=a&&e<=h&&(a==h||(e>a||t>0)&&(e<h||t<0)))return n=c.diagnostics,s=a,o=h,!1});let l=i.state.facet(Yt).tooltipFilter;return n&&l&&(n=l(n,i.state)),n?{pos:s,end:o,above:i.state.doc.lineAt(s).to<o,create(){return{dom:C5(i,n)}}}:null}function C5(i,e){return nt("ul",{class:"cm-tooltip-lint"},e.map(t=>Nd(i,t,!1)))}var Od=i=>{let e=i.state.field(Ht,!1);return!e||!e.panel?!1:(i.dispatch({effects:Ld.of(!1)}),!0)};var A5=Se.fromClass(class{constructor(i){this.view=i,this.timeout=-1,this.set=!0;let{delay:e}=i.state.facet(Yt);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let i=Date.now();if(i<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-i);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(Yt);t.length&&M5(t.map(r=>Promise.resolve(r(this.view))),r=>{this.view.state.doc==e.doc&&this.view.dispatch(w5(this.view.state,r.reduce((n,s)=>n.concat(s))))},r=>{Fe(this.view.state,r)})}}update(i){let e=i.state.facet(Yt);(i.docChanged||e!=i.startState.facet(Yt)||e.needsRefresh&&e.needsRefresh(i))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function M5(i,e,t){let r=[],n=-1;for(let s of i)s.then(o=>{r.push(o),clearTimeout(n),r.length==i.length?e(r):n=setTimeout(()=>e(r),200)},t)}var Yt=H.define({combine(i){return{sources:i.map(e=>e.source).filter(e=>e!=null),...it(i.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:zd,tooltipFilter:zd,needsRefresh:(e,t)=>e?t?r=>e(r)||t(r):e:t,hideOn:(e,t)=>e?t?(r,n,s)=>e(r,n,s)||t(r,n,s):e:t,autoPanel:(e,t)=>e||t})}}});function zd(i,e){return i?e?(t,r)=>e(i(t,r),r):i:e}function Id(i,e={}){return[Yt.of({source:i,config:e}),A5,Fd]}function Pd(i){let e=[];if(i)e:for(let{name:t}of i){for(let r=0;r<t.length;r++){let n=t[r];if(/[a-zA-Z]/.test(n)&&!e.some(s=>s.toLowerCase()==n.toLowerCase())){e.push(n);continue e}}e.push("")}return e}function Nd(i,e,t){var r;let n=t?Pd(e.actions):[];return nt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},nt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(i):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let l=!1,a=p=>{if(p.preventDefault(),l)return;l=!0;let v=Ti(i.state.field(Ht).diagnostics,e);v&&s.apply(i,v.from,v.to)},{name:h}=s,c=n[o]?h.indexOf(n[o]):-1,u=c<0?h:[h.slice(0,c),nt("u",h.slice(c,c+1)),h.slice(c+1)],d=s.markClass?" "+s.markClass:"";return nt("button",{type:"button",class:"cm-diagnosticAction"+d,onclick:a,onmousedown:a,"aria-label":` Action: ${h}${c<0?"":` (access key "${n[o]})"`}.`},u)}),e.source&&nt("div",{class:"cm-diagnosticSource"},e.source))}var E0=class extends kt{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return nt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}},mo=class{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Nd(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}},po=class i{constructor(e){this.view=e,this.items=[];let t=n=>{if(!(n.ctrlKey||n.altKey||n.metaKey)){if(n.keyCode==27)Od(this.view),this.view.focus();else if(n.keyCode==38||n.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(n.keyCode==40||n.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(n.keyCode==36)this.moveSelection(0);else if(n.keyCode==35)this.moveSelection(this.items.length-1);else if(n.keyCode==13)this.view.focus();else if(n.keyCode>=65&&n.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=Pd(s.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==n.keyCode){let a=Ti(this.view.state.field(Ht).diagnostics,s);a&&s.actions[l].apply(e,a.from,a.to)}}else return;n.preventDefault()}},r=n=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(n.target)&&this.moveSelection(s)};this.list=nt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:r}),this.dom=nt("div",{class:"cm-panel-lint"},this.list,nt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Od(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(Ht).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Ht),r=0,n=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(l,a,{spec:h})=>{for(let c of h.diagnostics){if(o.has(c))continue;o.add(c);let u=-1,d;for(let p=r;p<this.items.length;p++)if(this.items[p].diagnostic==c){u=p;break}u<0?(d=new mo(this.view,c),this.items.splice(r,0,d),n=!0):(d=this.items[u],u>r&&(this.items.splice(r,u-r),n=!0)),t&&d.diagnostic==t.diagnostic?d.dom.hasAttribute("aria-selected")||(d.dom.setAttribute("aria-selected","true"),s=d):d.dom.hasAttribute("aria-selected")&&d.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();this.items.length==0&&(this.items.push(new mo(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:a})=>{let h=a.height/this.list.offsetHeight;l.top<a.top?this.list.scrollTop-=(a.top-l.top)/h:l.bottom>a.bottom&&(this.list.scrollTop+=(l.bottom-a.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function t(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Ht),r=Ti(t.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Rd.of(r)})}static open(e){return new i(e)}};function T5(i,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(i)}</svg>')`}function uo(i){return T5(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${i}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}var D5=K.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:uo("#d11")},".cm-lintRange-warning":{backgroundImage:uo("orange")},".cm-lintRange-info":{backgroundImage:uo("#999")},".cm-lintRange-hint":{backgroundImage:uo("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function B5(i){return i=="error"?4:i=="warning"?3:i=="info"?2:1}function E5(i){let e="hint",t=1;for(let r of i){let n=B5(r.severity);n>t&&(t=n,e=r.severity)}return e}var Fd=[Ht,K.decorations.compute([Ht],i=>{let{selected:e,panel:t}=i.field(Ht);return!e||!t||e.from==e.to?X.none:X.set([k5.range(e.from,e.to)])}),Ps(S5,{hideOn:y5}),D5];var O5=K.theme({"&":{fontSize:"14px",backgroundColor:"transparent"},".cm-content":{fontFamily:"'JetBrains Mono', 'SF Mono', 'Fira Code', 'Consolas', monospace",caretColor:"#daa550",padding:"8px 0"},".cm-cursor, .cm-dropCursor":{borderLeftColor:"#daa550"},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground":{backgroundColor:"#3a3a50"},".cm-gutters":{backgroundColor:"transparent",color:"#646870",border:"none",paddingLeft:"4px"},".cm-activeLineGutter":{backgroundColor:"transparent",color:"#aab0ba"},".cm-activeLine":{backgroundColor:"transparent"},".cm-line":{padding:"0 8px"},".cm-tooltip":{backgroundColor:"#24242e",border:"1px solid #32323a",color:"#c8ccd4"},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:"#3a3a50"}},".cm-tooltip-hover":{padding:"4px 8px",maxWidth:"500px"},".cm-type-tooltip code":{fontFamily:"'JetBrains Mono', 'SF Mono', 'Fira Code', monospace",fontSize:"13px",color:"#ffcb6b"},".cm-type-tooltip .cm-type-doc":{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #32323a",fontSize:"12px",color:"#9da5b4",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderBottom:"2px solid #ff5370"},".cm-diagnostic-warning":{borderBottom:"2px solid #ffcb6b"}},{dark:!0}),z5=Ci.define([{tag:P.keyword,color:"#c792ea"},{tag:P.operator,color:"#89ddff"},{tag:P.string,color:"#c3e88d"},{tag:P.number,color:"#f78c6c"},{tag:P.bool,color:"#f78c6c"},{tag:P.comment,color:"#646870",fontStyle:"italic"},{tag:P.typeName,color:"#ffcb6b"},{tag:P.definition(P.variableName),color:"#82aaff"},{tag:P.variableName,color:"#c8ccd4"},{tag:P.function(P.variableName),color:"#82aaff"},{tag:P.propertyName,color:"#c8ccd4"},{tag:P.meta,color:"#daa550"},{tag:P.punctuation,color:"#89ddff"}]);function L5(i){switch(i){case"value":return"variable";case"type":return"type";case"module":return"namespace";case"module_type":return"interface";case"constructor":return"enum";case"label":return"property";default:return"variable"}}function R5(i){return async e=>{let t=e.matchBefore(/[\w.]+$/);if(!t&&!e.explicit)return null;let r=e.state.doc.toString(),n=e.pos;try{let s=await i.complete(r,n);return!s||s.length===0?null:{from:t?t.from:e.pos,options:s.map(o=>({label:o.label,type:L5(o.kind),detail:o.detail}))}}catch{return null}}}function I5(i){return Ps(async(e,t)=>{let r=e.state.doc.toString();try{let n=await i.typeAt(r,t);return!n||!n.info?null:{pos:n.info.from,end:n.info.to,above:!0,create(){let s=document.createElement("div");s.className="cm-type-tooltip";let o=document.createElement("code");if(o.textContent=n.info.type,s.appendChild(o),n.info.doc){let l=document.createElement("div");l.className="cm-type-doc",l.textContent=n.info.doc,s.appendChild(l)}return{dom:s}}}}catch{return null}},{hoverTime:300})}function P5(i){return Id(async e=>{let t=e.state.doc.toString();if(!t.trim())return[];try{let r=await i.diagnostics(t);return!r||!r.items?[]:r.items.map(n=>({from:n.from,to:Math.min(n.to,t.length),severity:n.severity,message:n.message}))}catch{return[]}},{delay:500})}function z0(i,e,t){let{onChange:r,onExecute:n,onExecuteAndMoveNext:s,onEscape:o,wsClient:l}=t,a=[Ks.define(wf).extension,Wu(),qu(),Vu(),Hu(),gf(),Rf(),cf(),Yf(),Iu(),Fu(),Ed(),O5,ff(z5),fe.tabSize.of(2),K.updateListener.of(c=>{c.docChanged&&r(c.state.doc.toString())}),an.of([{key:"Ctrl-Enter",run:()=>(n(),!0)},{key:"Cmd-Enter",run:()=>(n(),!0)},{key:"Shift-Enter",run:()=>(s(),!0)},{key:"Escape",run:()=>(o(),!0)},...Cd,...Zf])];return l&&a.push(Pf({override:[R5(l)],activateOnTyping:!0}),I5(l),P5(l)),new K({parent:i,doc:e,extensions:a})}var lt=class i{constructor(e,t,r){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=r}static range(e,t){return t?!e||!e.loc||!t.loc||e.loc.lexer!==t.loc.lexer?null:new i(e.loc.lexer,e.loc.start,t.loc.end):e&&e.loc}},mt=class i{constructor(e,t){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=t}range(e,t){return new i(t,lt.range(this,e))}},R=class i{constructor(e,t){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var r="KaTeX parse error: "+e,n,s,o=t&&t.loc;if(o&&o.start<=o.end){var l=o.lexer.input;n=o.start,s=o.end,n===l.length?r+=" at end of input: ":r+=" at position "+(n+1)+": ";var a=l.slice(n,s).replace(/[^]/g,"$&\u0332"),h;n>15?h="\u2026"+l.slice(n-15,n):h=l.slice(0,n);var c;s+15<l.length?c=l.slice(s,s+15)+"\u2026":c=l.slice(s),r+=h+a+c}var u=new Error(r);return u.name="ParseError",u.__proto__=i.prototype,u.position=n,n!=null&&s!=null&&(u.length=s-n),u.rawMessage=e,u}};R.prototype.__proto__=Error.prototype;var N5=/([A-Z])/g,oh=i=>i.replace(N5,"-$1").toLowerCase(),F5={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},H5=/[&><"']/g,Ke=i=>String(i).replace(H5,e=>F5[e]),Tn=i=>i.type==="ordgroup"||i.type==="color"?i.body.length===1?Tn(i.body[0]):i:i.type==="font"?Tn(i.body):i,q5=new Set(["mathord","textord","atom"]),dr=i=>q5.has(Tn(i).type),W5=i=>{var e=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(i);return e?e[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(e[1])?null:e[1].toLowerCase():"_relative"},To={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:i=>"#"+i},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(i,e)=>(e.push(i),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:i=>Math.max(0,i),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:i=>Math.max(0,i),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:i=>Math.max(0,i),cli:"-e, --max-expand <n>",cliProcessor:i=>i==="Infinity"?1/0:parseInt(i)},globalGroup:{type:"boolean",cli:!1}};function V5(i){if(i.default)return i.default;var e=i.type,t=Array.isArray(e)?e[0]:e;if(typeof t!="string")return t.enum[0];switch(t){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}var Bn=class{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var t in To)if(To.hasOwnProperty(t)){var r=To[t];this[t]=e[t]!==void 0?r.processor?r.processor(e[t]):e[t]:V5(r)}}reportNonstrict(e,t,r){var n=this.strict;if(typeof n=="function"&&(n=n(e,t,r)),!(!n||n==="ignore")){if(n===!0||n==="error")throw new R("LaTeX-incompatible input and strict mode is set to 'error': "+(t+" ["+e+"]"),r);n==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+n+"': "+t+" ["+e+"]"))}}useStrictBehavior(e,t,r){var n=this.strict;if(typeof n=="function")try{n=n(e,t,r)}catch{n="error"}return!n||n==="ignore"?!1:n===!0||n==="error"?!0:n==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+n+"': "+t+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var t=W5(e.url);if(t==null)return!1;e.protocol=t}var r=typeof this.trust=="function"?this.trust(e):this.trust;return!!r}},Xt=class{constructor(e,t,r){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=r}sup(){return _t[$5[this.id]]}sub(){return _t[G5[this.id]]}fracNum(){return _t[U5[this.id]]}fracDen(){return _t[K5[this.id]]}cramp(){return _t[j5[this.id]]}text(){return _t[Y5[this.id]]}isTight(){return this.size>=2}},lh=0,Bo=1,Bi=2,fr=3,En=4,Tt=5,Ei=6,et=7,_t=[new Xt(lh,0,!1),new Xt(Bo,0,!0),new Xt(Bi,1,!1),new Xt(fr,1,!0),new Xt(En,2,!1),new Xt(Tt,2,!0),new Xt(Ei,3,!1),new Xt(et,3,!0)],$5=[En,Tt,En,Tt,Ei,et,Ei,et],G5=[Tt,Tt,Tt,Tt,et,et,et,et],U5=[Bi,fr,En,Tt,Ei,et,Ei,et],K5=[fr,fr,Tt,Tt,et,et,et,et],j5=[Bo,Bo,fr,fr,Tt,Tt,et,et],Y5=[lh,Bo,Bi,fr,Bi,fr,Bi,fr],Z={DISPLAY:_t[lh],TEXT:_t[Bi],SCRIPT:_t[En],SCRIPTSCRIPT:_t[Ei]},j0=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function X5(i){for(var e=0;e<j0.length;e++)for(var t=j0[e],r=0;r<t.blocks.length;r++){var n=t.blocks[r];if(i>=n[0]&&i<=n[1])return t.name}return null}var Do=[];j0.forEach(i=>i.blocks.forEach(e=>Do.push(...e)));function gm(i){for(var e=0;e<Do.length;e+=2)if(i>=Do[e]&&i<=Do[e+1])return!0;return!1}var Di=80,_5=function(e,t){return"M95,"+(622+e+t)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},J5=function(e,t){return"M263,"+(601+e+t)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},Z5=function(e,t){return"M983 "+(10+e+t)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},Q5=function(e,t){return"M424,"+(2398+e+t)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+t+`
h400000v`+(40+e)+"h-400000z"},e3=function(e,t){return"M473,"+(2713+e+t)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+t+"h400000v"+(40+e)+"H1017.7z"},t3=function(e){var t=e/2;return"M400000 "+e+" H0 L"+t+" 0 l65 45 L145 "+(e-80)+" H400000z"},r3=function(e,t,r){var n=r-54-t-e;return"M702 "+(e+t)+"H400000"+(40+e)+`
H742v`+n+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+t+"H400000v"+(40+e)+"H742z"},i3=function(e,t,r){t=1e3*t;var n="";switch(e){case"sqrtMain":n=_5(t,Di);break;case"sqrtSize1":n=J5(t,Di);break;case"sqrtSize2":n=Z5(t,Di);break;case"sqrtSize3":n=Q5(t,Di);break;case"sqrtSize4":n=e3(t,Di);break;case"sqrtTall":n=r3(t,Di,r)}return n},n3=function(e,t){switch(e){case"\u239C":return"M291 0 H417 V"+t+" H291z M291 0 H417 V"+t+" H291z";case"\u2223":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z";case"\u2225":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z"+("M367 0 H410 V"+t+" H367z M367 0 H410 V"+t+" H367z");case"\u239F":return"M457 0 H583 V"+t+" H457z M457 0 H583 V"+t+" H457z";case"\u23A2":return"M319 0 H403 V"+t+" H319z M319 0 H403 V"+t+" H319z";case"\u23A5":return"M263 0 H347 V"+t+" H263z M263 0 H347 V"+t+" H263z";case"\u23AA":return"M384 0 H504 V"+t+" H384z M384 0 H504 V"+t+" H384z";case"\u23D0":return"M312 0 H355 V"+t+" H312z M312 0 H355 V"+t+" H312z";case"\u2016":return"M257 0 H300 V"+t+" H257z M257 0 H300 V"+t+" H257z"+("M478 0 H521 V"+t+" H478z M478 0 H521 V"+t+" H478z");default:return""}},Hd={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},s3=function(e,t){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+t+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+t+" v1759 h84z";case"vert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+" v585 h43z";case"doublevert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+` v585 h43z
M367 15 v585 v`+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+t+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+t+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+t+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v602 h84z
M403 1759 V0 H319 V1759 v`+t+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v602 h84z
M347 1759 V0 h-84 V1759 v`+t+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(t+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(t+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(t+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(t+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}},Qr=class{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){var e=t=>t.toText();return this.children.map(e).join("")}},Jt={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},go={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},qd={\u00C5:"A",\u00D0:"D",\u00DE:"o",\u00E5:"a",\u00F0:"d",\u00FE:"o",\u0410:"A",\u0411:"B",\u0412:"B",\u0413:"F",\u0414:"A",\u0415:"E",\u0416:"K",\u0417:"3",\u0418:"N",\u0419:"N",\u041A:"K",\u041B:"N",\u041C:"M",\u041D:"H",\u041E:"O",\u041F:"N",\u0420:"P",\u0421:"C",\u0422:"T",\u0423:"y",\u0424:"O",\u0425:"X",\u0426:"U",\u0427:"h",\u0428:"W",\u0429:"W",\u042A:"B",\u042B:"X",\u042C:"B",\u042D:"3",\u042E:"X",\u042F:"R",\u0430:"a",\u0431:"b",\u0432:"a",\u0433:"r",\u0434:"y",\u0435:"e",\u0436:"m",\u0437:"e",\u0438:"n",\u0439:"n",\u043A:"n",\u043B:"n",\u043C:"m",\u043D:"n",\u043E:"o",\u043F:"n",\u0440:"p",\u0441:"c",\u0442:"o",\u0443:"y",\u0444:"b",\u0445:"x",\u0446:"n",\u0447:"n",\u0448:"w",\u0449:"w",\u044A:"a",\u044B:"m",\u044C:"a",\u044D:"e",\u044E:"m",\u044F:"r"};function o3(i,e){Jt[i]=e}function ah(i,e,t){if(!Jt[e])throw new Error("Font metrics not found for font: "+e+".");var r=i.charCodeAt(0),n=Jt[e][r];if(!n&&i[0]in qd&&(r=qd[i[0]].charCodeAt(0),n=Jt[e][r]),!n&&t==="text"&&gm(r)&&(n=Jt[e][77]),n)return{depth:n[0],height:n[1],italic:n[2],skew:n[3],width:n[4]}}var L0={};function l3(i){var e;if(i>=5?e=0:i>=3?e=1:e=2,!L0[e]){var t=L0[e]={cssEmPerMu:go.quad[e]/18};for(var r in go)go.hasOwnProperty(r)&&(t[r]=go[r][e])}return L0[e]}var a3=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],Wd=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Vd=function(e,t){return t.size<2?e:a3[e-1][t.size-1]},Eo=class i{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||i.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=Wd[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var t={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return new i(t)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:Vd(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:Wd[e-1]})}havingBaseStyle(e){e=e||this.style.text();var t=Vd(i.BASESIZE,e);return this.size===t&&this.textSize===i.BASESIZE&&this.style===e?this:this.extend({style:e,size:t})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==i.BASESIZE?["sizing","reset-size"+this.size,"size"+i.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=l3(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}};Eo.BASESIZE=6;var Y0={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},h3={ex:!0,em:!0,mu:!0},vm=function(e){return typeof e!="string"&&(e=e.unit),e in Y0||e in h3||e==="ex"},we=function(e,t){var r;if(e.unit in Y0)r=Y0[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if(e.unit==="mu")r=t.fontMetrics().cssEmPerMu;else{var n;if(t.style.isTight()?n=t.havingStyle(t.style.text()):n=t,e.unit==="ex")r=n.fontMetrics().xHeight;else if(e.unit==="em")r=n.fontMetrics().quad;else throw new R("Invalid unit: '"+e.unit+"'");n!==t&&(r*=n.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*r,t.maxSize)},N=function(e){return+e.toFixed(4)+"em"},Br=function(e){return e.filter(t=>t).join(" ")},bm=function(e,t,r){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=r||{},t){t.style.isTight()&&this.classes.push("mtight");var n=t.getColor();n&&(this.style.color=n)}},ym=function(e){var t=document.createElement(e);t.className=Br(this.classes);for(var r in this.style)this.style.hasOwnProperty(r)&&(t.style[r]=this.style[r]);for(var n in this.attributes)this.attributes.hasOwnProperty(n)&&t.setAttribute(n,this.attributes[n]);for(var s=0;s<this.children.length;s++)t.appendChild(this.children[s].toNode());return t},c3=/[\s"'>/=\x00-\x1f]/,xm=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+Ke(Br(this.classes))+'"');var r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=oh(n)+":"+this.style[n]+";");r&&(t+=' style="'+Ke(r)+'"');for(var s in this.attributes)if(this.attributes.hasOwnProperty(s)){if(c3.test(s))throw new R("Invalid attribute name '"+s+"'");t+=" "+s+'="'+Ke(this.attributes[s])+'"'}t+=">";for(var o=0;o<this.children.length;o++)t+=this.children[o].toMarkup();return t+="</"+e+">",t},ei=class{constructor(e,t,r,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,bm.call(this,e,r,n),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return this.classes.includes(e)}toNode(){return ym.call(this,"span")}toMarkup(){return xm.call(this,"span")}},On=class{constructor(e,t,r,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,bm.call(this,t,n),this.children=r||[],this.setAttribute("href",e)}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return this.classes.includes(e)}toNode(){return ym.call(this,"a")}toMarkup(){return xm.call(this,"a")}},X0=class{constructor(e,t,r){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=r}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var t in this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e}toMarkup(){var e='<img src="'+Ke(this.src)+'"'+(' alt="'+Ke(this.alt)+'"'),t="";for(var r in this.style)this.style.hasOwnProperty(r)&&(t+=oh(r)+":"+this.style[r]+";");return t&&(e+=' style="'+Ke(t)+'"'),e+="'/>",e}},u3={\u00EE:"\u0131\u0302",\u00EF:"\u0131\u0308",\u00ED:"\u0131\u0301",\u00EC:"\u0131\u0300"},at=class{constructor(e,t,r,n,s,o,l,a){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=r||0,this.italic=n||0,this.skew=s||0,this.width=o||0,this.classes=l||[],this.style=a||{},this.maxFontSize=0;var h=X5(this.text.charCodeAt(0));h&&this.classes.push(h+"_fallback"),/[]/.test(this.text)&&(this.text=u3[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),t=null;this.italic>0&&(t=document.createElement("span"),t.style.marginRight=N(this.italic)),this.classes.length>0&&(t=t||document.createElement("span"),t.className=Br(this.classes));for(var r in this.style)this.style.hasOwnProperty(r)&&(t=t||document.createElement("span"),t.style[r]=this.style[r]);return t?(t.appendChild(e),t):e}toMarkup(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=Ke(Br(this.classes)),t+='"');var r="";this.italic>0&&(r+="margin-right:"+this.italic+"em;");for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=oh(n)+":"+this.style[n]+";");r&&(e=!0,t+=' style="'+Ke(r)+'"');var s=Ke(this.text);return e?(t+=">",t+=s,t+="</span>",t):s}},qt=class{constructor(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);for(var n=0;n<this.children.length;n++)t.appendChild(this.children[n].toNode());return t}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+Ke(this.attributes[t])+'"');e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</svg>",e}},Zt=class{constructor(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"path");return this.alternate?t.setAttribute("d",this.alternate):t.setAttribute("d",Hd[this.pathName]),t}toMarkup(){return this.alternate?'<path d="'+Ke(this.alternate)+'"/>':'<path d="'+Ke(Hd[this.pathName])+'"/>'}},zn=class{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"line");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);return t}toMarkup(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+Ke(this.attributes[t])+'"');return e+="/>",e}};function $d(i){if(i instanceof at)return i;throw new Error("Expected symbolNode but got "+String(i)+".")}function f3(i){if(i instanceof ei)return i;throw new Error("Expected span<HtmlDomNode> but got "+String(i)+".")}var d3={bin:1,close:1,inner:1,open:1,punct:1,rel:1},m3={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},me={math:{},text:{}};function f(i,e,t,r,n,s){me[i][n]={font:e,group:t,replace:r},s&&r&&(me[i][r]=me[i][n])}var m="math",O="text",g="main",x="ams",be="accent-token",G="bin",tt="close",Li="inner",Y="mathord",ze="op-token",pt="open",Fo="punct",k="rel",mr="spacing",C="textord";f(m,g,k,"\u2261","\\equiv",!0);f(m,g,k,"\u227A","\\prec",!0);f(m,g,k,"\u227B","\\succ",!0);f(m,g,k,"\u223C","\\sim",!0);f(m,g,k,"\u22A5","\\perp");f(m,g,k,"\u2AAF","\\preceq",!0);f(m,g,k,"\u2AB0","\\succeq",!0);f(m,g,k,"\u2243","\\simeq",!0);f(m,g,k,"\u2223","\\mid",!0);f(m,g,k,"\u226A","\\ll",!0);f(m,g,k,"\u226B","\\gg",!0);f(m,g,k,"\u224D","\\asymp",!0);f(m,g,k,"\u2225","\\parallel");f(m,g,k,"\u22C8","\\bowtie",!0);f(m,g,k,"\u2323","\\smile",!0);f(m,g,k,"\u2291","\\sqsubseteq",!0);f(m,g,k,"\u2292","\\sqsupseteq",!0);f(m,g,k,"\u2250","\\doteq",!0);f(m,g,k,"\u2322","\\frown",!0);f(m,g,k,"\u220B","\\ni",!0);f(m,g,k,"\u221D","\\propto",!0);f(m,g,k,"\u22A2","\\vdash",!0);f(m,g,k,"\u22A3","\\dashv",!0);f(m,g,k,"\u220B","\\owns");f(m,g,Fo,".","\\ldotp");f(m,g,Fo,"\u22C5","\\cdotp");f(m,g,C,"#","\\#");f(O,g,C,"#","\\#");f(m,g,C,"&","\\&");f(O,g,C,"&","\\&");f(m,g,C,"\u2135","\\aleph",!0);f(m,g,C,"\u2200","\\forall",!0);f(m,g,C,"\u210F","\\hbar",!0);f(m,g,C,"\u2203","\\exists",!0);f(m,g,C,"\u2207","\\nabla",!0);f(m,g,C,"\u266D","\\flat",!0);f(m,g,C,"\u2113","\\ell",!0);f(m,g,C,"\u266E","\\natural",!0);f(m,g,C,"\u2663","\\clubsuit",!0);f(m,g,C,"\u2118","\\wp",!0);f(m,g,C,"\u266F","\\sharp",!0);f(m,g,C,"\u2662","\\diamondsuit",!0);f(m,g,C,"\u211C","\\Re",!0);f(m,g,C,"\u2661","\\heartsuit",!0);f(m,g,C,"\u2111","\\Im",!0);f(m,g,C,"\u2660","\\spadesuit",!0);f(m,g,C,"\xA7","\\S",!0);f(O,g,C,"\xA7","\\S");f(m,g,C,"\xB6","\\P",!0);f(O,g,C,"\xB6","\\P");f(m,g,C,"\u2020","\\dag");f(O,g,C,"\u2020","\\dag");f(O,g,C,"\u2020","\\textdagger");f(m,g,C,"\u2021","\\ddag");f(O,g,C,"\u2021","\\ddag");f(O,g,C,"\u2021","\\textdaggerdbl");f(m,g,tt,"\u23B1","\\rmoustache",!0);f(m,g,pt,"\u23B0","\\lmoustache",!0);f(m,g,tt,"\u27EF","\\rgroup",!0);f(m,g,pt,"\u27EE","\\lgroup",!0);f(m,g,G,"\u2213","\\mp",!0);f(m,g,G,"\u2296","\\ominus",!0);f(m,g,G,"\u228E","\\uplus",!0);f(m,g,G,"\u2293","\\sqcap",!0);f(m,g,G,"\u2217","\\ast");f(m,g,G,"\u2294","\\sqcup",!0);f(m,g,G,"\u25EF","\\bigcirc",!0);f(m,g,G,"\u2219","\\bullet",!0);f(m,g,G,"\u2021","\\ddagger");f(m,g,G,"\u2240","\\wr",!0);f(m,g,G,"\u2A3F","\\amalg");f(m,g,G,"&","\\And");f(m,g,k,"\u27F5","\\longleftarrow",!0);f(m,g,k,"\u21D0","\\Leftarrow",!0);f(m,g,k,"\u27F8","\\Longleftarrow",!0);f(m,g,k,"\u27F6","\\longrightarrow",!0);f(m,g,k,"\u21D2","\\Rightarrow",!0);f(m,g,k,"\u27F9","\\Longrightarrow",!0);f(m,g,k,"\u2194","\\leftrightarrow",!0);f(m,g,k,"\u27F7","\\longleftrightarrow",!0);f(m,g,k,"\u21D4","\\Leftrightarrow",!0);f(m,g,k,"\u27FA","\\Longleftrightarrow",!0);f(m,g,k,"\u21A6","\\mapsto",!0);f(m,g,k,"\u27FC","\\longmapsto",!0);f(m,g,k,"\u2197","\\nearrow",!0);f(m,g,k,"\u21A9","\\hookleftarrow",!0);f(m,g,k,"\u21AA","\\hookrightarrow",!0);f(m,g,k,"\u2198","\\searrow",!0);f(m,g,k,"\u21BC","\\leftharpoonup",!0);f(m,g,k,"\u21C0","\\rightharpoonup",!0);f(m,g,k,"\u2199","\\swarrow",!0);f(m,g,k,"\u21BD","\\leftharpoondown",!0);f(m,g,k,"\u21C1","\\rightharpoondown",!0);f(m,g,k,"\u2196","\\nwarrow",!0);f(m,g,k,"\u21CC","\\rightleftharpoons",!0);f(m,x,k,"\u226E","\\nless",!0);f(m,x,k,"\uE010","\\@nleqslant");f(m,x,k,"\uE011","\\@nleqq");f(m,x,k,"\u2A87","\\lneq",!0);f(m,x,k,"\u2268","\\lneqq",!0);f(m,x,k,"\uE00C","\\@lvertneqq");f(m,x,k,"\u22E6","\\lnsim",!0);f(m,x,k,"\u2A89","\\lnapprox",!0);f(m,x,k,"\u2280","\\nprec",!0);f(m,x,k,"\u22E0","\\npreceq",!0);f(m,x,k,"\u22E8","\\precnsim",!0);f(m,x,k,"\u2AB9","\\precnapprox",!0);f(m,x,k,"\u2241","\\nsim",!0);f(m,x,k,"\uE006","\\@nshortmid");f(m,x,k,"\u2224","\\nmid",!0);f(m,x,k,"\u22AC","\\nvdash",!0);f(m,x,k,"\u22AD","\\nvDash",!0);f(m,x,k,"\u22EA","\\ntriangleleft");f(m,x,k,"\u22EC","\\ntrianglelefteq",!0);f(m,x,k,"\u228A","\\subsetneq",!0);f(m,x,k,"\uE01A","\\@varsubsetneq");f(m,x,k,"\u2ACB","\\subsetneqq",!0);f(m,x,k,"\uE017","\\@varsubsetneqq");f(m,x,k,"\u226F","\\ngtr",!0);f(m,x,k,"\uE00F","\\@ngeqslant");f(m,x,k,"\uE00E","\\@ngeqq");f(m,x,k,"\u2A88","\\gneq",!0);f(m,x,k,"\u2269","\\gneqq",!0);f(m,x,k,"\uE00D","\\@gvertneqq");f(m,x,k,"\u22E7","\\gnsim",!0);f(m,x,k,"\u2A8A","\\gnapprox",!0);f(m,x,k,"\u2281","\\nsucc",!0);f(m,x,k,"\u22E1","\\nsucceq",!0);f(m,x,k,"\u22E9","\\succnsim",!0);f(m,x,k,"\u2ABA","\\succnapprox",!0);f(m,x,k,"\u2246","\\ncong",!0);f(m,x,k,"\uE007","\\@nshortparallel");f(m,x,k,"\u2226","\\nparallel",!0);f(m,x,k,"\u22AF","\\nVDash",!0);f(m,x,k,"\u22EB","\\ntriangleright");f(m,x,k,"\u22ED","\\ntrianglerighteq",!0);f(m,x,k,"\uE018","\\@nsupseteqq");f(m,x,k,"\u228B","\\supsetneq",!0);f(m,x,k,"\uE01B","\\@varsupsetneq");f(m,x,k,"\u2ACC","\\supsetneqq",!0);f(m,x,k,"\uE019","\\@varsupsetneqq");f(m,x,k,"\u22AE","\\nVdash",!0);f(m,x,k,"\u2AB5","\\precneqq",!0);f(m,x,k,"\u2AB6","\\succneqq",!0);f(m,x,k,"\uE016","\\@nsubseteqq");f(m,x,G,"\u22B4","\\unlhd");f(m,x,G,"\u22B5","\\unrhd");f(m,x,k,"\u219A","\\nleftarrow",!0);f(m,x,k,"\u219B","\\nrightarrow",!0);f(m,x,k,"\u21CD","\\nLeftarrow",!0);f(m,x,k,"\u21CF","\\nRightarrow",!0);f(m,x,k,"\u21AE","\\nleftrightarrow",!0);f(m,x,k,"\u21CE","\\nLeftrightarrow",!0);f(m,x,k,"\u25B3","\\vartriangle");f(m,x,C,"\u210F","\\hslash");f(m,x,C,"\u25BD","\\triangledown");f(m,x,C,"\u25CA","\\lozenge");f(m,x,C,"\u24C8","\\circledS");f(m,x,C,"\xAE","\\circledR");f(O,x,C,"\xAE","\\circledR");f(m,x,C,"\u2221","\\measuredangle",!0);f(m,x,C,"\u2204","\\nexists");f(m,x,C,"\u2127","\\mho");f(m,x,C,"\u2132","\\Finv",!0);f(m,x,C,"\u2141","\\Game",!0);f(m,x,C,"\u2035","\\backprime");f(m,x,C,"\u25B2","\\blacktriangle");f(m,x,C,"\u25BC","\\blacktriangledown");f(m,x,C,"\u25A0","\\blacksquare");f(m,x,C,"\u29EB","\\blacklozenge");f(m,x,C,"\u2605","\\bigstar");f(m,x,C,"\u2222","\\sphericalangle",!0);f(m,x,C,"\u2201","\\complement",!0);f(m,x,C,"\xF0","\\eth",!0);f(O,g,C,"\xF0","\xF0");f(m,x,C,"\u2571","\\diagup");f(m,x,C,"\u2572","\\diagdown");f(m,x,C,"\u25A1","\\square");f(m,x,C,"\u25A1","\\Box");f(m,x,C,"\u25CA","\\Diamond");f(m,x,C,"\xA5","\\yen",!0);f(O,x,C,"\xA5","\\yen",!0);f(m,x,C,"\u2713","\\checkmark",!0);f(O,x,C,"\u2713","\\checkmark");f(m,x,C,"\u2136","\\beth",!0);f(m,x,C,"\u2138","\\daleth",!0);f(m,x,C,"\u2137","\\gimel",!0);f(m,x,C,"\u03DD","\\digamma",!0);f(m,x,C,"\u03F0","\\varkappa");f(m,x,pt,"\u250C","\\@ulcorner",!0);f(m,x,tt,"\u2510","\\@urcorner",!0);f(m,x,pt,"\u2514","\\@llcorner",!0);f(m,x,tt,"\u2518","\\@lrcorner",!0);f(m,x,k,"\u2266","\\leqq",!0);f(m,x,k,"\u2A7D","\\leqslant",!0);f(m,x,k,"\u2A95","\\eqslantless",!0);f(m,x,k,"\u2272","\\lesssim",!0);f(m,x,k,"\u2A85","\\lessapprox",!0);f(m,x,k,"\u224A","\\approxeq",!0);f(m,x,G,"\u22D6","\\lessdot");f(m,x,k,"\u22D8","\\lll",!0);f(m,x,k,"\u2276","\\lessgtr",!0);f(m,x,k,"\u22DA","\\lesseqgtr",!0);f(m,x,k,"\u2A8B","\\lesseqqgtr",!0);f(m,x,k,"\u2251","\\doteqdot");f(m,x,k,"\u2253","\\risingdotseq",!0);f(m,x,k,"\u2252","\\fallingdotseq",!0);f(m,x,k,"\u223D","\\backsim",!0);f(m,x,k,"\u22CD","\\backsimeq",!0);f(m,x,k,"\u2AC5","\\subseteqq",!0);f(m,x,k,"\u22D0","\\Subset",!0);f(m,x,k,"\u228F","\\sqsubset",!0);f(m,x,k,"\u227C","\\preccurlyeq",!0);f(m,x,k,"\u22DE","\\curlyeqprec",!0);f(m,x,k,"\u227E","\\precsim",!0);f(m,x,k,"\u2AB7","\\precapprox",!0);f(m,x,k,"\u22B2","\\vartriangleleft");f(m,x,k,"\u22B4","\\trianglelefteq");f(m,x,k,"\u22A8","\\vDash",!0);f(m,x,k,"\u22AA","\\Vvdash",!0);f(m,x,k,"\u2323","\\smallsmile");f(m,x,k,"\u2322","\\smallfrown");f(m,x,k,"\u224F","\\bumpeq",!0);f(m,x,k,"\u224E","\\Bumpeq",!0);f(m,x,k,"\u2267","\\geqq",!0);f(m,x,k,"\u2A7E","\\geqslant",!0);f(m,x,k,"\u2A96","\\eqslantgtr",!0);f(m,x,k,"\u2273","\\gtrsim",!0);f(m,x,k,"\u2A86","\\gtrapprox",!0);f(m,x,G,"\u22D7","\\gtrdot");f(m,x,k,"\u22D9","\\ggg",!0);f(m,x,k,"\u2277","\\gtrless",!0);f(m,x,k,"\u22DB","\\gtreqless",!0);f(m,x,k,"\u2A8C","\\gtreqqless",!0);f(m,x,k,"\u2256","\\eqcirc",!0);f(m,x,k,"\u2257","\\circeq",!0);f(m,x,k,"\u225C","\\triangleq",!0);f(m,x,k,"\u223C","\\thicksim");f(m,x,k,"\u2248","\\thickapprox");f(m,x,k,"\u2AC6","\\supseteqq",!0);f(m,x,k,"\u22D1","\\Supset",!0);f(m,x,k,"\u2290","\\sqsupset",!0);f(m,x,k,"\u227D","\\succcurlyeq",!0);f(m,x,k,"\u22DF","\\curlyeqsucc",!0);f(m,x,k,"\u227F","\\succsim",!0);f(m,x,k,"\u2AB8","\\succapprox",!0);f(m,x,k,"\u22B3","\\vartriangleright");f(m,x,k,"\u22B5","\\trianglerighteq");f(m,x,k,"\u22A9","\\Vdash",!0);f(m,x,k,"\u2223","\\shortmid");f(m,x,k,"\u2225","\\shortparallel");f(m,x,k,"\u226C","\\between",!0);f(m,x,k,"\u22D4","\\pitchfork",!0);f(m,x,k,"\u221D","\\varpropto");f(m,x,k,"\u25C0","\\blacktriangleleft");f(m,x,k,"\u2234","\\therefore",!0);f(m,x,k,"\u220D","\\backepsilon");f(m,x,k,"\u25B6","\\blacktriangleright");f(m,x,k,"\u2235","\\because",!0);f(m,x,k,"\u22D8","\\llless");f(m,x,k,"\u22D9","\\gggtr");f(m,x,G,"\u22B2","\\lhd");f(m,x,G,"\u22B3","\\rhd");f(m,x,k,"\u2242","\\eqsim",!0);f(m,g,k,"\u22C8","\\Join");f(m,x,k,"\u2251","\\Doteq",!0);f(m,x,G,"\u2214","\\dotplus",!0);f(m,x,G,"\u2216","\\smallsetminus");f(m,x,G,"\u22D2","\\Cap",!0);f(m,x,G,"\u22D3","\\Cup",!0);f(m,x,G,"\u2A5E","\\doublebarwedge",!0);f(m,x,G,"\u229F","\\boxminus",!0);f(m,x,G,"\u229E","\\boxplus",!0);f(m,x,G,"\u22C7","\\divideontimes",!0);f(m,x,G,"\u22C9","\\ltimes",!0);f(m,x,G,"\u22CA","\\rtimes",!0);f(m,x,G,"\u22CB","\\leftthreetimes",!0);f(m,x,G,"\u22CC","\\rightthreetimes",!0);f(m,x,G,"\u22CF","\\curlywedge",!0);f(m,x,G,"\u22CE","\\curlyvee",!0);f(m,x,G,"\u229D","\\circleddash",!0);f(m,x,G,"\u229B","\\circledast",!0);f(m,x,G,"\u22C5","\\centerdot");f(m,x,G,"\u22BA","\\intercal",!0);f(m,x,G,"\u22D2","\\doublecap");f(m,x,G,"\u22D3","\\doublecup");f(m,x,G,"\u22A0","\\boxtimes",!0);f(m,x,k,"\u21E2","\\dashrightarrow",!0);f(m,x,k,"\u21E0","\\dashleftarrow",!0);f(m,x,k,"\u21C7","\\leftleftarrows",!0);f(m,x,k,"\u21C6","\\leftrightarrows",!0);f(m,x,k,"\u21DA","\\Lleftarrow",!0);f(m,x,k,"\u219E","\\twoheadleftarrow",!0);f(m,x,k,"\u21A2","\\leftarrowtail",!0);f(m,x,k,"\u21AB","\\looparrowleft",!0);f(m,x,k,"\u21CB","\\leftrightharpoons",!0);f(m,x,k,"\u21B6","\\curvearrowleft",!0);f(m,x,k,"\u21BA","\\circlearrowleft",!0);f(m,x,k,"\u21B0","\\Lsh",!0);f(m,x,k,"\u21C8","\\upuparrows",!0);f(m,x,k,"\u21BF","\\upharpoonleft",!0);f(m,x,k,"\u21C3","\\downharpoonleft",!0);f(m,g,k,"\u22B6","\\origof",!0);f(m,g,k,"\u22B7","\\imageof",!0);f(m,x,k,"\u22B8","\\multimap",!0);f(m,x,k,"\u21AD","\\leftrightsquigarrow",!0);f(m,x,k,"\u21C9","\\rightrightarrows",!0);f(m,x,k,"\u21C4","\\rightleftarrows",!0);f(m,x,k,"\u21A0","\\twoheadrightarrow",!0);f(m,x,k,"\u21A3","\\rightarrowtail",!0);f(m,x,k,"\u21AC","\\looparrowright",!0);f(m,x,k,"\u21B7","\\curvearrowright",!0);f(m,x,k,"\u21BB","\\circlearrowright",!0);f(m,x,k,"\u21B1","\\Rsh",!0);f(m,x,k,"\u21CA","\\downdownarrows",!0);f(m,x,k,"\u21BE","\\upharpoonright",!0);f(m,x,k,"\u21C2","\\downharpoonright",!0);f(m,x,k,"\u21DD","\\rightsquigarrow",!0);f(m,x,k,"\u21DD","\\leadsto");f(m,x,k,"\u21DB","\\Rrightarrow",!0);f(m,x,k,"\u21BE","\\restriction");f(m,g,C,"\u2018","`");f(m,g,C,"$","\\$");f(O,g,C,"$","\\$");f(O,g,C,"$","\\textdollar");f(m,g,C,"%","\\%");f(O,g,C,"%","\\%");f(m,g,C,"_","\\_");f(O,g,C,"_","\\_");f(O,g,C,"_","\\textunderscore");f(m,g,C,"\u2220","\\angle",!0);f(m,g,C,"\u221E","\\infty",!0);f(m,g,C,"\u2032","\\prime");f(m,g,C,"\u25B3","\\triangle");f(m,g,C,"\u0393","\\Gamma",!0);f(m,g,C,"\u0394","\\Delta",!0);f(m,g,C,"\u0398","\\Theta",!0);f(m,g,C,"\u039B","\\Lambda",!0);f(m,g,C,"\u039E","\\Xi",!0);f(m,g,C,"\u03A0","\\Pi",!0);f(m,g,C,"\u03A3","\\Sigma",!0);f(m,g,C,"\u03A5","\\Upsilon",!0);f(m,g,C,"\u03A6","\\Phi",!0);f(m,g,C,"\u03A8","\\Psi",!0);f(m,g,C,"\u03A9","\\Omega",!0);f(m,g,C,"A","\u0391");f(m,g,C,"B","\u0392");f(m,g,C,"E","\u0395");f(m,g,C,"Z","\u0396");f(m,g,C,"H","\u0397");f(m,g,C,"I","\u0399");f(m,g,C,"K","\u039A");f(m,g,C,"M","\u039C");f(m,g,C,"N","\u039D");f(m,g,C,"O","\u039F");f(m,g,C,"P","\u03A1");f(m,g,C,"T","\u03A4");f(m,g,C,"X","\u03A7");f(m,g,C,"\xAC","\\neg",!0);f(m,g,C,"\xAC","\\lnot");f(m,g,C,"\u22A4","\\top");f(m,g,C,"\u22A5","\\bot");f(m,g,C,"\u2205","\\emptyset");f(m,x,C,"\u2205","\\varnothing");f(m,g,Y,"\u03B1","\\alpha",!0);f(m,g,Y,"\u03B2","\\beta",!0);f(m,g,Y,"\u03B3","\\gamma",!0);f(m,g,Y,"\u03B4","\\delta",!0);f(m,g,Y,"\u03F5","\\epsilon",!0);f(m,g,Y,"\u03B6","\\zeta",!0);f(m,g,Y,"\u03B7","\\eta",!0);f(m,g,Y,"\u03B8","\\theta",!0);f(m,g,Y,"\u03B9","\\iota",!0);f(m,g,Y,"\u03BA","\\kappa",!0);f(m,g,Y,"\u03BB","\\lambda",!0);f(m,g,Y,"\u03BC","\\mu",!0);f(m,g,Y,"\u03BD","\\nu",!0);f(m,g,Y,"\u03BE","\\xi",!0);f(m,g,Y,"\u03BF","\\omicron",!0);f(m,g,Y,"\u03C0","\\pi",!0);f(m,g,Y,"\u03C1","\\rho",!0);f(m,g,Y,"\u03C3","\\sigma",!0);f(m,g,Y,"\u03C4","\\tau",!0);f(m,g,Y,"\u03C5","\\upsilon",!0);f(m,g,Y,"\u03D5","\\phi",!0);f(m,g,Y,"\u03C7","\\chi",!0);f(m,g,Y,"\u03C8","\\psi",!0);f(m,g,Y,"\u03C9","\\omega",!0);f(m,g,Y,"\u03B5","\\varepsilon",!0);f(m,g,Y,"\u03D1","\\vartheta",!0);f(m,g,Y,"\u03D6","\\varpi",!0);f(m,g,Y,"\u03F1","\\varrho",!0);f(m,g,Y,"\u03C2","\\varsigma",!0);f(m,g,Y,"\u03C6","\\varphi",!0);f(m,g,G,"\u2217","*",!0);f(m,g,G,"+","+");f(m,g,G,"\u2212","-",!0);f(m,g,G,"\u22C5","\\cdot",!0);f(m,g,G,"\u2218","\\circ",!0);f(m,g,G,"\xF7","\\div",!0);f(m,g,G,"\xB1","\\pm",!0);f(m,g,G,"\xD7","\\times",!0);f(m,g,G,"\u2229","\\cap",!0);f(m,g,G,"\u222A","\\cup",!0);f(m,g,G,"\u2216","\\setminus",!0);f(m,g,G,"\u2227","\\land");f(m,g,G,"\u2228","\\lor");f(m,g,G,"\u2227","\\wedge",!0);f(m,g,G,"\u2228","\\vee",!0);f(m,g,C,"\u221A","\\surd");f(m,g,pt,"\u27E8","\\langle",!0);f(m,g,pt,"\u2223","\\lvert");f(m,g,pt,"\u2225","\\lVert");f(m,g,tt,"?","?");f(m,g,tt,"!","!");f(m,g,tt,"\u27E9","\\rangle",!0);f(m,g,tt,"\u2223","\\rvert");f(m,g,tt,"\u2225","\\rVert");f(m,g,k,"=","=");f(m,g,k,":",":");f(m,g,k,"\u2248","\\approx",!0);f(m,g,k,"\u2245","\\cong",!0);f(m,g,k,"\u2265","\\ge");f(m,g,k,"\u2265","\\geq",!0);f(m,g,k,"\u2190","\\gets");f(m,g,k,">","\\gt",!0);f(m,g,k,"\u2208","\\in",!0);f(m,g,k,"\uE020","\\@not");f(m,g,k,"\u2282","\\subset",!0);f(m,g,k,"\u2283","\\supset",!0);f(m,g,k,"\u2286","\\subseteq",!0);f(m,g,k,"\u2287","\\supseteq",!0);f(m,x,k,"\u2288","\\nsubseteq",!0);f(m,x,k,"\u2289","\\nsupseteq",!0);f(m,g,k,"\u22A8","\\models");f(m,g,k,"\u2190","\\leftarrow",!0);f(m,g,k,"\u2264","\\le");f(m,g,k,"\u2264","\\leq",!0);f(m,g,k,"<","\\lt",!0);f(m,g,k,"\u2192","\\rightarrow",!0);f(m,g,k,"\u2192","\\to");f(m,x,k,"\u2271","\\ngeq",!0);f(m,x,k,"\u2270","\\nleq",!0);f(m,g,mr,"\xA0","\\ ");f(m,g,mr,"\xA0","\\space");f(m,g,mr,"\xA0","\\nobreakspace");f(O,g,mr,"\xA0","\\ ");f(O,g,mr,"\xA0"," ");f(O,g,mr,"\xA0","\\space");f(O,g,mr,"\xA0","\\nobreakspace");f(m,g,mr,null,"\\nobreak");f(m,g,mr,null,"\\allowbreak");f(m,g,Fo,",",",");f(m,g,Fo,";",";");f(m,x,G,"\u22BC","\\barwedge",!0);f(m,x,G,"\u22BB","\\veebar",!0);f(m,g,G,"\u2299","\\odot",!0);f(m,g,G,"\u2295","\\oplus",!0);f(m,g,G,"\u2297","\\otimes",!0);f(m,g,C,"\u2202","\\partial",!0);f(m,g,G,"\u2298","\\oslash",!0);f(m,x,G,"\u229A","\\circledcirc",!0);f(m,x,G,"\u22A1","\\boxdot",!0);f(m,g,G,"\u25B3","\\bigtriangleup");f(m,g,G,"\u25BD","\\bigtriangledown");f(m,g,G,"\u2020","\\dagger");f(m,g,G,"\u22C4","\\diamond");f(m,g,G,"\u22C6","\\star");f(m,g,G,"\u25C3","\\triangleleft");f(m,g,G,"\u25B9","\\triangleright");f(m,g,pt,"{","\\{");f(O,g,C,"{","\\{");f(O,g,C,"{","\\textbraceleft");f(m,g,tt,"}","\\}");f(O,g,C,"}","\\}");f(O,g,C,"}","\\textbraceright");f(m,g,pt,"{","\\lbrace");f(m,g,tt,"}","\\rbrace");f(m,g,pt,"[","\\lbrack",!0);f(O,g,C,"[","\\lbrack",!0);f(m,g,tt,"]","\\rbrack",!0);f(O,g,C,"]","\\rbrack",!0);f(m,g,pt,"(","\\lparen",!0);f(m,g,tt,")","\\rparen",!0);f(O,g,C,"<","\\textless",!0);f(O,g,C,">","\\textgreater",!0);f(m,g,pt,"\u230A","\\lfloor",!0);f(m,g,tt,"\u230B","\\rfloor",!0);f(m,g,pt,"\u2308","\\lceil",!0);f(m,g,tt,"\u2309","\\rceil",!0);f(m,g,C,"\\","\\backslash");f(m,g,C,"\u2223","|");f(m,g,C,"\u2223","\\vert");f(O,g,C,"|","\\textbar",!0);f(m,g,C,"\u2225","\\|");f(m,g,C,"\u2225","\\Vert");f(O,g,C,"\u2225","\\textbardbl");f(O,g,C,"~","\\textasciitilde");f(O,g,C,"\\","\\textbackslash");f(O,g,C,"^","\\textasciicircum");f(m,g,k,"\u2191","\\uparrow",!0);f(m,g,k,"\u21D1","\\Uparrow",!0);f(m,g,k,"\u2193","\\downarrow",!0);f(m,g,k,"\u21D3","\\Downarrow",!0);f(m,g,k,"\u2195","\\updownarrow",!0);f(m,g,k,"\u21D5","\\Updownarrow",!0);f(m,g,ze,"\u2210","\\coprod");f(m,g,ze,"\u22C1","\\bigvee");f(m,g,ze,"\u22C0","\\bigwedge");f(m,g,ze,"\u2A04","\\biguplus");f(m,g,ze,"\u22C2","\\bigcap");f(m,g,ze,"\u22C3","\\bigcup");f(m,g,ze,"\u222B","\\int");f(m,g,ze,"\u222B","\\intop");f(m,g,ze,"\u222C","\\iint");f(m,g,ze,"\u222D","\\iiint");f(m,g,ze,"\u220F","\\prod");f(m,g,ze,"\u2211","\\sum");f(m,g,ze,"\u2A02","\\bigotimes");f(m,g,ze,"\u2A01","\\bigoplus");f(m,g,ze,"\u2A00","\\bigodot");f(m,g,ze,"\u222E","\\oint");f(m,g,ze,"\u222F","\\oiint");f(m,g,ze,"\u2230","\\oiiint");f(m,g,ze,"\u2A06","\\bigsqcup");f(m,g,ze,"\u222B","\\smallint");f(O,g,Li,"\u2026","\\textellipsis");f(m,g,Li,"\u2026","\\mathellipsis");f(O,g,Li,"\u2026","\\ldots",!0);f(m,g,Li,"\u2026","\\ldots",!0);f(m,g,Li,"\u22EF","\\@cdots",!0);f(m,g,Li,"\u22F1","\\ddots",!0);f(m,g,C,"\u22EE","\\varvdots");f(O,g,C,"\u22EE","\\varvdots");f(m,g,be,"\u02CA","\\acute");f(m,g,be,"\u02CB","\\grave");f(m,g,be,"\xA8","\\ddot");f(m,g,be,"~","\\tilde");f(m,g,be,"\u02C9","\\bar");f(m,g,be,"\u02D8","\\breve");f(m,g,be,"\u02C7","\\check");f(m,g,be,"^","\\hat");f(m,g,be,"\u20D7","\\vec");f(m,g,be,"\u02D9","\\dot");f(m,g,be,"\u02DA","\\mathring");f(m,g,Y,"\uE131","\\@imath");f(m,g,Y,"\uE237","\\@jmath");f(m,g,C,"\u0131","\u0131");f(m,g,C,"\u0237","\u0237");f(O,g,C,"\u0131","\\i",!0);f(O,g,C,"\u0237","\\j",!0);f(O,g,C,"\xDF","\\ss",!0);f(O,g,C,"\xE6","\\ae",!0);f(O,g,C,"\u0153","\\oe",!0);f(O,g,C,"\xF8","\\o",!0);f(O,g,C,"\xC6","\\AE",!0);f(O,g,C,"\u0152","\\OE",!0);f(O,g,C,"\xD8","\\O",!0);f(O,g,be,"\u02CA","\\'");f(O,g,be,"\u02CB","\\`");f(O,g,be,"\u02C6","\\^");f(O,g,be,"\u02DC","\\~");f(O,g,be,"\u02C9","\\=");f(O,g,be,"\u02D8","\\u");f(O,g,be,"\u02D9","\\.");f(O,g,be,"\xB8","\\c");f(O,g,be,"\u02DA","\\r");f(O,g,be,"\u02C7","\\v");f(O,g,be,"\xA8",'\\"');f(O,g,be,"\u02DD","\\H");f(O,g,be,"\u25EF","\\textcircled");var wm={"--":!0,"---":!0,"``":!0,"''":!0};f(O,g,C,"\u2013","--",!0);f(O,g,C,"\u2013","\\textendash");f(O,g,C,"\u2014","---",!0);f(O,g,C,"\u2014","\\textemdash");f(O,g,C,"\u2018","`",!0);f(O,g,C,"\u2018","\\textquoteleft");f(O,g,C,"\u2019","'",!0);f(O,g,C,"\u2019","\\textquoteright");f(O,g,C,"\u201C","``",!0);f(O,g,C,"\u201C","\\textquotedblleft");f(O,g,C,"\u201D","''",!0);f(O,g,C,"\u201D","\\textquotedblright");f(m,g,C,"\xB0","\\degree",!0);f(O,g,C,"\xB0","\\degree");f(O,g,C,"\xB0","\\textdegree",!0);f(m,g,C,"\xA3","\\pounds");f(m,g,C,"\xA3","\\mathsterling",!0);f(O,g,C,"\xA3","\\pounds");f(O,g,C,"\xA3","\\textsterling",!0);f(m,x,C,"\u2720","\\maltese");f(O,x,C,"\u2720","\\maltese");var Gd='0123456789/@."';for(vo=0;vo<Gd.length;vo++)R0=Gd.charAt(vo),f(m,g,C,R0,R0);var R0,vo,Ud='0123456789!@*()-=+";:?/.,';for(bo=0;bo<Ud.length;bo++)I0=Ud.charAt(bo),f(O,g,C,I0,I0);var I0,bo,Oo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(yo=0;yo<Oo.length;yo++)Cn=Oo.charAt(yo),f(m,g,Y,Cn,Cn),f(O,g,C,Cn,Cn);var Cn,yo;f(m,x,C,"C","\u2102");f(O,x,C,"C","\u2102");f(m,x,C,"H","\u210D");f(O,x,C,"H","\u210D");f(m,x,C,"N","\u2115");f(O,x,C,"N","\u2115");f(m,x,C,"P","\u2119");f(O,x,C,"P","\u2119");f(m,x,C,"Q","\u211A");f(O,x,C,"Q","\u211A");f(m,x,C,"R","\u211D");f(O,x,C,"R","\u211D");f(m,x,C,"Z","\u2124");f(O,x,C,"Z","\u2124");f(m,g,Y,"h","\u210E");f(O,g,Y,"h","\u210E");var _="";for(Ue=0;Ue<Oo.length;Ue++)ye=Oo.charAt(Ue),_=String.fromCharCode(55349,56320+Ue),f(m,g,Y,ye,_),f(O,g,C,ye,_),_=String.fromCharCode(55349,56372+Ue),f(m,g,Y,ye,_),f(O,g,C,ye,_),_=String.fromCharCode(55349,56424+Ue),f(m,g,Y,ye,_),f(O,g,C,ye,_),_=String.fromCharCode(55349,56580+Ue),f(m,g,Y,ye,_),f(O,g,C,ye,_),_=String.fromCharCode(55349,56684+Ue),f(m,g,Y,ye,_),f(O,g,C,ye,_),_=String.fromCharCode(55349,56736+Ue),f(m,g,Y,ye,_),f(O,g,C,ye,_),_=String.fromCharCode(55349,56788+Ue),f(m,g,Y,ye,_),f(O,g,C,ye,_),_=String.fromCharCode(55349,56840+Ue),f(m,g,Y,ye,_),f(O,g,C,ye,_),_=String.fromCharCode(55349,56944+Ue),f(m,g,Y,ye,_),f(O,g,C,ye,_),Ue<26&&(_=String.fromCharCode(55349,56632+Ue),f(m,g,Y,ye,_),f(O,g,C,ye,_),_=String.fromCharCode(55349,56476+Ue),f(m,g,Y,ye,_),f(O,g,C,ye,_));var ye,Ue;_="\u{1D55C}";f(m,g,Y,"k",_);f(O,g,C,"k",_);for(Tr=0;Tr<10;Tr++)cr=Tr.toString(),_=String.fromCharCode(55349,57294+Tr),f(m,g,Y,cr,_),f(O,g,C,cr,_),_=String.fromCharCode(55349,57314+Tr),f(m,g,Y,cr,_),f(O,g,C,cr,_),_=String.fromCharCode(55349,57324+Tr),f(m,g,Y,cr,_),f(O,g,C,cr,_),_=String.fromCharCode(55349,57334+Tr),f(m,g,Y,cr,_),f(O,g,C,cr,_);var cr,Tr,_0="\xD0\xDE\xFE";for(xo=0;xo<_0.length;xo++)An=_0.charAt(xo),f(m,g,Y,An,An),f(O,g,C,An,An);var An,xo,wo=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Kd=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],p3=function(e,t){var r=e.charCodeAt(0),n=e.charCodeAt(1),s=(r-55296)*1024+(n-56320)+65536,o=t==="math"?0:1;if(119808<=s&&s<120484){var l=Math.floor((s-119808)/26);return[wo[l][2],wo[l][o]]}else if(120782<=s&&s<=120831){var a=Math.floor((s-120782)/10);return[Kd[a][2],Kd[a][o]]}else{if(s===120485||s===120486)return[wo[0][2],wo[0][o]];if(120486<s&&s<120782)return["",""];throw new R("Unsupported character: "+e)}},Ho=function(e,t,r){return me[r][e]&&me[r][e].replace&&(e=me[r][e].replace),{value:e,metrics:ah(e,t,r)}},Qe=function(e,t,r,n,s){var o=Ho(e,t,r),l=o.metrics;e=o.value;var a;if(l){var h=l.italic;(r==="text"||n&&n.font==="mathit")&&(h=0),a=new at(e,l.height,l.depth,h,l.skew,l.width,s)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+t+"' and mode '"+r+"'")),a=new at(e,0,0,0,0,0,s);if(n){a.maxFontSize=n.sizeMultiplier,n.style.isTight()&&a.classes.push("mtight");var c=n.getColor();c&&(a.style.color=c)}return a},hh=function(e,t,r,n){return n===void 0&&(n=[]),r.font==="boldsymbol"&&Ho(e,"Main-Bold",t).metrics?Qe(e,"Main-Bold",t,r,n.concat(["mathbf"])):e==="\\"||me[t][e].font==="main"?Qe(e,"Main-Regular",t,r,n):Qe(e,"AMS-Regular",t,r,n.concat(["amsrm"]))},g3=function(e,t,r,n,s){return s!=="textord"&&Ho(e,"Math-BoldItalic",t).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},qo=function(e,t,r){var n=e.mode,s=e.text,o=["mord"],l=n==="math"||n==="text"&&t.font,a=l?t.font:t.fontFamily,h="",c="";if(s.charCodeAt(0)===55349&&([h,c]=p3(s,n)),h.length>0)return Qe(s,h,n,t,o.concat(c));if(a){var u,d;if(a==="boldsymbol"){var p=g3(s,n,t,o,r);u=p.fontName,d=[p.fontClass]}else l?(u=J0[a].fontName,d=[a]):(u=ko(a,t.fontWeight,t.fontShape),d=[a,t.fontWeight,t.fontShape]);if(Ho(s,u,n).metrics)return Qe(s,u,n,t,o.concat(d));if(wm.hasOwnProperty(s)&&u.slice(0,10)==="Typewriter"){for(var v=[],y=0;y<s.length;y++)v.push(Qe(s[y],u,n,t,o.concat(d)));return pr(v)}}if(r==="mathord")return Qe(s,"Math-Italic",n,t,o.concat(["mathnormal"]));if(r==="textord"){var w=me[n][s]&&me[n][s].font;if(w==="ams"){var S=ko("amsrm",t.fontWeight,t.fontShape);return Qe(s,S,n,t,o.concat("amsrm",t.fontWeight,t.fontShape))}else if(w==="main"||!w){var A=ko("textrm",t.fontWeight,t.fontShape);return Qe(s,A,n,t,o.concat(t.fontWeight,t.fontShape))}else{var M=ko(w,t.fontWeight,t.fontShape);return Qe(s,M,n,t,o.concat(M,t.fontWeight,t.fontShape))}}else throw new Error("unexpected type: "+r+" in makeOrd")},v3=(i,e)=>{if(Br(i.classes)!==Br(e.classes)||i.skew!==e.skew||i.maxFontSize!==e.maxFontSize||i.italic!==0&&i.hasClass("mathnormal"))return!1;if(i.classes.length===1){var t=i.classes[0];if(t==="mbin"||t==="mord")return!1}for(var r in i.style)if(i.style.hasOwnProperty(r)&&i.style[r]!==e.style[r])return!1;for(var n in e.style)if(e.style.hasOwnProperty(n)&&i.style[n]!==e.style[n])return!1;return!0},km=i=>{for(var e=0;e<i.length-1;e++){var t=i[e],r=i[e+1];t instanceof at&&r instanceof at&&v3(t,r)&&(t.text+=r.text,t.height=Math.max(t.height,r.height),t.depth=Math.max(t.depth,r.depth),t.italic=r.italic,i.splice(e+1,1),e--)}return i},ch=function(e){for(var t=0,r=0,n=0,s=0;s<e.children.length;s++){var o=e.children[s];o.height>t&&(t=o.height),o.depth>r&&(r=o.depth),o.maxFontSize>n&&(n=o.maxFontSize)}e.height=t,e.depth=r,e.maxFontSize=n},z=function(e,t,r,n){var s=new ei(e,t,r,n);return ch(s),s},Er=(i,e,t,r)=>new ei(i,e,t,r),Oi=function(e,t,r){var n=z([e],[],t);return n.height=Math.max(r||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),n.style.borderBottomWidth=N(n.height),n.maxFontSize=1,n},b3=function(e,t,r,n){var s=new On(e,t,r,n);return ch(s),s},pr=function(e){var t=new Qr(e);return ch(t),t},zi=function(e,t){return e instanceof Qr?z([],[e],t):e},y3=function(e){if(e.positionType==="individualShift"){for(var t=e.children,r=[t[0]],n=-t[0].shift-t[0].elem.depth,s=n,o=1;o<t.length;o++){var l=-t[o].shift-s-t[o].elem.depth,a=l-(t[o-1].elem.height+t[o-1].elem.depth);s=s+l,r.push({type:"kern",size:a}),r.push(t[o])}return{children:r,depth:n}}var h;if(e.positionType==="top"){for(var c=e.positionData,u=0;u<e.children.length;u++){var d=e.children[u];c-=d.type==="kern"?d.size:d.elem.height+d.elem.depth}h=c}else if(e.positionType==="bottom")h=-e.positionData;else{var p=e.children[0];if(p.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")h=-p.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")h=-p.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:h}},ae=function(e,t){for(var{children:r,depth:n}=y3(e),s=0,o=0;o<r.length;o++){var l=r[o];if(l.type==="elem"){var a=l.elem;s=Math.max(s,a.maxFontSize,a.height)}}s+=2;var h=z(["pstrut"],[]);h.style.height=N(s);for(var c=[],u=n,d=n,p=n,v=0;v<r.length;v++){var y=r[v];if(y.type==="kern")p+=y.size;else{var w=y.elem,S=y.wrapperClasses||[],A=y.wrapperStyle||{},M=z(S,[h,w],void 0,A);M.style.top=N(-s-p-w.depth),y.marginLeft&&(M.style.marginLeft=y.marginLeft),y.marginRight&&(M.style.marginRight=y.marginRight),c.push(M),p+=w.height+w.depth}u=Math.min(u,p),d=Math.max(d,p)}var E=z(["vlist"],c);E.style.height=N(d);var T;if(u<0){var B=z([],[]),D=z(["vlist"],[B]);D.style.height=N(-u);var V=z(["vlist-s"],[new at("\u200B")]);T=[z(["vlist-r"],[E,V]),z(["vlist-r"],[D])]}else T=[z(["vlist-r"],[E])];var U=z(["vlist-t"],T);return T.length===2&&U.classes.push("vlist-t2"),U.height=d,U.depth=-u,U},Sm=(i,e)=>{var t=z(["mspace"],[],e),r=we(i,e);return t.style.marginRight=N(r),t},ko=function(e,t,r){var n="";switch(e){case"amsrm":n="AMS";break;case"textrm":n="Main";break;case"textsf":n="SansSerif";break;case"texttt":n="Typewriter";break;default:n=e}var s;return t==="textbf"&&r==="textit"?s="BoldItalic":t==="textbf"?s="Bold":t==="textit"?s="Italic":s="Regular",n+"-"+s},J0={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Cm={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Am=function(e,t){var[r,n,s]=Cm[e],o=new Zt(r),l=new qt([o],{width:N(n),height:N(s),style:"width:"+N(n),viewBox:"0 0 "+1e3*n+" "+1e3*s,preserveAspectRatio:"xMinYMin"}),a=Er(["overlay"],[l],t);return a.height=s,a.style.height=N(s),a.style.width=N(n),a},xe={number:3,unit:"mu"},Zr={number:4,unit:"mu"},ur={number:5,unit:"mu"},x3={mord:{mop:xe,mbin:Zr,mrel:ur,minner:xe},mop:{mord:xe,mop:xe,mrel:ur,minner:xe},mbin:{mord:Zr,mop:Zr,mopen:Zr,minner:Zr},mrel:{mord:ur,mop:ur,mopen:ur,minner:ur},mopen:{},mclose:{mop:xe,mbin:Zr,mrel:ur,minner:xe},mpunct:{mord:xe,mop:xe,mrel:ur,mopen:xe,mclose:xe,mpunct:xe,minner:xe},minner:{mord:xe,mop:xe,mbin:Zr,mrel:ur,mopen:xe,mpunct:xe,minner:xe}},w3={mord:{mop:xe},mop:{mord:xe,mop:xe},mbin:{},mrel:{},mopen:{},mclose:{mop:xe},mpunct:{},minner:{mop:xe}},Mm={},zo={},Lo={};function q(i){for(var{type:e,names:t,props:r,handler:n,htmlBuilder:s,mathmlBuilder:o}=i,l={type:e,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:r.allowedInMath===void 0?!0:r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:n},a=0;a<t.length;++a)Mm[t[a]]=l;e&&(s&&(zo[e]=s),o&&(Lo[e]=o))}function ti(i){var{type:e,htmlBuilder:t,mathmlBuilder:r}=i;q({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:t,mathmlBuilder:r})}var Ro=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},De=function(e){return e.type==="ordgroup"?e.body:[e]},k3=new Set(["leftmost","mbin","mopen","mrel","mop","mpunct"]),S3=new Set(["rightmost","mrel","mclose","mpunct"]),C3={display:Z.DISPLAY,text:Z.TEXT,script:Z.SCRIPT,scriptscript:Z.SCRIPTSCRIPT},A3={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Pe=function(e,t,r,n){n===void 0&&(n=[null,null]);for(var s=[],o=0;o<e.length;o++){var l=oe(e[o],t);if(l instanceof Qr){var a=l.children;s.push(...a)}else s.push(l)}if(km(s),!r)return s;var h=t;if(e.length===1){var c=e[0];c.type==="sizing"?h=t.havingSize(c.size):c.type==="styling"&&(h=t.havingStyle(C3[c.style]))}var u=z([n[0]||"leftmost"],[],t),d=z([n[1]||"rightmost"],[],t),p=r==="root";return jd(s,(v,y)=>{var w=y.classes[0],S=v.classes[0];w==="mbin"&&S3.has(S)?y.classes[0]="mord":S==="mbin"&&k3.has(w)&&(v.classes[0]="mord")},{node:u},d,p),jd(s,(v,y)=>{var w=Z0(y),S=Z0(v),A=w&&S?v.hasClass("mtight")?w3[w][S]:x3[w][S]:null;if(A)return Sm(A,h)},{node:u},d,p),s},jd=function i(e,t,r,n,s){n&&e.push(n);for(var o=0;o<e.length;o++){var l=e[o],a=Tm(l);if(a){i(a.children,t,r,null,s);continue}var h=!l.hasClass("mspace");if(h){var c=t(l,r.node);c&&(r.insertAfter?r.insertAfter(c):(e.unshift(c),o++))}h?r.node=l:s&&l.hasClass("newline")&&(r.node=z(["leftmost"])),r.insertAfter=(u=>d=>{e.splice(u+1,0,d),o++})(o)}n&&e.pop()},Tm=function(e){return e instanceof Qr||e instanceof On||e instanceof ei&&e.hasClass("enclosing")?e:null},M3=function i(e,t){var r=Tm(e);if(r){var n=r.children;if(n.length){if(t==="right")return i(n[n.length-1],"right");if(t==="left")return i(n[0],"left")}}return e},Z0=function(e,t){return e?(t&&(e=M3(e,t)),A3[e.classes[0]]||null):null},Ln=function(e,t){var r=["nulldelimiter"].concat(e.baseSizingClasses());return z(t.concat(r))},oe=function(e,t,r){if(!e)return z();if(zo[e.type]){var n=zo[e.type](e,t);if(r&&t.size!==r.size){n=z(t.sizingClasses(r),[n],t);var s=t.sizeMultiplier/r.sizeMultiplier;n.height*=s,n.depth*=s}return n}else throw new R("Got group of unknown type: '"+e.type+"'")};function So(i,e){var t=z(["base"],i,e),r=z(["strut"]);return r.style.height=N(t.height+t.depth),t.depth&&(r.style.verticalAlign=N(-t.depth)),t.children.unshift(r),t}function Q0(i,e){var t=null;i.length===1&&i[0].type==="tag"&&(t=i[0].tag,i=i[0].body);var r=Pe(i,e,"root"),n;r.length===2&&r[1].hasClass("tag")&&(n=r.pop());for(var s=[],o=[],l=0;l<r.length;l++)if(o.push(r[l]),r[l].hasClass("mbin")||r[l].hasClass("mrel")||r[l].hasClass("allowbreak")){for(var a=!1;l<r.length-1&&r[l+1].hasClass("mspace")&&!r[l+1].hasClass("newline");)l++,o.push(r[l]),r[l].hasClass("nobreak")&&(a=!0);a||(s.push(So(o,e)),o=[])}else r[l].hasClass("newline")&&(o.pop(),o.length>0&&(s.push(So(o,e)),o=[]),s.push(r[l]));o.length>0&&s.push(So(o,e));var h;t?(h=So(Pe(t,e,!0)),h.classes=["tag"],s.push(h)):n&&s.push(n);var c=z(["katex-html"],s);if(c.setAttribute("aria-hidden","true"),h){var u=h.children[0];u.style.height=N(c.height+c.depth),c.depth&&(u.style.verticalAlign=N(-c.depth))}return c}function Dm(i){return new Qr(i)}var L=class{constructor(e,t,r){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=t||[],this.classes=r||[]}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=Br(this.classes));for(var r=0;r<this.children.length;r++)if(this.children[r]instanceof Ae&&this.children[r+1]instanceof Ae){for(var n=this.children[r].toText()+this.children[++r].toText();this.children[r+1]instanceof Ae;)n+=this.children[++r].toText();e.appendChild(new Ae(n).toNode())}else e.appendChild(this.children[r].toNode());return e}toMarkup(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=Ke(this.attributes[t]),e+='"');this.classes.length>0&&(e+=' class ="'+Ke(Br(this.classes))+'"'),e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}},Ae=class{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Ke(this.toText())}toText(){return this.text}},Io=class{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="\u200A":e>=.1666&&e<=.1667?this.character="\u2009":e>=.2222&&e<=.2223?this.character="\u2005":e>=.2777&&e<=.2778?this.character="\u2005\u200A":e>=-.05556&&e<=-.05555?this.character="\u200A\u2063":e>=-.1667&&e<=-.1666?this.character="\u2009\u2063":e>=-.2223&&e<=-.2222?this.character="\u205F\u2063":e>=-.2778&&e<=-.2777?this.character="\u2005\u2063":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",N(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+N(this.width)+'"/>'}toText(){return this.character?this.character:" "}},T3=new Set(["\\imath","\\jmath"]),D3=new Set(["mrow","mtable"]),Dt=function(e,t,r){return me[t][e]&&me[t][e].replace&&e.charCodeAt(0)!==55349&&!(wm.hasOwnProperty(e)&&r&&(r.fontFamily&&r.fontFamily.slice(4,6)==="tt"||r.font&&r.font.slice(4,6)==="tt"))&&(e=me[t][e].replace),new Ae(e)},uh=function(e){return e.length===1?e[0]:new L("mrow",e)},fh=function(e,t){if(t.fontFamily==="texttt")return"monospace";if(t.fontFamily==="textsf")return t.fontShape==="textit"&&t.fontWeight==="textbf"?"sans-serif-bold-italic":t.fontShape==="textit"?"sans-serif-italic":t.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(t.fontShape==="textit"&&t.fontWeight==="textbf")return"bold-italic";if(t.fontShape==="textit")return"italic";if(t.fontWeight==="textbf")return"bold";var r=t.font;if(!r||r==="mathnormal")return null;var n=e.mode;if(r==="mathit")return"italic";if(r==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(r==="mathbf")return"bold";if(r==="mathbb")return"double-struck";if(r==="mathsfit")return"sans-serif-italic";if(r==="mathfrak")return"fraktur";if(r==="mathscr"||r==="mathcal")return"script";if(r==="mathsf")return"sans-serif";if(r==="mathtt")return"monospace";var s=e.text;if(T3.has(s))return null;me[n][s]&&me[n][s].replace&&(s=me[n][s].replace);var o=J0[r].fontName;return ah(s,o,n)?J0[r].variant:null};function P0(i){if(!i)return!1;if(i.type==="mi"&&i.children.length===1){var e=i.children[0];return e instanceof Ae&&e.text==="."}else if(i.type==="mo"&&i.children.length===1&&i.getAttribute("separator")==="true"&&i.getAttribute("lspace")==="0em"&&i.getAttribute("rspace")==="0em"){var t=i.children[0];return t instanceof Ae&&t.text===","}else return!1}var ht=function(e,t,r){if(e.length===1){var n=ue(e[0],t);return r&&n instanceof L&&n.type==="mo"&&(n.setAttribute("lspace","0em"),n.setAttribute("rspace","0em")),[n]}for(var s=[],o,l=0;l<e.length;l++){var a=ue(e[l],t);if(a instanceof L&&o instanceof L){if(a.type==="mtext"&&o.type==="mtext"&&a.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...a.children);continue}else if(a.type==="mn"&&o.type==="mn"){o.children.push(...a.children);continue}else if(P0(a)&&o.type==="mn"){o.children.push(...a.children);continue}else if(a.type==="mn"&&P0(o))a.children=[...o.children,...a.children],s.pop();else if((a.type==="msup"||a.type==="msub")&&a.children.length>=1&&(o.type==="mn"||P0(o))){var h=a.children[0];h instanceof L&&h.type==="mn"&&(h.children=[...o.children,...h.children],s.pop())}else if(o.type==="mi"&&o.children.length===1){var c=o.children[0];if(c instanceof Ae&&c.text==="\u0338"&&(a.type==="mo"||a.type==="mi"||a.type==="mn")){var u=a.children[0];u instanceof Ae&&u.text.length>0&&(u.text=u.text.slice(0,1)+"\u0338"+u.text.slice(1),s.pop())}}}s.push(a),o=a}return s},Or=function(e,t,r){return uh(ht(e,t,r))},ue=function(e,t){if(!e)return new L("mrow");if(Lo[e.type]){var r=Lo[e.type](e,t);return r}else throw new R("Got group of unknown type: '"+e.type+"'")};function Yd(i,e,t,r,n){var s=ht(i,t),o;s.length===1&&s[0]instanceof L&&D3.has(s[0].type)?o=s[0]:o=new L("mrow",s);var l=new L("annotation",[new Ae(e)]);l.setAttribute("encoding","application/x-tex");var a=new L("semantics",[o,l]),h=new L("math",[a]);h.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),r&&h.setAttribute("display","block");var c=n?"katex":"katex-mathml";return z([c],[h])}var Bm=function(e){return new Eo({style:e.displayMode?Z.DISPLAY:Z.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},Em=function(e,t){if(t.displayMode){var r=["katex-display"];t.leqno&&r.push("leqno"),t.fleqn&&r.push("fleqn"),e=z(r,[e])}return e},B3=function(e,t,r){var n=Bm(r),s;if(r.output==="mathml")return Yd(e,t,n,r.displayMode,!0);if(r.output==="html"){var o=Q0(e,n);s=z(["katex"],[o])}else{var l=Yd(e,t,n,r.displayMode,!1),a=Q0(e,n);s=z(["katex"],[l,a])}return Em(s,r)},E3=function(e,t,r){var n=Bm(r),s=Q0(e,n),o=z(["katex"],[s]);return Em(o,r)},O3={widehat:"^",widecheck:"\u02C7",widetilde:"~",utilde:"~",overleftarrow:"\u2190",underleftarrow:"\u2190",xleftarrow:"\u2190",overrightarrow:"\u2192",underrightarrow:"\u2192",xrightarrow:"\u2192",underbrace:"\u23DF",overbrace:"\u23DE",overgroup:"\u23E0",undergroup:"\u23E1",overleftrightarrow:"\u2194",underleftrightarrow:"\u2194",xleftrightarrow:"\u2194",Overrightarrow:"\u21D2",xRightarrow:"\u21D2",overleftharpoon:"\u21BC",xleftharpoonup:"\u21BC",overrightharpoon:"\u21C0",xrightharpoonup:"\u21C0",xLeftarrow:"\u21D0",xLeftrightarrow:"\u21D4",xhookleftarrow:"\u21A9",xhookrightarrow:"\u21AA",xmapsto:"\u21A6",xrightharpoondown:"\u21C1",xleftharpoondown:"\u21BD",xrightleftharpoons:"\u21CC",xleftrightharpoons:"\u21CB",xtwoheadleftarrow:"\u219E",xtwoheadrightarrow:"\u21A0",xlongequal:"=",xtofrom:"\u21C4",xrightleftarrows:"\u21C4",xrightequilibrium:"\u21CC",xleftequilibrium:"\u21CB","\\cdrightarrow":"\u2192","\\cdleftarrow":"\u2190","\\cdlongequal":"="},Wo=function(e){var t=new L("mo",[new Ae(O3[e.replace(/^\\/,"")])]);return t.setAttribute("stretchy","true"),t},z3={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},L3=new Set(["widehat","widecheck","widetilde","utilde"]),Vo=function(e,t){function r(){var l=4e5,a=e.label.slice(1);if(L3.has(a)){var h=e,c=h.base.type==="ordgroup"?h.base.body.length:1,u,d,p;if(c>5)a==="widehat"||a==="widecheck"?(u=420,l=2364,p=.42,d=a+"4"):(u=312,l=2340,p=.34,d="tilde4");else{var v=[1,1,2,2,3,3][c];a==="widehat"||a==="widecheck"?(l=[0,1062,2364,2364,2364][v],u=[0,239,300,360,420][v],p=[0,.24,.3,.3,.36,.42][v],d=a+v):(l=[0,600,1033,2339,2340][v],u=[0,260,286,306,312][v],p=[0,.26,.286,.3,.306,.34][v],d="tilde"+v)}var y=new Zt(d),w=new qt([y],{width:"100%",height:N(p),viewBox:"0 0 "+l+" "+u,preserveAspectRatio:"none"});return{span:Er([],[w],t),minWidth:0,height:p}}else{var S=[],A=z3[a],[M,E,T]=A,B=T/1e3,D=M.length,V,U;if(D===1){var ie=A[3];V=["hide-tail"],U=[ie]}else if(D===2)V=["halfarrow-left","halfarrow-right"],U=["xMinYMin","xMaxYMin"];else if(D===3)V=["brace-left","brace-center","brace-right"],U=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+D+" children.");for(var j=0;j<D;j++){var $=new Zt(M[j]),ne=new qt([$],{width:"400em",height:N(B),viewBox:"0 0 "+l+" "+T,preserveAspectRatio:U[j]+" slice"}),J=Er([V[j]],[ne],t);if(D===1)return{span:J,minWidth:E,height:B};J.style.height=N(B),S.push(J)}return{span:z(["stretchy"],S,t),minWidth:E,height:B}}}var{span:n,minWidth:s,height:o}=r();return n.height=o,n.style.height=N(o),s>0&&(n.style.minWidth=N(s)),n},R3=function(e,t,r,n,s){var o,l=e.height+e.depth+r+n;if(/fbox|color|angl/.test(t)){if(o=z(["stretchy",t],[],s),t==="fbox"){var a=s.color&&s.getColor();a&&(o.style.borderColor=a)}}else{var h=[];/^[bx]cancel$/.test(t)&&h.push(new zn({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&h.push(new zn({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var c=new qt(h,{width:"100%",height:N(l)});o=Er([],[c],s)}return o.height=l,o.style.height=N(l),o};function Q(i,e){if(!i||i.type!==e)throw new Error("Expected node of type "+e+", but got "+(i?"node of type "+i.type:String(i)));return i}function dh(i){var e=$o(i);if(!e)throw new Error("Expected node of symbol group type, but got "+(i?"node of type "+i.type:String(i)));return e}function $o(i){return i&&(i.type==="atom"||m3.hasOwnProperty(i.type))?i:null}var mh=(i,e)=>{var t,r,n;i&&i.type==="supsub"?(r=Q(i.base,"accent"),t=r.base,i.base=t,n=f3(oe(i,e)),i.base=r):(r=Q(i,"accent"),t=r.base);var s=oe(t,e.havingCrampedStyle()),o=r.isShifty&&dr(t),l=0;if(o){var a=Tn(t),h=oe(a,e.havingCrampedStyle());l=$d(h).skew}var c=r.label==="\\c",u=c?s.height+s.depth:Math.min(s.height,e.fontMetrics().xHeight),d;if(r.isStretchy)d=Vo(r,e),d=ae({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:d,wrapperClasses:["svg-align"],wrapperStyle:l>0?{width:"calc(100% - "+N(2*l)+")",marginLeft:N(2*l)}:void 0}]});else{var p,v;r.label==="\\vec"?(p=Am("vec",e),v=Cm.vec[1]):(p=qo({mode:r.mode,text:r.label},e,"textord"),p=$d(p),p.italic=0,v=p.width,c&&(u+=p.depth)),d=z(["accent-body"],[p]);var y=r.label==="\\textcircled";y&&(d.classes.push("accent-full"),u=s.height);var w=l;y||(w-=v/2),d.style.left=N(w),r.label==="\\textcircled"&&(d.style.top=".2em"),d=ae({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-u},{type:"elem",elem:d}]})}var S=z(["mord","accent"],[d],e);return n?(n.children[0]=S,n.height=Math.max(S.height,n.height),n.classes[0]="mord",n):S},Om=(i,e)=>{var t=i.isStretchy?Wo(i.label):new L("mo",[Dt(i.label,i.mode)]),r=new L("mover",[ue(i.base,e),t]);return r.setAttribute("accent","true"),r},I3=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(i=>"\\"+i).join("|"));q({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(i,e)=>{var t=Ro(e[0]),r=!I3.test(i.funcName),n=!r||i.funcName==="\\widehat"||i.funcName==="\\widetilde"||i.funcName==="\\widecheck";return{type:"accent",mode:i.parser.mode,label:i.funcName,isStretchy:r,isShifty:n,base:t}},htmlBuilder:mh,mathmlBuilder:Om});q({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(i,e)=>{var t=e[0],r=i.parser.mode;return r==="math"&&(i.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+i.funcName+" works only in text mode"),r="text"),{type:"accent",mode:r,label:i.funcName,isStretchy:!1,isShifty:!0,base:t}},htmlBuilder:mh,mathmlBuilder:Om});q({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(i,e)=>{var{parser:t,funcName:r}=i,n=e[0];return{type:"accentUnder",mode:t.mode,label:r,base:n}},htmlBuilder:(i,e)=>{var t=oe(i.base,e),r=Vo(i,e),n=i.label==="\\utilde"?.12:0,s=ae({positionType:"top",positionData:t.height,children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:n},{type:"elem",elem:t}]});return z(["mord","accentunder"],[s],e)},mathmlBuilder:(i,e)=>{var t=Wo(i.label),r=new L("munder",[ue(i.base,e),t]);return r.setAttribute("accentunder","true"),r}});var Co=i=>{var e=new L("mpadded",i?[i]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};q({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(i,e,t){var{parser:r,funcName:n}=i;return{type:"xArrow",mode:r.mode,label:n,body:e[0],below:t[0]}},htmlBuilder(i,e){var t=e.style,r=e.havingStyle(t.sup()),n=zi(oe(i.body,r,e),e),s=i.label.slice(0,2)==="\\x"?"x":"cd";n.classes.push(s+"-arrow-pad");var o;i.below&&(r=e.havingStyle(t.sub()),o=zi(oe(i.below,r,e),e),o.classes.push(s+"-arrow-pad"));var l=Vo(i,e),a=-e.fontMetrics().axisHeight+.5*l.height,h=-e.fontMetrics().axisHeight-.5*l.height-.111;(n.depth>.25||i.label==="\\xleftequilibrium")&&(h-=n.depth);var c;if(o){var u=-e.fontMetrics().axisHeight+o.height+.5*l.height+.111;c=ae({positionType:"individualShift",children:[{type:"elem",elem:n,shift:h},{type:"elem",elem:l,shift:a},{type:"elem",elem:o,shift:u}]})}else c=ae({positionType:"individualShift",children:[{type:"elem",elem:n,shift:h},{type:"elem",elem:l,shift:a}]});return c.children[0].children[0].children[1].classes.push("svg-align"),z(["mrel","x-arrow"],[c],e)},mathmlBuilder(i,e){var t=Wo(i.label);t.setAttribute("minsize",i.label.charAt(0)==="x"?"1.75em":"3.0em");var r;if(i.body){var n=Co(ue(i.body,e));if(i.below){var s=Co(ue(i.below,e));r=new L("munderover",[t,s,n])}else r=new L("mover",[t,n])}else if(i.below){var o=Co(ue(i.below,e));r=new L("munder",[t,o])}else r=Co(),r=new L("mover",[t,r]);return r}});function zm(i,e){var t=Pe(i.body,e,!0);return z([i.mclass],t,e)}function Lm(i,e){var t,r=ht(i.body,e);return i.mclass==="minner"?t=new L("mpadded",r):i.mclass==="mord"?i.isCharacterBox?(t=r[0],t.type="mi"):t=new L("mi",r):(i.isCharacterBox?(t=r[0],t.type="mo"):t=new L("mo",r),i.mclass==="mbin"?(t.attributes.lspace="0.22em",t.attributes.rspace="0.22em"):i.mclass==="mpunct"?(t.attributes.lspace="0em",t.attributes.rspace="0.17em"):i.mclass==="mopen"||i.mclass==="mclose"?(t.attributes.lspace="0em",t.attributes.rspace="0em"):i.mclass==="minner"&&(t.attributes.lspace="0.0556em",t.attributes.width="+0.1111em")),t}q({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(i,e){var{parser:t,funcName:r}=i,n=e[0];return{type:"mclass",mode:t.mode,mclass:"m"+r.slice(5),body:De(n),isCharacterBox:dr(n)}},htmlBuilder:zm,mathmlBuilder:Lm});var Go=i=>{var e=i.type==="ordgroup"&&i.body.length?i.body[0]:i;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};q({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(i,e){var{parser:t}=i;return{type:"mclass",mode:t.mode,mclass:Go(e[0]),body:De(e[1]),isCharacterBox:dr(e[1])}}});q({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(i,e){var{parser:t,funcName:r}=i,n=e[1],s=e[0],o;r!=="\\stackrel"?o=Go(n):o="mrel";var l={type:"op",mode:n.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:r!=="\\stackrel",body:De(n)},a={type:"supsub",mode:s.mode,base:l,sup:r==="\\underset"?null:s,sub:r==="\\underset"?s:null};return{type:"mclass",mode:t.mode,mclass:o,body:[a],isCharacterBox:dr(a)}},htmlBuilder:zm,mathmlBuilder:Lm});q({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(i,e){var{parser:t}=i;return{type:"pmb",mode:t.mode,mclass:Go(e[0]),body:De(e[0])}},htmlBuilder(i,e){var t=Pe(i.body,e,!0),r=z([i.mclass],t,e);return r.style.textShadow="0.02em 0.01em 0.04px",r},mathmlBuilder(i,e){var t=ht(i.body,e),r=new L("mstyle",t);return r.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),r}});var P3={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},Xd=()=>({type:"styling",body:[],mode:"math",style:"display"}),_d=i=>i.type==="textord"&&i.text==="@",N3=(i,e)=>(i.type==="mathord"||i.type==="atom")&&i.text===e;function F3(i,e,t){var r=P3[i];switch(r){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return t.callFunction(r,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var n=t.callFunction("\\\\cdleft",[e[0]],[]),s={type:"atom",text:r,mode:"math",family:"rel"},o=t.callFunction("\\Big",[s],[]),l=t.callFunction("\\\\cdright",[e[1]],[]),a={type:"ordgroup",mode:"math",body:[n,o,l]};return t.callFunction("\\\\cdparent",[a],[])}case"\\\\cdlongequal":return t.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var h={type:"textord",text:"\\Vert",mode:"math"};return t.callFunction("\\Big",[h],[])}default:return{type:"textord",text:" ",mode:"math"}}}function H3(i){var e=[];for(i.gullet.beginGroup(),i.gullet.macros.set("\\cr","\\\\\\relax"),i.gullet.beginGroup();;){e.push(i.parseExpression(!1,"\\\\")),i.gullet.endGroup(),i.gullet.beginGroup();var t=i.fetch().text;if(t==="&"||t==="\\\\")i.consume();else if(t==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new R("Expected \\\\ or \\cr or \\end",i.nextToken)}for(var r=[],n=[r],s=0;s<e.length;s++){for(var o=e[s],l=Xd(),a=0;a<o.length;a++)if(!_d(o[a]))l.body.push(o[a]);else{r.push(l),a+=1;var h=dh(o[a]).text,c=new Array(2);if(c[0]={type:"ordgroup",mode:"math",body:[]},c[1]={type:"ordgroup",mode:"math",body:[]},!"=|.".includes(h))if("<>AV".includes(h))for(var u=0;u<2;u++){for(var d=!0,p=a+1;p<o.length;p++){if(N3(o[p],h)){d=!1,a=p;break}if(_d(o[p]))throw new R("Missing a "+h+" character to complete a CD arrow.",o[p]);c[u].body.push(o[p])}if(d)throw new R("Missing a "+h+" character to complete a CD arrow.",o[a])}else throw new R('Expected one of "<>AV=|." after @',o[a]);var v=F3(h,c,i),y={type:"styling",body:[v],mode:"math",style:"display"};r.push(y),l=Xd()}s%2===0?r.push(l):r.shift(),r=[],n.push(r)}i.gullet.endGroup(),i.gullet.endGroup();var w=new Array(n[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:n,arraystretch:1,addJot:!0,rowGaps:[null],cols:w,colSeparationType:"CD",hLinesBeforeRow:new Array(n.length+1).fill([])}}q({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(i,e){var{parser:t,funcName:r}=i;return{type:"cdlabel",mode:t.mode,side:r.slice(4),label:e[0]}},htmlBuilder(i,e){var t=e.havingStyle(e.style.sup()),r=zi(oe(i.label,t,e),e);return r.classes.push("cd-label-"+i.side),r.style.bottom=N(.8-r.depth),r.height=0,r.depth=0,r},mathmlBuilder(i,e){var t=new L("mrow",[ue(i.label,e)]);return t=new L("mpadded",[t]),t.setAttribute("width","0"),i.side==="left"&&t.setAttribute("lspace","-1width"),t.setAttribute("voffset","0.7em"),t=new L("mstyle",[t]),t.setAttribute("displaystyle","false"),t.setAttribute("scriptlevel","1"),t}});q({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(i,e){var{parser:t}=i;return{type:"cdlabelparent",mode:t.mode,fragment:e[0]}},htmlBuilder(i,e){var t=zi(oe(i.fragment,e),e);return t.classes.push("cd-vert-arrow"),t},mathmlBuilder(i,e){return new L("mrow",[ue(i.fragment,e)])}});q({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(i,e){for(var{parser:t}=i,r=Q(e[0],"ordgroup"),n=r.body,s="",o=0;o<n.length;o++){var l=Q(n[o],"textord");s+=l.text}var a=parseInt(s),h;if(isNaN(a))throw new R("\\@char has non-numeric argument "+s);if(a<0||a>=1114111)throw new R("\\@char with invalid code point "+s);return a<=65535?h=String.fromCharCode(a):(a-=65536,h=String.fromCharCode((a>>10)+55296,(a&1023)+56320)),{type:"textord",mode:t.mode,text:h}}});var Rm=(i,e)=>{var t=Pe(i.body,e.withColor(i.color),!1);return pr(t)},Im=(i,e)=>{var t=ht(i.body,e.withColor(i.color)),r=new L("mstyle",t);return r.setAttribute("mathcolor",i.color),r};q({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(i,e){var{parser:t}=i,r=Q(e[0],"color-token").color,n=e[1];return{type:"color",mode:t.mode,color:r,body:De(n)}},htmlBuilder:Rm,mathmlBuilder:Im});q({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(i,e){var{parser:t,breakOnTokenText:r}=i,n=Q(e[0],"color-token").color;t.gullet.macros.set("\\current@color",n);var s=t.parseExpression(!0,r);return{type:"color",mode:t.mode,color:n,body:s}},htmlBuilder:Rm,mathmlBuilder:Im});q({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(i,e,t){var{parser:r}=i,n=r.gullet.future().text==="["?r.parseSizeGroup(!0):null,s=!r.settings.displayMode||!r.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:r.mode,newLine:s,size:n&&Q(n,"size").value}},htmlBuilder(i,e){var t=z(["mspace"],[],e);return i.newLine&&(t.classes.push("newline"),i.size&&(t.style.marginTop=N(we(i.size,e)))),t},mathmlBuilder(i,e){var t=new L("mspace");return i.newLine&&(t.setAttribute("linebreak","newline"),i.size&&t.setAttribute("height",N(we(i.size,e)))),t}});var eh={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},Pm=i=>{var e=i.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new R("Expected a control sequence",i);return e},q3=i=>{var e=i.gullet.popToken();return e.text==="="&&(e=i.gullet.popToken(),e.text===" "&&(e=i.gullet.popToken())),e},Nm=(i,e,t,r)=>{var n=i.gullet.macros.get(t.text);n==null&&(t.noexpand=!0,n={tokens:[t],numArgs:0,unexpandable:!i.gullet.isExpandable(t.text)}),i.gullet.macros.set(e,n,r)};q({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(i){var{parser:e,funcName:t}=i;e.consumeSpaces();var r=e.fetch();if(eh[r.text])return(t==="\\global"||t==="\\\\globallong")&&(r.text=eh[r.text]),Q(e.parseFunction(),"internal");throw new R("Invalid token after macro prefix",r)}});q({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(i){var{parser:e,funcName:t}=i,r=e.gullet.popToken(),n=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(n))throw new R("Expected a control sequence",r);for(var s=0,o,l=[[]];e.gullet.future().text!=="{";)if(r=e.gullet.popToken(),r.text==="#"){if(e.gullet.future().text==="{"){o=e.gullet.future(),l[s].push("{");break}if(r=e.gullet.popToken(),!/^[1-9]$/.test(r.text))throw new R('Invalid argument number "'+r.text+'"');if(parseInt(r.text)!==s+1)throw new R('Argument number "'+r.text+'" out of order');s++,l.push([])}else{if(r.text==="EOF")throw new R("Expected a macro definition");l[s].push(r.text)}var{tokens:a}=e.gullet.consumeArg();return o&&a.unshift(o),(t==="\\edef"||t==="\\xdef")&&(a=e.gullet.expandTokens(a),a.reverse()),e.gullet.macros.set(n,{tokens:a,numArgs:s,delimiters:l},t===eh[t]),{type:"internal",mode:e.mode}}});q({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(i){var{parser:e,funcName:t}=i,r=Pm(e.gullet.popToken());e.gullet.consumeSpaces();var n=q3(e);return Nm(e,r,n,t==="\\\\globallet"),{type:"internal",mode:e.mode}}});q({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(i){var{parser:e,funcName:t}=i,r=Pm(e.gullet.popToken()),n=e.gullet.popToken(),s=e.gullet.popToken();return Nm(e,r,s,t==="\\\\globalfuture"),e.gullet.pushToken(s),e.gullet.pushToken(n),{type:"internal",mode:e.mode}}});var Mn=function(e,t,r){var n=me.math[e]&&me.math[e].replace,s=ah(n||e,t,r);if(!s)throw new Error("Unsupported symbol "+e+" and font size "+t+".");return s},ph=function(e,t,r,n){var s=r.havingBaseStyle(t),o=z(n.concat(s.sizingClasses(r)),[e],r),l=s.sizeMultiplier/r.sizeMultiplier;return o.height*=l,o.depth*=l,o.maxFontSize=s.sizeMultiplier,o},Fm=function(e,t,r){var n=t.havingBaseStyle(r),s=(1-t.sizeMultiplier/n.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=N(s),e.height-=s,e.depth+=s},W3=function(e,t,r,n,s,o){var l=Qe(e,"Main-Regular",s,n),a=ph(l,t,n,o);return r&&Fm(a,n,t),a},V3=function(e,t,r,n){return Qe(e,"Size"+t+"-Regular",r,n)},Hm=function(e,t,r,n,s,o){var l=V3(e,t,s,n),a=ph(z(["delimsizing","size"+t],[l],n),Z.TEXT,n,o);return r&&Fm(a,n,Z.TEXT),a},N0=function(e,t,r){var n;t==="Size1-Regular"?n="delim-size1":n="delim-size4";var s=z(["delimsizinginner",n],[z([],[Qe(e,t,r)])]);return{type:"elem",elem:s}},F0=function(e,t,r){var n=Jt["Size4-Regular"][e.charCodeAt(0)]?Jt["Size4-Regular"][e.charCodeAt(0)][4]:Jt["Size1-Regular"][e.charCodeAt(0)][4],s=new Zt("inner",n3(e,Math.round(1e3*t))),o=new qt([s],{width:N(n),height:N(t),style:"width:"+N(n),viewBox:"0 0 "+1e3*n+" "+Math.round(1e3*t),preserveAspectRatio:"xMinYMin"}),l=Er([],[o],r);return l.height=t,l.style.height=N(t),l.style.width=N(n),{type:"elem",elem:l}},th=.008,Ao={type:"kern",size:-1*th},$3=new Set(["|","\\lvert","\\rvert","\\vert"]),G3=new Set(["\\|","\\lVert","\\rVert","\\Vert"]),qm=function(e,t,r,n,s,o){var l,a,h,c,u="",d=0;l=h=c=e,a=null;var p="Size1-Regular";e==="\\uparrow"?h=c="\u23D0":e==="\\Uparrow"?h=c="\u2016":e==="\\downarrow"?l=h="\u23D0":e==="\\Downarrow"?l=h="\u2016":e==="\\updownarrow"?(l="\\uparrow",h="\u23D0",c="\\downarrow"):e==="\\Updownarrow"?(l="\\Uparrow",h="\u2016",c="\\Downarrow"):$3.has(e)?(h="\u2223",u="vert",d=333):G3.has(e)?(h="\u2225",u="doublevert",d=556):e==="["||e==="\\lbrack"?(l="\u23A1",h="\u23A2",c="\u23A3",p="Size4-Regular",u="lbrack",d=667):e==="]"||e==="\\rbrack"?(l="\u23A4",h="\u23A5",c="\u23A6",p="Size4-Regular",u="rbrack",d=667):e==="\\lfloor"||e==="\u230A"?(h=l="\u23A2",c="\u23A3",p="Size4-Regular",u="lfloor",d=667):e==="\\lceil"||e==="\u2308"?(l="\u23A1",h=c="\u23A2",p="Size4-Regular",u="lceil",d=667):e==="\\rfloor"||e==="\u230B"?(h=l="\u23A5",c="\u23A6",p="Size4-Regular",u="rfloor",d=667):e==="\\rceil"||e==="\u2309"?(l="\u23A4",h=c="\u23A5",p="Size4-Regular",u="rceil",d=667):e==="("||e==="\\lparen"?(l="\u239B",h="\u239C",c="\u239D",p="Size4-Regular",u="lparen",d=875):e===")"||e==="\\rparen"?(l="\u239E",h="\u239F",c="\u23A0",p="Size4-Regular",u="rparen",d=875):e==="\\{"||e==="\\lbrace"?(l="\u23A7",a="\u23A8",c="\u23A9",h="\u23AA",p="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(l="\u23AB",a="\u23AC",c="\u23AD",h="\u23AA",p="Size4-Regular"):e==="\\lgroup"||e==="\u27EE"?(l="\u23A7",c="\u23A9",h="\u23AA",p="Size4-Regular"):e==="\\rgroup"||e==="\u27EF"?(l="\u23AB",c="\u23AD",h="\u23AA",p="Size4-Regular"):e==="\\lmoustache"||e==="\u23B0"?(l="\u23A7",c="\u23AD",h="\u23AA",p="Size4-Regular"):(e==="\\rmoustache"||e==="\u23B1")&&(l="\u23AB",c="\u23A9",h="\u23AA",p="Size4-Regular");var v=Mn(l,p,s),y=v.height+v.depth,w=Mn(h,p,s),S=w.height+w.depth,A=Mn(c,p,s),M=A.height+A.depth,E=0,T=1;if(a!==null){var B=Mn(a,p,s);E=B.height+B.depth,T=2}var D=y+M+E,V=Math.max(0,Math.ceil((t-D)/(T*S))),U=D+V*T*S,ie=n.fontMetrics().axisHeight;r&&(ie*=n.sizeMultiplier);var j=U/2-ie,$=[];if(u.length>0){var ne=U-y-M,J=Math.round(U*1e3),re=s3(u,Math.round(ne*1e3)),ge=new Zt(u,re),Be=(d/1e3).toFixed(3)+"em",qe=(J/1e3).toFixed(3)+"em",Me=new qt([ge],{width:Be,height:qe,viewBox:"0 0 "+d+" "+J}),Te=Er([],[Me],n);Te.height=J/1e3,Te.style.width=Be,Te.style.height=qe,$.push({type:"elem",elem:Te})}else{if($.push(N0(c,p,s)),$.push(Ao),a===null){var Ne=U-y-M+2*th;$.push(F0(h,Ne,n))}else{var pe=(U-y-M-E)/2+2*th;$.push(F0(h,pe,n)),$.push(Ao),$.push(N0(a,p,s)),$.push(Ao),$.push(F0(h,pe,n))}$.push(Ao),$.push(N0(l,p,s))}var je=n.havingBaseStyle(Z.TEXT),Bt=ae({positionType:"bottom",positionData:j,children:$});return ph(z(["delimsizing","mult"],[Bt],je),Z.TEXT,n,o)},H0=80,q0=.08,W0=function(e,t,r,n,s){var o=i3(e,n,r),l=new Zt(e,o),a=new qt([l],{width:"400em",height:N(t),viewBox:"0 0 400000 "+r,preserveAspectRatio:"xMinYMin slice"});return Er(["hide-tail"],[a],s)},U3=function(e,t){var r=t.havingBaseSizing(),n=Um("\\surd",e*r.sizeMultiplier,Gm,r),s=r.sizeMultiplier,o=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),l,a=0,h=0,c=0,u;return n.type==="small"?(c=1e3+1e3*o+H0,e<1?s=1:e<1.4&&(s=.7),a=(1+o+q0)/s,h=(1+o)/s,l=W0("sqrtMain",a,c,o,t),l.style.minWidth="0.853em",u=.833/s):n.type==="large"?(c=(1e3+H0)*Dn[n.size],h=(Dn[n.size]+o)/s,a=(Dn[n.size]+o+q0)/s,l=W0("sqrtSize"+n.size,a,c,o,t),l.style.minWidth="1.02em",u=1/s):(a=e+o+q0,h=e+o,c=Math.floor(1e3*e+o)+H0,l=W0("sqrtTall",a,c,o,t),l.style.minWidth="0.742em",u=1.056),l.height=h,l.style.height=N(a),{span:l,advanceWidth:u,ruleWidth:(t.fontMetrics().sqrtRuleThickness+o)*s}},Wm=new Set(["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\u230A","\u230B","\\lceil","\\rceil","\u2308","\u2309","\\surd"]),K3=new Set(["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\u27EE","\u27EF","\\lmoustache","\\rmoustache","\u23B0","\u23B1"]),Vm=new Set(["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"]),Dn=[0,1.2,1.8,2.4,3],$m=function(e,t,r,n,s){if(e==="<"||e==="\\lt"||e==="\u27E8"?e="\\langle":(e===">"||e==="\\gt"||e==="\u27E9")&&(e="\\rangle"),Wm.has(e)||Vm.has(e))return Hm(e,t,!1,r,n,s);if(K3.has(e))return qm(e,Dn[t],!1,r,n,s);throw new R("Illegal delimiter: '"+e+"'")},j3=[{type:"small",style:Z.SCRIPTSCRIPT},{type:"small",style:Z.SCRIPT},{type:"small",style:Z.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Y3=[{type:"small",style:Z.SCRIPTSCRIPT},{type:"small",style:Z.SCRIPT},{type:"small",style:Z.TEXT},{type:"stack"}],Gm=[{type:"small",style:Z.SCRIPTSCRIPT},{type:"small",style:Z.SCRIPT},{type:"small",style:Z.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],X3=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},Um=function(e,t,r,n){for(var s=Math.min(2,3-n.style.size),o=s;o<r.length&&r[o].type!=="stack";o++){var l=Mn(e,X3(r[o]),"math"),a=l.height+l.depth;if(r[o].type==="small"){var h=n.havingBaseStyle(r[o].style);a*=h.sizeMultiplier}if(a>t)return r[o]}return r[r.length-1]},rh=function(e,t,r,n,s,o){e==="<"||e==="\\lt"||e==="\u27E8"?e="\\langle":(e===">"||e==="\\gt"||e==="\u27E9")&&(e="\\rangle");var l;Vm.has(e)?l=j3:Wm.has(e)?l=Gm:l=Y3;var a=Um(e,t,l,n);return a.type==="small"?W3(e,a.style,r,n,s,o):a.type==="large"?Hm(e,a.size,r,n,s,o):qm(e,t,r,n,s,o)},V0=function(e,t,r,n,s,o){var l=n.fontMetrics().axisHeight*n.sizeMultiplier,a=901,h=5/n.fontMetrics().ptPerEm,c=Math.max(t-l,r+l),u=Math.max(c/500*a,2*c-h);return rh(e,u,!0,n,s,o)},Jd={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},_3=new Set(["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\u230A","\u230B","\\lceil","\\rceil","\u2308","\u2309","<",">","\\langle","\u27E8","\\rangle","\u27E9","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\u27EE","\u27EF","\\lmoustache","\\rmoustache","\u23B0","\u23B1","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."]);function Uo(i,e){var t=$o(i);if(t&&_3.has(t.text))return t;throw t?new R("Invalid delimiter '"+t.text+"' after '"+e.funcName+"'",i):new R("Invalid delimiter type '"+i.type+"'",i)}q({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(i,e)=>{var t=Uo(e[0],i);return{type:"delimsizing",mode:i.parser.mode,size:Jd[i.funcName].size,mclass:Jd[i.funcName].mclass,delim:t.text}},htmlBuilder:(i,e)=>i.delim==="."?z([i.mclass]):$m(i.delim,i.size,e,i.mode,[i.mclass]),mathmlBuilder:i=>{var e=[];i.delim!=="."&&e.push(Dt(i.delim,i.mode));var t=new L("mo",e);i.mclass==="mopen"||i.mclass==="mclose"?t.setAttribute("fence","true"):t.setAttribute("fence","false"),t.setAttribute("stretchy","true");var r=N(Dn[i.size]);return t.setAttribute("minsize",r),t.setAttribute("maxsize",r),t}});function Zd(i){if(!i.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}q({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(i,e)=>{var t=i.parser.gullet.macros.get("\\current@color");if(t&&typeof t!="string")throw new R("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:i.parser.mode,delim:Uo(e[0],i).text,color:t}}});q({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(i,e)=>{var t=Uo(e[0],i),r=i.parser;++r.leftrightDepth;var n=r.parseExpression(!1);--r.leftrightDepth,r.expect("\\right",!1);var s=Q(r.parseFunction(),"leftright-right");return{type:"leftright",mode:r.mode,body:n,left:t.text,right:s.delim,rightColor:s.color}},htmlBuilder:(i,e)=>{Zd(i);for(var t=Pe(i.body,e,!0,["mopen","mclose"]),r=0,n=0,s=!1,o=0;o<t.length;o++)t[o].isMiddle?s=!0:(r=Math.max(t[o].height,r),n=Math.max(t[o].depth,n));r*=e.sizeMultiplier,n*=e.sizeMultiplier;var l;if(i.left==="."?l=Ln(e,["mopen"]):l=V0(i.left,r,n,e,i.mode,["mopen"]),t.unshift(l),s)for(var a=1;a<t.length;a++){var h=t[a],c=h.isMiddle;c&&(t[a]=V0(c.delim,r,n,c.options,i.mode,[]))}var u;if(i.right===".")u=Ln(e,["mclose"]);else{var d=i.rightColor?e.withColor(i.rightColor):e;u=V0(i.right,r,n,d,i.mode,["mclose"])}return t.push(u),z(["minner"],t,e)},mathmlBuilder:(i,e)=>{Zd(i);var t=ht(i.body,e);if(i.left!=="."){var r=new L("mo",[Dt(i.left,i.mode)]);r.setAttribute("fence","true"),t.unshift(r)}if(i.right!=="."){var n=new L("mo",[Dt(i.right,i.mode)]);n.setAttribute("fence","true"),i.rightColor&&n.setAttribute("mathcolor",i.rightColor),t.push(n)}return uh(t)}});q({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(i,e)=>{var t=Uo(e[0],i);if(!i.parser.leftrightDepth)throw new R("\\middle without preceding \\left",t);return{type:"middle",mode:i.parser.mode,delim:t.text}},htmlBuilder:(i,e)=>{var t;if(i.delim===".")t=Ln(e,[]);else{t=$m(i.delim,1,e,i.mode,[]);var r={delim:i.delim,options:e};t.isMiddle=r}return t},mathmlBuilder:(i,e)=>{var t=i.delim==="\\vert"||i.delim==="|"?Dt("|","text"):Dt(i.delim,i.mode),r=new L("mo",[t]);return r.setAttribute("fence","true"),r.setAttribute("lspace","0.05em"),r.setAttribute("rspace","0.05em"),r}});var gh=(i,e)=>{var t=zi(oe(i.body,e),e),r=i.label.slice(1),n=e.sizeMultiplier,s,o=0,l=dr(i.body);if(r==="sout")s=z(["stretchy","sout"]),s.height=e.fontMetrics().defaultRuleThickness/n,o=-.5*e.fontMetrics().xHeight;else if(r==="phase"){var a=we({number:.6,unit:"pt"},e),h=we({number:.35,unit:"ex"},e),c=e.havingBaseSizing();n=n/c.sizeMultiplier;var u=t.height+t.depth+a+h;t.style.paddingLeft=N(u/2+a);var d=Math.floor(1e3*u*n),p=t3(d),v=new qt([new Zt("phase",p)],{width:"400em",height:N(d/1e3),viewBox:"0 0 400000 "+d,preserveAspectRatio:"xMinYMin slice"});s=Er(["hide-tail"],[v],e),s.style.height=N(u),o=t.depth+a+h}else{/cancel/.test(r)?l||t.classes.push("cancel-pad"):r==="angl"?t.classes.push("anglpad"):t.classes.push("boxpad");var y=0,w=0,S=0;/box/.test(r)?(S=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),y=e.fontMetrics().fboxsep+(r==="colorbox"?0:S),w=y):r==="angl"?(S=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),y=4*S,w=Math.max(0,.25-t.depth)):(y=l?.2:0,w=y),s=R3(t,r,y,w,e),/fbox|boxed|fcolorbox/.test(r)?(s.style.borderStyle="solid",s.style.borderWidth=N(S)):r==="angl"&&S!==.049&&(s.style.borderTopWidth=N(S),s.style.borderRightWidth=N(S)),o=t.depth+w,i.backgroundColor&&(s.style.backgroundColor=i.backgroundColor,i.borderColor&&(s.style.borderColor=i.borderColor))}var A;if(i.backgroundColor)A=ae({positionType:"individualShift",children:[{type:"elem",elem:s,shift:o},{type:"elem",elem:t,shift:0}]});else{var M=/cancel|phase/.test(r)?["svg-align"]:[];A=ae({positionType:"individualShift",children:[{type:"elem",elem:t,shift:0},{type:"elem",elem:s,shift:o,wrapperClasses:M}]})}return/cancel/.test(r)&&(A.height=t.height,A.depth=t.depth),/cancel/.test(r)&&!l?z(["mord","cancel-lap"],[A],e):z(["mord"],[A],e)},vh=(i,e)=>{var t=0,r=new L(i.label.includes("colorbox")?"mpadded":"menclose",[ue(i.body,e)]);switch(i.label){case"\\cancel":r.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike");break;case"\\phase":r.setAttribute("notation","phasorangle");break;case"\\sout":r.setAttribute("notation","horizontalstrike");break;case"\\fbox":r.setAttribute("notation","box");break;case"\\angl":r.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(t=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,r.setAttribute("width","+"+2*t+"pt"),r.setAttribute("height","+"+2*t+"pt"),r.setAttribute("lspace",t+"pt"),r.setAttribute("voffset",t+"pt"),i.label==="\\fcolorbox"){var n=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);r.setAttribute("style","border: "+n+"em solid "+String(i.borderColor))}break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return i.backgroundColor&&r.setAttribute("mathbackground",i.backgroundColor),r};q({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(i,e,t){var{parser:r,funcName:n}=i,s=Q(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:r.mode,label:n,backgroundColor:s,body:o}},htmlBuilder:gh,mathmlBuilder:vh});q({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(i,e,t){var{parser:r,funcName:n}=i,s=Q(e[0],"color-token").color,o=Q(e[1],"color-token").color,l=e[2];return{type:"enclose",mode:r.mode,label:n,backgroundColor:o,borderColor:s,body:l}},htmlBuilder:gh,mathmlBuilder:vh});q({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(i,e){var{parser:t}=i;return{type:"enclose",mode:t.mode,label:"\\fbox",body:e[0]}}});q({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(i,e){var{parser:t,funcName:r}=i,n=e[0];return{type:"enclose",mode:t.mode,label:r,body:n}},htmlBuilder:gh,mathmlBuilder:vh});q({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(i,e){var{parser:t}=i;return{type:"enclose",mode:t.mode,label:"\\angl",body:e[0]}}});var Km={};function Qt(i){for(var{type:e,names:t,props:r,handler:n,htmlBuilder:s,mathmlBuilder:o}=i,l={type:e,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:n},a=0;a<t.length;++a)Km[t[a]]=l;s&&(zo[e]=s),o&&(Lo[e]=o)}var jm={};function b(i,e){jm[i]=e}function Qd(i){var e=[];i.consumeSpaces();var t=i.fetch().text;for(t==="\\relax"&&(i.consume(),i.consumeSpaces(),t=i.fetch().text);t==="\\hline"||t==="\\hdashline";)i.consume(),e.push(t==="\\hdashline"),i.consumeSpaces(),t=i.fetch().text;return e}var Ko=i=>{var e=i.parser.settings;if(!e.displayMode)throw new R("{"+i.envName+"} can be used only in display mode.")},J3=new Set(["gather","gather*"]);function bh(i){if(!i.includes("ed"))return!i.includes("*")}function zr(i,e,t){var{hskipBeforeAndAfter:r,addJot:n,cols:s,arraystretch:o,colSeparationType:l,autoTag:a,singleRow:h,emptySingleRow:c,maxNumCols:u,leqno:d}=e;if(i.gullet.beginGroup(),h||i.gullet.macros.set("\\cr","\\\\\\relax"),!o){var p=i.gullet.expandMacroAsText("\\arraystretch");if(p==null)o=1;else if(o=parseFloat(p),!o||o<0)throw new R("Invalid \\arraystretch: "+p)}i.gullet.beginGroup();var v=[],y=[v],w=[],S=[],A=a!=null?[]:void 0;function M(){a&&i.gullet.macros.set("\\@eqnsw","1",!0)}function E(){A&&(i.gullet.macros.get("\\df@tag")?(A.push(i.subparse([new mt("\\df@tag")])),i.gullet.macros.set("\\df@tag",void 0,!0)):A.push(!!a&&i.gullet.macros.get("\\@eqnsw")==="1"))}for(M(),S.push(Qd(i));;){var T=i.parseExpression(!1,h?"\\end":"\\\\");i.gullet.endGroup(),i.gullet.beginGroup(),T={type:"ordgroup",mode:i.mode,body:T},t&&(T={type:"styling",mode:i.mode,style:t,body:[T]}),v.push(T);var B=i.fetch().text;if(B==="&"){if(u&&v.length===u){if(h||l)throw new R("Too many tab characters: &",i.nextToken);i.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}i.consume()}else if(B==="\\end"){E(),v.length===1&&T.type==="styling"&&T.body[0].body.length===0&&(y.length>1||!c)&&y.pop(),S.length<y.length+1&&S.push([]);break}else if(B==="\\\\"){i.consume();var D=void 0;i.gullet.future().text!==" "&&(D=i.parseSizeGroup(!0)),w.push(D?D.value:null),E(),S.push(Qd(i)),v=[],y.push(v),M()}else throw new R("Expected & or \\\\ or \\cr or \\end",i.nextToken)}return i.gullet.endGroup(),i.gullet.endGroup(),{type:"array",mode:i.mode,addJot:n,arraystretch:o,body:y,cols:s,rowGaps:w,hskipBeforeAndAfter:r,hLinesBeforeRow:S,colSeparationType:l,tags:A,leqno:d}}function yh(i){return i.slice(0,1)==="d"?"display":"text"}var er=function(e,t){var r,n,s=e.body.length,o=e.hLinesBeforeRow,l=0,a=new Array(s),h=[],c=Math.max(t.fontMetrics().arrayRuleWidth,t.minRuleThickness),u=1/t.fontMetrics().ptPerEm,d=5*u;if(e.colSeparationType&&e.colSeparationType==="small"){var p=t.havingStyle(Z.SCRIPT).sizeMultiplier;d=.2778*(p/t.sizeMultiplier)}var v=e.colSeparationType==="CD"?we({number:3,unit:"ex"},t):12*u,y=3*u,w=e.arraystretch*v,S=.7*w,A=.3*w,M=0;function E(Fn){for(var Hn=0;Hn<Fn.length;++Hn)Hn>0&&(M+=.25),h.push({pos:M,isDashed:Fn[Hn]})}for(E(o[0]),r=0;r<e.body.length;++r){var T=e.body[r],B=S,D=A;l<T.length&&(l=T.length);var V=new Array(T.length);for(n=0;n<T.length;++n){var U=oe(T[n],t);D<U.depth&&(D=U.depth),B<U.height&&(B=U.height),V[n]=U}var ie=e.rowGaps[r],j=0;ie&&(j=we(ie,t),j>0&&(j+=A,D<j&&(D=j),j=0)),e.addJot&&(D+=y),V.height=B,V.depth=D,M+=B,V.pos=M,M+=D+j,a[r]=V,E(o[r+1])}var $=M/2+t.fontMetrics().axisHeight,ne=e.cols||[],J=[],re,ge,Be=[];if(e.tags&&e.tags.some(Fn=>Fn))for(r=0;r<s;++r){var qe=a[r],Me=qe.pos-$,Te=e.tags[r],Ne=void 0;Te===!0?Ne=z(["eqn-num"],[],t):Te===!1?Ne=z([],[],t):Ne=z([],Pe(Te,t,!0),t),Ne.depth=qe.depth,Ne.height=qe.height,Be.push({type:"elem",elem:Ne,shift:Me})}for(n=0,ge=0;n<l||ge<ne.length;++n,++ge){for(var pe=ne[ge]||{},je=!0;pe.type==="separator";){if(je||(re=z(["arraycolsep"],[]),re.style.width=N(t.fontMetrics().doubleRuleSep),J.push(re)),pe.separator==="|"||pe.separator===":"){var Bt=pe.separator==="|"?"solid":"dashed",ct=z(["vertical-separator"],[],t);ct.style.height=N(M),ct.style.borderRightWidth=N(c),ct.style.borderRightStyle=Bt,ct.style.margin="0 "+N(-c/2);var Lr=M-$;Lr&&(ct.style.verticalAlign=N(-Lr)),J.push(ct)}else throw new R("Invalid separator type: "+pe.separator);ge++,pe=ne[ge]||{},je=!1}if(!(n>=l)){var ir=void 0;if(n>0||e.hskipBeforeAndAfter){var Dh;ir=(Dh=pe.pregap)!=null?Dh:d,ir!==0&&(re=z(["arraycolsep"],[]),re.style.width=N(ir),J.push(re))}var ni=[];for(r=0;r<s;++r){var Pn=a[r],Nn=Pn[n];if(Nn){var v1=Pn.pos-$;Nn.depth=Pn.depth,Nn.height=Pn.height,ni.push({type:"elem",elem:Nn,shift:v1})}}if(ni=ae({positionType:"individualShift",children:ni}),ni=z(["col-align-"+(pe.align||"c")],[ni]),J.push(ni),n<l-1||e.hskipBeforeAndAfter){var Bh;ir=(Bh=pe.postgap)!=null?Bh:d,ir!==0&&(re=z(["arraycolsep"],[]),re.style.width=N(ir),J.push(re))}}}if(a=z(["mtable"],J),h.length>0){for(var b1=Oi("hline",t,c),y1=Oi("hdashline",t,c),Qo=[{type:"elem",elem:a,shift:0}];h.length>0;){var Eh=h.pop(),Oh=Eh.pos-$;Eh.isDashed?Qo.push({type:"elem",elem:y1,shift:Oh}):Qo.push({type:"elem",elem:b1,shift:Oh})}a=ae({positionType:"individualShift",children:Qo})}if(Be.length===0)return z(["mord"],[a],t);var el=ae({positionType:"individualShift",children:Be});return el=z(["tag"],[el],t),pr([a,el])},Z3={c:"center ",l:"left ",r:"right "},tr=function(e,t){for(var r=[],n=new L("mtd",[],["mtr-glue"]),s=new L("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var l=e.body[o],a=[],h=0;h<l.length;h++)a.push(new L("mtd",[ue(l[h],t)]));e.tags&&e.tags[o]&&(a.unshift(n),a.push(n),e.leqno?a.unshift(s):a.push(s)),r.push(new L("mtr",a))}var c=new L("mtable",r),u=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);c.setAttribute("rowspacing",N(u));var d="",p="";if(e.cols&&e.cols.length>0){var v=e.cols,y="",w=!1,S=0,A=v.length;v[0].type==="separator"&&(d+="top ",S=1),v[v.length-1].type==="separator"&&(d+="bottom ",A-=1);for(var M=S;M<A;M++)v[M].type==="align"?(p+=Z3[v[M].align],w&&(y+="none "),w=!0):v[M].type==="separator"&&w&&(y+=v[M].separator==="|"?"solid ":"dashed ",w=!1);c.setAttribute("columnalign",p.trim()),/[sd]/.test(y)&&c.setAttribute("columnlines",y.trim())}if(e.colSeparationType==="align"){for(var E=e.cols||[],T="",B=1;B<E.length;B++)T+=B%2?"0em ":"1em ";c.setAttribute("columnspacing",T.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?c.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?c.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?c.setAttribute("columnspacing","0.5em"):c.setAttribute("columnspacing","1em");var D="",V=e.hLinesBeforeRow;d+=V[0].length>0?"left ":"",d+=V[V.length-1].length>0?"right ":"";for(var U=1;U<V.length-1;U++)D+=V[U].length===0?"none ":V[U][0]?"dashed ":"solid ";return/[sd]/.test(D)&&c.setAttribute("rowlines",D.trim()),d!==""&&(c=new L("menclose",[c]),c.setAttribute("notation",d.trim())),e.arraystretch&&e.arraystretch<1&&(c=new L("mstyle",[c]),c.setAttribute("scriptlevel","1")),c},Ym=function(e,t){e.envName.includes("ed")||Ko(e);var r=[],n=e.envName.includes("at")?"alignat":"align",s=e.envName==="split",o=zr(e.parser,{cols:r,addJot:!0,autoTag:s?void 0:bh(e.envName),emptySingleRow:!0,colSeparationType:n,maxNumCols:s?2:void 0,leqno:e.parser.settings.leqno},"display"),l,a=0,h={type:"ordgroup",mode:e.mode,body:[]};if(t[0]&&t[0].type==="ordgroup"){for(var c="",u=0;u<t[0].body.length;u++){var d=Q(t[0].body[u],"textord");c+=d.text}l=Number(c),a=l*2}var p=!a;o.body.forEach(function(S){for(var A=1;A<S.length;A+=2){var M=Q(S[A],"styling"),E=Q(M.body[0],"ordgroup");E.body.unshift(h)}if(p)a<S.length&&(a=S.length);else{var T=S.length/2;if(l<T)throw new R("Too many math in a row: "+("expected "+l+", but got "+T),S[0])}});for(var v=0;v<a;++v){var y="r",w=0;v%2===1?y="l":v>0&&p&&(w=1),r[v]={type:"align",align:y,pregap:w,postgap:0}}return o.colSeparationType=p?"align":"alignat",o};Qt({type:"array",names:["array","darray"],props:{numArgs:1},handler(i,e){var t=$o(e[0]),r=t?[e[0]]:Q(e[0],"ordgroup").body,n=r.map(function(o){var l=dh(o),a=l.text;if("lcr".includes(a))return{type:"align",align:a};if(a==="|")return{type:"separator",separator:"|"};if(a===":")return{type:"separator",separator:":"};throw new R("Unknown column alignment: "+a,o)}),s={cols:n,hskipBeforeAndAfter:!0,maxNumCols:n.length};return zr(i.parser,s,yh(i.envName))},htmlBuilder:er,mathmlBuilder:tr});Qt({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(i){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[i.envName.replace("*","")],t="c",r={hskipBeforeAndAfter:!1,cols:[{type:"align",align:t}]};if(i.envName.charAt(i.envName.length-1)==="*"){var n=i.parser;if(n.consumeSpaces(),n.fetch().text==="["){if(n.consume(),n.consumeSpaces(),t=n.fetch().text,!"lcr".includes(t))throw new R("Expected l or c or r",n.nextToken);n.consume(),n.consumeSpaces(),n.expect("]"),n.consume(),r.cols=[{type:"align",align:t}]}}var s=zr(i.parser,r,yh(i.envName)),o=Math.max(0,...s.body.map(l=>l.length));return s.cols=new Array(o).fill({type:"align",align:t}),e?{type:"leftright",mode:i.mode,body:[s],left:e[0],right:e[1],rightColor:void 0}:s},htmlBuilder:er,mathmlBuilder:tr});Qt({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(i){var e={arraystretch:.5},t=zr(i.parser,e,"script");return t.colSeparationType="small",t},htmlBuilder:er,mathmlBuilder:tr});Qt({type:"array",names:["subarray"],props:{numArgs:1},handler(i,e){var t=$o(e[0]),r=t?[e[0]]:Q(e[0],"ordgroup").body,n=r.map(function(o){var l=dh(o),a=l.text;if("lc".includes(a))return{type:"align",align:a};throw new R("Unknown column alignment: "+a,o)});if(n.length>1)throw new R("{subarray} can contain only one column");var s={cols:n,hskipBeforeAndAfter:!1,arraystretch:.5};if(s=zr(i.parser,s,"script"),s.body.length>0&&s.body[0].length>1)throw new R("{subarray} can contain only one column");return s},htmlBuilder:er,mathmlBuilder:tr});Qt({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(i){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},t=zr(i.parser,e,yh(i.envName));return{type:"leftright",mode:i.mode,body:[t],left:i.envName.includes("r")?".":"\\{",right:i.envName.includes("r")?"\\}":".",rightColor:void 0}},htmlBuilder:er,mathmlBuilder:tr});Qt({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:Ym,htmlBuilder:er,mathmlBuilder:tr});Qt({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(i){J3.has(i.envName)&&Ko(i);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:bh(i.envName),emptySingleRow:!0,leqno:i.parser.settings.leqno};return zr(i.parser,e,"display")},htmlBuilder:er,mathmlBuilder:tr});Qt({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:Ym,htmlBuilder:er,mathmlBuilder:tr});Qt({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(i){Ko(i);var e={autoTag:bh(i.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:i.parser.settings.leqno};return zr(i.parser,e,"display")},htmlBuilder:er,mathmlBuilder:tr});Qt({type:"array",names:["CD"],props:{numArgs:0},handler(i){return Ko(i),H3(i.parser)},htmlBuilder:er,mathmlBuilder:tr});b("\\nonumber","\\gdef\\@eqnsw{0}");b("\\notag","\\nonumber");q({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(i,e){throw new R(i.funcName+" valid only within array environment")}});var em=Km;q({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(i,e){var{parser:t,funcName:r}=i,n=e[0];if(n.type!=="ordgroup")throw new R("Invalid environment name",n);for(var s="",o=0;o<n.body.length;++o)s+=Q(n.body[o],"textord").text;if(r==="\\begin"){if(!em.hasOwnProperty(s))throw new R("No such environment: "+s,n);var l=em[s],{args:a,optArgs:h}=t.parseArguments("\\begin{"+s+"}",l),c={mode:t.mode,envName:s,parser:t},u=l.handler(c,a,h);t.expect("\\end",!1);var d=t.nextToken,p=Q(t.parseFunction(),"environment");if(p.name!==s)throw new R("Mismatch: \\begin{"+s+"} matched by \\end{"+p.name+"}",d);return u}return{type:"environment",mode:t.mode,name:s,nameGroup:n}}});var Xm=(i,e)=>{var t=i.font,r=e.withFont(t);return oe(i.body,r)},_m=(i,e)=>{var t=i.font,r=e.withFont(t);return ue(i.body,r)},tm={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};q({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(i,e)=>{var{parser:t,funcName:r}=i,n=Ro(e[0]),s=r;return s in tm&&(s=tm[s]),{type:"font",mode:t.mode,font:s.slice(1),body:n}},htmlBuilder:Xm,mathmlBuilder:_m});q({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(i,e)=>{var{parser:t}=i,r=e[0];return{type:"mclass",mode:t.mode,mclass:Go(r),body:[{type:"font",mode:t.mode,font:"boldsymbol",body:r}],isCharacterBox:dr(r)}}});q({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(i,e)=>{var{parser:t,funcName:r,breakOnTokenText:n}=i,{mode:s}=t,o=t.parseExpression(!0,n),l="math"+r.slice(1);return{type:"font",mode:s,font:l,body:{type:"ordgroup",mode:t.mode,body:o}}},htmlBuilder:Xm,mathmlBuilder:_m});var Q3=(i,e)=>{var t=e.style,r=t.fracNum(),n=t.fracDen(),s;s=e.havingStyle(r);var o=oe(i.numer,s,e);if(i.continued){var l=8.5/e.fontMetrics().ptPerEm,a=3.5/e.fontMetrics().ptPerEm;o.height=o.height<l?l:o.height,o.depth=o.depth<a?a:o.depth}s=e.havingStyle(n);var h=oe(i.denom,s,e),c,u,d;i.hasBarLine?(i.barSize?(u=we(i.barSize,e),c=Oi("frac-line",e,u)):c=Oi("frac-line",e),u=c.height,d=c.height):(c=null,u=0,d=e.fontMetrics().defaultRuleThickness);var p,v,y;t.size===Z.DISPLAY.size?(p=e.fontMetrics().num1,u>0?v=3*d:v=7*d,y=e.fontMetrics().denom1):(u>0?(p=e.fontMetrics().num2,v=d):(p=e.fontMetrics().num3,v=3*d),y=e.fontMetrics().denom2);var w;if(c){var A=e.fontMetrics().axisHeight;p-o.depth-(A+.5*u)<v&&(p+=v-(p-o.depth-(A+.5*u))),A-.5*u-(h.height-y)<v&&(y+=v-(A-.5*u-(h.height-y)));var M=-(A-.5*u);w=ae({positionType:"individualShift",children:[{type:"elem",elem:h,shift:y},{type:"elem",elem:c,shift:M},{type:"elem",elem:o,shift:-p}]})}else{var S=p-o.depth-(h.height-y);S<v&&(p+=.5*(v-S),y+=.5*(v-S)),w=ae({positionType:"individualShift",children:[{type:"elem",elem:h,shift:y},{type:"elem",elem:o,shift:-p}]})}s=e.havingStyle(t),w.height*=s.sizeMultiplier/e.sizeMultiplier,w.depth*=s.sizeMultiplier/e.sizeMultiplier;var E;t.size===Z.DISPLAY.size?E=e.fontMetrics().delim1:t.size===Z.SCRIPTSCRIPT.size?E=e.havingStyle(Z.SCRIPT).fontMetrics().delim2:E=e.fontMetrics().delim2;var T,B;return i.leftDelim==null?T=Ln(e,["mopen"]):T=rh(i.leftDelim,E,!0,e.havingStyle(t),i.mode,["mopen"]),i.continued?B=z([]):i.rightDelim==null?B=Ln(e,["mclose"]):B=rh(i.rightDelim,E,!0,e.havingStyle(t),i.mode,["mclose"]),z(["mord"].concat(s.sizingClasses(e)),[T,z(["mfrac"],[w]),B],e)},e6=(i,e)=>{var t=new L("mfrac",[ue(i.numer,e),ue(i.denom,e)]);if(!i.hasBarLine)t.setAttribute("linethickness","0px");else if(i.barSize){var r=we(i.barSize,e);t.setAttribute("linethickness",N(r))}if(i.leftDelim!=null||i.rightDelim!=null){var n=[];if(i.leftDelim!=null){var s=new L("mo",[new Ae(i.leftDelim.replace("\\",""))]);s.setAttribute("fence","true"),n.push(s)}if(n.push(t),i.rightDelim!=null){var o=new L("mo",[new Ae(i.rightDelim.replace("\\",""))]);o.setAttribute("fence","true"),n.push(o)}return uh(n)}return t},Jm=(i,e)=>{if(!e)return i;var t={type:"styling",mode:i.mode,style:e,body:[i]};return t};q({type:"genfrac",names:["\\cfrac","\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(i,e)=>{var{parser:t,funcName:r}=i,n=e[0],s=e[1],o,l=null,a=null;switch(r){case"\\cfrac":case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,l="(",a=")";break;case"\\\\bracefrac":o=!1,l="\\{",a="\\}";break;case"\\\\brackfrac":o=!1,l="[",a="]";break;default:throw new Error("Unrecognized genfrac command")}var h=r==="\\cfrac",c=null;return h||r.startsWith("\\d")?c="display":r.startsWith("\\t")&&(c="text"),Jm({type:"genfrac",mode:t.mode,numer:n,denom:s,continued:h,hasBarLine:o,leftDelim:l,rightDelim:a,barSize:null},c)},htmlBuilder:Q3,mathmlBuilder:e6});q({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(i){var{parser:e,funcName:t,token:r}=i,n;switch(t){case"\\over":n="\\frac";break;case"\\choose":n="\\binom";break;case"\\atop":n="\\\\atopfrac";break;case"\\brace":n="\\\\bracefrac";break;case"\\brack":n="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:n,token:r}}});var rm=["display","text","script","scriptscript"],im=function(e){var t=null;return e.length>0&&(t=e,t=t==="."?null:t),t};q({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(i,e){var{parser:t}=i,r=e[4],n=e[5],s=Ro(e[0]),o=s.type==="atom"&&s.family==="open"?im(s.text):null,l=Ro(e[1]),a=l.type==="atom"&&l.family==="close"?im(l.text):null,h=Q(e[2],"size"),c,u=null;h.isBlank?c=!0:(u=h.value,c=u.number>0);var d=null,p=e[3];if(p.type==="ordgroup"){if(p.body.length>0){var v=Q(p.body[0],"textord");d=rm[Number(v.text)]}}else p=Q(p,"textord"),d=rm[Number(p.text)];return Jm({type:"genfrac",mode:t.mode,numer:r,denom:n,continued:!1,hasBarLine:c,barSize:u,leftDelim:o,rightDelim:a},d)}});q({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(i,e){var{parser:t,funcName:r,token:n}=i;return{type:"infix",mode:t.mode,replaceWith:"\\\\abovefrac",size:Q(e[0],"size").value,token:n}}});q({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(i,e)=>{var{parser:t,funcName:r}=i,n=e[0],s=Q(e[1],"infix").size;if(!s)throw new Error("\\\\abovefrac expected size, but got "+String(s));var o=e[2],l=s.number>0;return{type:"genfrac",mode:t.mode,numer:n,denom:o,continued:!1,hasBarLine:l,barSize:s,leftDelim:null,rightDelim:null}}});var Zm=(i,e)=>{var t=e.style,r,n;i.type==="supsub"?(r=i.sup?oe(i.sup,e.havingStyle(t.sup()),e):oe(i.sub,e.havingStyle(t.sub()),e),n=Q(i.base,"horizBrace")):n=Q(i,"horizBrace");var s=oe(n.base,e.havingBaseStyle(Z.DISPLAY)),o=Vo(n,e),l;if(n.isOver?(l=ae({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:o}]}),l.children[0].children[0].children[1].classes.push("svg-align")):(l=ae({positionType:"bottom",positionData:s.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:s}]}),l.children[0].children[0].children[0].classes.push("svg-align")),r){var a=z(["mord",n.isOver?"mover":"munder"],[l],e);n.isOver?l=ae({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.2},{type:"elem",elem:r}]}):l=ae({positionType:"bottom",positionData:a.depth+.2+r.height+r.depth,children:[{type:"elem",elem:r},{type:"kern",size:.2},{type:"elem",elem:a}]})}return z(["mord",n.isOver?"mover":"munder"],[l],e)},t6=(i,e)=>{var t=Wo(i.label);return new L(i.isOver?"mover":"munder",[ue(i.base,e),t])};q({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(i,e){var{parser:t,funcName:r}=i;return{type:"horizBrace",mode:t.mode,label:r,isOver:/^\\over/.test(r),base:e[0]}},htmlBuilder:Zm,mathmlBuilder:t6});q({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(i,e)=>{var{parser:t}=i,r=e[1],n=Q(e[0],"url").url;return t.settings.isTrusted({command:"\\href",url:n})?{type:"href",mode:t.mode,href:n,body:De(r)}:t.formatUnsupportedCmd("\\href")},htmlBuilder:(i,e)=>{var t=Pe(i.body,e,!1);return b3(i.href,[],t,e)},mathmlBuilder:(i,e)=>{var t=Or(i.body,e);return t instanceof L||(t=new L("mrow",[t])),t.setAttribute("href",i.href),t}});q({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(i,e)=>{var{parser:t}=i,r=Q(e[0],"url").url;if(!t.settings.isTrusted({command:"\\url",url:r}))return t.formatUnsupportedCmd("\\url");for(var n=[],s=0;s<r.length;s++){var o=r[s];o==="~"&&(o="\\textasciitilde"),n.push({type:"textord",mode:"text",text:o})}var l={type:"text",mode:t.mode,font:"\\texttt",body:n};return{type:"href",mode:t.mode,href:r,body:De(l)}}});q({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(i,e){var{parser:t}=i;return{type:"hbox",mode:t.mode,body:De(e[0])}},htmlBuilder(i,e){var t=Pe(i.body,e,!1);return pr(t)},mathmlBuilder(i,e){return new L("mrow",ht(i.body,e))}});q({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(i,e)=>{var{parser:t,funcName:r,token:n}=i,s=Q(e[0],"raw").string,o=e[1];t.settings.strict&&t.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var l,a={};switch(r){case"\\htmlClass":a.class=s,l={command:"\\htmlClass",class:s};break;case"\\htmlId":a.id=s,l={command:"\\htmlId",id:s};break;case"\\htmlStyle":a.style=s,l={command:"\\htmlStyle",style:s};break;case"\\htmlData":{for(var h=s.split(","),c=0;c<h.length;c++){var u=h[c],d=u.indexOf("=");if(d<0)throw new R("\\htmlData key/value '"+u+"' missing equals sign");var p=u.slice(0,d),v=u.slice(d+1);a["data-"+p.trim()]=v}l={command:"\\htmlData",attributes:a};break}default:throw new Error("Unrecognized html command")}return t.settings.isTrusted(l)?{type:"html",mode:t.mode,attributes:a,body:De(o)}:t.formatUnsupportedCmd(r)},htmlBuilder:(i,e)=>{var t=Pe(i.body,e,!1),r=["enclosing"];i.attributes.class&&r.push(...i.attributes.class.trim().split(/\s+/));var n=z(r,t,e);for(var s in i.attributes)s!=="class"&&i.attributes.hasOwnProperty(s)&&n.setAttribute(s,i.attributes[s]);return n},mathmlBuilder:(i,e)=>Or(i.body,e)});q({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInArgument:!0,allowedInText:!0},handler:(i,e)=>{var{parser:t}=i;return{type:"htmlmathml",mode:t.mode,html:De(e[0]),mathml:De(e[1])}},htmlBuilder:(i,e)=>{var t=Pe(i.html,e,!1);return pr(t)},mathmlBuilder:(i,e)=>Or(i.mathml,e)});var $0=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new R("Invalid size: '"+e+"' in \\includegraphics");var r={number:+(t[1]+t[2]),unit:t[3]};if(!vm(r))throw new R("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r};q({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(i,e,t)=>{var{parser:r}=i,n={number:0,unit:"em"},s={number:.9,unit:"em"},o={number:0,unit:"em"},l="";if(t[0])for(var a=Q(t[0],"raw").string,h=a.split(","),c=0;c<h.length;c++){var u=h[c].split("=");if(u.length===2){var d=u[1].trim();switch(u[0].trim()){case"alt":l=d;break;case"width":n=$0(d);break;case"height":s=$0(d);break;case"totalheight":o=$0(d);break;default:throw new R("Invalid key: '"+u[0]+"' in \\includegraphics.")}}}var p=Q(e[0],"url").url;return l===""&&(l=p,l=l.replace(/^.*[\\/]/,""),l=l.substring(0,l.lastIndexOf("."))),r.settings.isTrusted({command:"\\includegraphics",url:p})?{type:"includegraphics",mode:r.mode,alt:l,width:n,height:s,totalheight:o,src:p}:r.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(i,e)=>{var t=we(i.height,e),r=0;i.totalheight.number>0&&(r=we(i.totalheight,e)-t);var n=0;i.width.number>0&&(n=we(i.width,e));var s={height:N(t+r)};n>0&&(s.width=N(n)),r>0&&(s.verticalAlign=N(-r));var o=new X0(i.src,i.alt,s);return o.height=t,o.depth=r,o},mathmlBuilder:(i,e)=>{var t=new L("mglyph",[]);t.setAttribute("alt",i.alt);var r=we(i.height,e),n=0;if(i.totalheight.number>0&&(n=we(i.totalheight,e)-r,t.setAttribute("valign",N(-n))),t.setAttribute("height",N(r+n)),i.width.number>0){var s=we(i.width,e);t.setAttribute("width",N(s))}return t.setAttribute("src",i.src),t}});q({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(i,e){var{parser:t,funcName:r}=i,n=Q(e[0],"size");if(t.settings.strict){var s=r[1]==="m",o=n.value.unit==="mu";s?(o||t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" supports only mu units, "+("not "+n.value.unit+" units")),t.mode!=="math"&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" works only in math mode")):o&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" doesn't support mu units")}return{type:"kern",mode:t.mode,dimension:n.value}},htmlBuilder(i,e){return Sm(i.dimension,e)},mathmlBuilder(i,e){var t=we(i.dimension,e);return new Io(t)}});q({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(i,e)=>{var{parser:t,funcName:r}=i,n=e[0];return{type:"lap",mode:t.mode,alignment:r.slice(5),body:n}},htmlBuilder:(i,e)=>{var t;i.alignment==="clap"?(t=z([],[oe(i.body,e)]),t=z(["inner"],[t],e)):t=z(["inner"],[oe(i.body,e)]);var r=z(["fix"],[]),n=z([i.alignment],[t,r],e),s=z(["strut"]);return s.style.height=N(n.height+n.depth),n.depth&&(s.style.verticalAlign=N(-n.depth)),n.children.unshift(s),n=z(["thinbox"],[n],e),z(["mord","vbox"],[n],e)},mathmlBuilder:(i,e)=>{var t=new L("mpadded",[ue(i.body,e)]);if(i.alignment!=="rlap"){var r=i.alignment==="llap"?"-1":"-0.5";t.setAttribute("lspace",r+"width")}return t.setAttribute("width","0px"),t}});q({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(i,e){var{funcName:t,parser:r}=i,n=r.mode;r.switchMode("math");var s=t==="\\("?"\\)":"$",o=r.parseExpression(!1,s);return r.expect(s),r.switchMode(n),{type:"styling",mode:r.mode,style:"text",body:o}}});q({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(i,e){throw new R("Mismatched "+i.funcName)}});var nm=(i,e)=>{switch(e.style.size){case Z.DISPLAY.size:return i.display;case Z.TEXT.size:return i.text;case Z.SCRIPT.size:return i.script;case Z.SCRIPTSCRIPT.size:return i.scriptscript;default:return i.text}};q({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(i,e)=>{var{parser:t}=i;return{type:"mathchoice",mode:t.mode,display:De(e[0]),text:De(e[1]),script:De(e[2]),scriptscript:De(e[3])}},htmlBuilder:(i,e)=>{var t=nm(i,e),r=Pe(t,e,!1);return pr(r)},mathmlBuilder:(i,e)=>{var t=nm(i,e);return Or(t,e)}});var Qm=(i,e,t,r,n,s,o)=>{i=z([],[i]);var l=t&&dr(t),a,h;if(e){var c=oe(e,r.havingStyle(n.sup()),r);h={elem:c,kern:Math.max(r.fontMetrics().bigOpSpacing1,r.fontMetrics().bigOpSpacing3-c.depth)}}if(t){var u=oe(t,r.havingStyle(n.sub()),r);a={elem:u,kern:Math.max(r.fontMetrics().bigOpSpacing2,r.fontMetrics().bigOpSpacing4-u.height)}}var d;if(h&&a){var p=r.fontMetrics().bigOpSpacing5+a.elem.height+a.elem.depth+a.kern+i.depth+o;d=ae({positionType:"bottom",positionData:p,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:a.elem,marginLeft:N(-s)},{type:"kern",size:a.kern},{type:"elem",elem:i},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:N(s)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]})}else if(a){var v=i.height-o;d=ae({positionType:"top",positionData:v,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:a.elem,marginLeft:N(-s)},{type:"kern",size:a.kern},{type:"elem",elem:i}]})}else if(h){var y=i.depth+o;d=ae({positionType:"bottom",positionData:y,children:[{type:"elem",elem:i},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:N(s)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]})}else return i;var w=[d];if(a&&s!==0&&!l){var S=z(["mspace"],[],r);S.style.marginRight=N(s),w.unshift(S)}return z(["mop","op-limits"],w,r)},e1=new Set(["\\smallint"]),Ri=(i,e)=>{var t,r,n=!1,s;i.type==="supsub"?(t=i.sup,r=i.sub,s=Q(i.base,"op"),n=!0):s=Q(i,"op");var o=e.style,l=!1;o.size===Z.DISPLAY.size&&s.symbol&&!e1.has(s.name)&&(l=!0);var a;if(s.symbol){var h=l?"Size2-Regular":"Size1-Regular",c="";if((s.name==="\\oiint"||s.name==="\\oiiint")&&(c=s.name.slice(1),s.name=c==="oiint"?"\\iint":"\\iiint"),a=Qe(s.name,h,"math",e,["mop","op-symbol",l?"large-op":"small-op"]),c.length>0){var u=a.italic,d=Am(c+"Size"+(l?"2":"1"),e);a=ae({positionType:"individualShift",children:[{type:"elem",elem:a,shift:0},{type:"elem",elem:d,shift:l?.08:0}]}),s.name="\\"+c,a.classes.unshift("mop"),a.italic=u}}else if(s.body){var p=Pe(s.body,e,!0);p.length===1&&p[0]instanceof at?(a=p[0],a.classes[0]="mop"):a=z(["mop"],p,e)}else{for(var v=[],y=1;y<s.name.length;y++)v.push(hh(s.name[y],s.mode,e));a=z(["mop"],v,e)}var w=0,S=0;return(a instanceof at||s.name==="\\oiint"||s.name==="\\oiiint")&&!s.suppressBaseShift&&(w=(a.height-a.depth)/2-e.fontMetrics().axisHeight,S=a.italic),n?Qm(a,t,r,e,o,S,w):(w&&(a.style.position="relative",a.style.top=N(w)),a)},Rn=(i,e)=>{var t;if(i.symbol)t=new L("mo",[Dt(i.name,i.mode)]),e1.has(i.name)&&t.setAttribute("largeop","false");else if(i.body)t=new L("mo",ht(i.body,e));else{t=new L("mi",[new Ae(i.name.slice(1))]);var r=new L("mo",[Dt("\u2061","text")]);i.parentIsSupSub?t=new L("mrow",[t,r]):t=Dm([t,r])}return t},r6={"\u220F":"\\prod","\u2210":"\\coprod","\u2211":"\\sum","\u22C0":"\\bigwedge","\u22C1":"\\bigvee","\u22C2":"\\bigcap","\u22C3":"\\bigcup","\u2A00":"\\bigodot","\u2A01":"\\bigoplus","\u2A02":"\\bigotimes","\u2A04":"\\biguplus","\u2A06":"\\bigsqcup"};q({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","\u220F","\u2210","\u2211","\u22C0","\u22C1","\u22C2","\u22C3","\u2A00","\u2A01","\u2A02","\u2A04","\u2A06"],props:{numArgs:0},handler:(i,e)=>{var{parser:t,funcName:r}=i,n=r;return n.length===1&&(n=r6[n]),{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Ri,mathmlBuilder:Rn});q({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(i,e)=>{var{parser:t}=i,r=e[0];return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:De(r)}},htmlBuilder:Ri,mathmlBuilder:Rn});var i6={"\u222B":"\\int","\u222C":"\\iint","\u222D":"\\iiint","\u222E":"\\oint","\u222F":"\\oiint","\u2230":"\\oiiint"};q({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(i){var{parser:e,funcName:t}=i;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:Ri,mathmlBuilder:Rn});q({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(i){var{parser:e,funcName:t}=i;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:Ri,mathmlBuilder:Rn});q({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","\u222B","\u222C","\u222D","\u222E","\u222F","\u2230"],props:{numArgs:0,allowedInArgument:!0},handler(i){var{parser:e,funcName:t}=i,r=t;return r.length===1&&(r=i6[r]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:Ri,mathmlBuilder:Rn});var t1=(i,e)=>{var t,r,n=!1,s;i.type==="supsub"?(t=i.sup,r=i.sub,s=Q(i.base,"operatorname"),n=!0):s=Q(i,"operatorname");var o;if(s.body.length>0){for(var l=s.body.map(u=>{var d=u.text;return typeof d=="string"?{type:"textord",mode:u.mode,text:d}:u}),a=Pe(l,e.withFont("mathrm"),!0),h=0;h<a.length;h++){var c=a[h];c instanceof at&&(c.text=c.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=z(["mop"],a,e)}else o=z(["mop"],[],e);return n?Qm(o,t,r,e,e.style,0,0):o},n6=(i,e)=>{for(var t=ht(i.body,e.withFont("mathrm")),r=!0,n=0;n<t.length;n++){var s=t[n];if(!(s instanceof Io))if(s instanceof L)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=s.children[0];s.children.length===1&&o instanceof Ae?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):r=!1;break}default:r=!1}else r=!1}if(r){var l=t.map(c=>c.toText()).join("");t=[new Ae(l)]}var a=new L("mi",t);a.setAttribute("mathvariant","normal");var h=new L("mo",[Dt("\u2061","text")]);return i.parentIsSupSub?new L("mrow",[a,h]):Dm([a,h])};q({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(i,e)=>{var{parser:t,funcName:r}=i,n=e[0];return{type:"operatorname",mode:t.mode,body:De(n),alwaysHandleSupSub:r==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:t1,mathmlBuilder:n6});b("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");ti({type:"ordgroup",htmlBuilder(i,e){return i.semisimple?pr(Pe(i.body,e,!1)):z(["mord"],Pe(i.body,e,!0),e)},mathmlBuilder(i,e){return Or(i.body,e,!0)}});q({type:"overline",names:["\\overline"],props:{numArgs:1},handler(i,e){var{parser:t}=i,r=e[0];return{type:"overline",mode:t.mode,body:r}},htmlBuilder(i,e){var t=oe(i.body,e.havingCrampedStyle()),r=Oi("overline-line",e),n=e.fontMetrics().defaultRuleThickness,s=ae({positionType:"firstBaseline",children:[{type:"elem",elem:t},{type:"kern",size:3*n},{type:"elem",elem:r},{type:"kern",size:n}]});return z(["mord","overline"],[s],e)},mathmlBuilder(i,e){var t=new L("mo",[new Ae("\u203E")]);t.setAttribute("stretchy","true");var r=new L("mover",[ue(i.body,e),t]);return r.setAttribute("accent","true"),r}});q({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(i,e)=>{var{parser:t}=i,r=e[0];return{type:"phantom",mode:t.mode,body:De(r)}},htmlBuilder:(i,e)=>{var t=Pe(i.body,e.withPhantom(),!1);return pr(t)},mathmlBuilder:(i,e)=>{var t=ht(i.body,e);return new L("mphantom",t)}});q({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(i,e)=>{var{parser:t}=i,r=e[0];return{type:"hphantom",mode:t.mode,body:r}},htmlBuilder:(i,e)=>{var t=z([],[oe(i.body,e.withPhantom())]);if(t.height=0,t.depth=0,t.children)for(var r=0;r<t.children.length;r++)t.children[r].height=0,t.children[r].depth=0;return t=ae({positionType:"firstBaseline",children:[{type:"elem",elem:t}]}),z(["mord"],[t],e)},mathmlBuilder:(i,e)=>{var t=ht(De(i.body),e),r=new L("mphantom",t),n=new L("mpadded",[r]);return n.setAttribute("height","0px"),n.setAttribute("depth","0px"),n}});q({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(i,e)=>{var{parser:t}=i,r=e[0];return{type:"vphantom",mode:t.mode,body:r}},htmlBuilder:(i,e)=>{var t=z(["inner"],[oe(i.body,e.withPhantom())]),r=z(["fix"],[]);return z(["mord","rlap"],[t,r],e)},mathmlBuilder:(i,e)=>{var t=ht(De(i.body),e),r=new L("mphantom",t),n=new L("mpadded",[r]);return n.setAttribute("width","0px"),n}});q({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(i,e){var{parser:t}=i,r=Q(e[0],"size").value,n=e[1];return{type:"raisebox",mode:t.mode,dy:r,body:n}},htmlBuilder(i,e){var t=oe(i.body,e),r=we(i.dy,e);return ae({positionType:"shift",positionData:-r,children:[{type:"elem",elem:t}]})},mathmlBuilder(i,e){var t=new L("mpadded",[ue(i.body,e)]),r=i.dy.number+i.dy.unit;return t.setAttribute("voffset",r),t}});q({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(i){var{parser:e}=i;return{type:"internal",mode:e.mode}}});q({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(i,e,t){var{parser:r}=i,n=t[0],s=Q(e[0],"size"),o=Q(e[1],"size");return{type:"rule",mode:r.mode,shift:n&&Q(n,"size").value,width:s.value,height:o.value}},htmlBuilder(i,e){var t=z(["mord","rule"],[],e),r=we(i.width,e),n=we(i.height,e),s=i.shift?we(i.shift,e):0;return t.style.borderRightWidth=N(r),t.style.borderTopWidth=N(n),t.style.bottom=N(s),t.width=r,t.height=n+s,t.depth=-s,t.maxFontSize=n*1.125*e.sizeMultiplier,t},mathmlBuilder(i,e){var t=we(i.width,e),r=we(i.height,e),n=i.shift?we(i.shift,e):0,s=e.color&&e.getColor()||"black",o=new L("mspace");o.setAttribute("mathbackground",s),o.setAttribute("width",N(t)),o.setAttribute("height",N(r));var l=new L("mpadded",[o]);return n>=0?l.setAttribute("height",N(n)):(l.setAttribute("height",N(n)),l.setAttribute("depth",N(-n))),l.setAttribute("voffset",N(n)),l}});function r1(i,e,t){for(var r=Pe(i,e,!1),n=e.sizeMultiplier/t.sizeMultiplier,s=0;s<r.length;s++){var o=r[s].classes.indexOf("sizing");o<0?Array.prototype.push.apply(r[s].classes,e.sizingClasses(t)):r[s].classes[o+1]==="reset-size"+e.size&&(r[s].classes[o+1]="reset-size"+t.size),r[s].height*=n,r[s].depth*=n}return pr(r)}var sm=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],s6=(i,e)=>{var t=e.havingSize(i.size);return r1(i.body,t,e)};q({type:"sizing",names:sm,props:{numArgs:0,allowedInText:!0},handler:(i,e)=>{var{breakOnTokenText:t,funcName:r,parser:n}=i,s=n.parseExpression(!1,t);return{type:"sizing",mode:n.mode,size:sm.indexOf(r)+1,body:s}},htmlBuilder:s6,mathmlBuilder:(i,e)=>{var t=e.havingSize(i.size),r=ht(i.body,t),n=new L("mstyle",r);return n.setAttribute("mathsize",N(t.sizeMultiplier)),n}});q({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(i,e,t)=>{var{parser:r}=i,n=!1,s=!1,o=t[0]&&Q(t[0],"ordgroup");if(o)for(var l="",a=0;a<o.body.length;++a){var h=o.body[a];if(l=h.text,l==="t")n=!0;else if(l==="b")s=!0;else{n=!1,s=!1;break}}else n=!0,s=!0;var c=e[0];return{type:"smash",mode:r.mode,body:c,smashHeight:n,smashDepth:s}},htmlBuilder:(i,e)=>{var t=z([],[oe(i.body,e)]);if(!i.smashHeight&&!i.smashDepth)return t;if(i.smashHeight&&(t.height=0,t.children))for(var r=0;r<t.children.length;r++)t.children[r].height=0;if(i.smashDepth&&(t.depth=0,t.children))for(var n=0;n<t.children.length;n++)t.children[n].depth=0;var s=ae({positionType:"firstBaseline",children:[{type:"elem",elem:t}]});return z(["mord"],[s],e)},mathmlBuilder:(i,e)=>{var t=new L("mpadded",[ue(i.body,e)]);return i.smashHeight&&t.setAttribute("height","0px"),i.smashDepth&&t.setAttribute("depth","0px"),t}});q({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(i,e,t){var{parser:r}=i,n=t[0],s=e[0];return{type:"sqrt",mode:r.mode,body:s,index:n}},htmlBuilder(i,e){var t=oe(i.body,e.havingCrampedStyle());t.height===0&&(t.height=e.fontMetrics().xHeight),t=zi(t,e);var r=e.fontMetrics(),n=r.defaultRuleThickness,s=n;e.style.id<Z.TEXT.id&&(s=e.fontMetrics().xHeight);var o=n+s/4,l=t.height+t.depth+o+n,{span:a,ruleWidth:h,advanceWidth:c}=U3(l,e),u=a.height-h;u>t.height+t.depth+o&&(o=(o+u-t.height-t.depth)/2);var d=a.height-t.height-o-h;t.style.paddingLeft=N(c);var p=ae({positionType:"firstBaseline",children:[{type:"elem",elem:t,wrapperClasses:["svg-align"]},{type:"kern",size:-(t.height+d)},{type:"elem",elem:a},{type:"kern",size:h}]});if(i.index){var v=e.havingStyle(Z.SCRIPTSCRIPT),y=oe(i.index,v,e),w=.6*(p.height-p.depth),S=ae({positionType:"shift",positionData:-w,children:[{type:"elem",elem:y}]}),A=z(["root"],[S]);return z(["mord","sqrt"],[A,p],e)}else return z(["mord","sqrt"],[p],e)},mathmlBuilder(i,e){var{body:t,index:r}=i;return r?new L("mroot",[ue(t,e),ue(r,e)]):new L("msqrt",[ue(t,e)])}});var om={display:Z.DISPLAY,text:Z.TEXT,script:Z.SCRIPT,scriptscript:Z.SCRIPTSCRIPT};q({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(i,e){var{breakOnTokenText:t,funcName:r,parser:n}=i,s=n.parseExpression(!0,t),o=r.slice(1,r.length-5);return{type:"styling",mode:n.mode,style:o,body:s}},htmlBuilder(i,e){var t=om[i.style],r=e.havingStyle(t).withFont("");return r1(i.body,r,e)},mathmlBuilder(i,e){var t=om[i.style],r=e.havingStyle(t),n=ht(i.body,r),s=new L("mstyle",n),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},l=o[i.style];return s.setAttribute("scriptlevel",l[0]),s.setAttribute("displaystyle",l[1]),s}});var o6=function(e,t){var r=e.base;if(r)if(r.type==="op"){var n=r.limits&&(t.style.size===Z.DISPLAY.size||r.alwaysHandleSupSub);return n?Ri:null}else if(r.type==="operatorname"){var s=r.alwaysHandleSupSub&&(t.style.size===Z.DISPLAY.size||r.limits);return s?t1:null}else{if(r.type==="accent")return dr(r.base)?mh:null;if(r.type==="horizBrace"){var o=!e.sub;return o===r.isOver?Zm:null}else return null}else return null};ti({type:"supsub",htmlBuilder(i,e){var t=o6(i,e);if(t)return t(i,e);var{base:r,sup:n,sub:s}=i,o=oe(r,e),l,a,h=e.fontMetrics(),c=0,u=0,d=r&&dr(r);if(n){var p=e.havingStyle(e.style.sup());l=oe(n,p,e),d||(c=o.height-p.fontMetrics().supDrop*p.sizeMultiplier/e.sizeMultiplier)}if(s){var v=e.havingStyle(e.style.sub());a=oe(s,v,e),d||(u=o.depth+v.fontMetrics().subDrop*v.sizeMultiplier/e.sizeMultiplier)}var y;e.style===Z.DISPLAY?y=h.sup1:e.style.cramped?y=h.sup3:y=h.sup2;var w=e.sizeMultiplier,S=N(.5/h.ptPerEm/w),A=null;if(a){var M=i.base&&i.base.type==="op"&&i.base.name&&(i.base.name==="\\oiint"||i.base.name==="\\oiiint");(o instanceof at||M)&&(A=N(-o.italic))}var E;if(l&&a){c=Math.max(c,y,l.depth+.25*h.xHeight),u=Math.max(u,h.sub2);var T=h.defaultRuleThickness,B=4*T;if(c-l.depth-(a.height-u)<B){u=B-(c-l.depth)+a.height;var D=.8*h.xHeight-(c-l.depth);D>0&&(c+=D,u-=D)}var V=[{type:"elem",elem:a,shift:u,marginRight:S,marginLeft:A},{type:"elem",elem:l,shift:-c,marginRight:S}];E=ae({positionType:"individualShift",children:V})}else if(a){u=Math.max(u,h.sub1,a.height-.8*h.xHeight);var U=[{type:"elem",elem:a,marginLeft:A,marginRight:S}];E=ae({positionType:"shift",positionData:u,children:U})}else if(l)c=Math.max(c,y,l.depth+.25*h.xHeight),E=ae({positionType:"shift",positionData:-c,children:[{type:"elem",elem:l,marginRight:S}]});else throw new Error("supsub must have either sup or sub.");var ie=Z0(o,"right")||"mord";return z([ie],[o,z(["msupsub"],[E])],e)},mathmlBuilder(i,e){var t=!1,r,n;i.base&&i.base.type==="horizBrace"&&(n=!!i.sup,n===i.base.isOver&&(t=!0,r=i.base.isOver)),i.base&&(i.base.type==="op"||i.base.type==="operatorname")&&(i.base.parentIsSupSub=!0);var s=[ue(i.base,e)];i.sub&&s.push(ue(i.sub,e)),i.sup&&s.push(ue(i.sup,e));var o;if(t)o=r?"mover":"munder";else if(i.sub)if(i.sup){var h=i.base;h&&h.type==="op"&&h.limits&&e.style===Z.DISPLAY||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(e.style===Z.DISPLAY||h.limits)?o="munderover":o="msubsup"}else{var a=i.base;a&&a.type==="op"&&a.limits&&(e.style===Z.DISPLAY||a.alwaysHandleSupSub)||a&&a.type==="operatorname"&&a.alwaysHandleSupSub&&(a.limits||e.style===Z.DISPLAY)?o="munder":o="msub"}else{var l=i.base;l&&l.type==="op"&&l.limits&&(e.style===Z.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||e.style===Z.DISPLAY)?o="mover":o="msup"}return new L(o,s)}});ti({type:"atom",htmlBuilder(i,e){return hh(i.text,i.mode,e,["m"+i.family])},mathmlBuilder(i,e){var t=new L("mo",[Dt(i.text,i.mode)]);if(i.family==="bin"){var r=fh(i,e);r==="bold-italic"&&t.setAttribute("mathvariant",r)}else i.family==="punct"?t.setAttribute("separator","true"):(i.family==="open"||i.family==="close")&&t.setAttribute("stretchy","false");return t}});var i1={mi:"italic",mn:"normal",mtext:"normal"};ti({type:"mathord",htmlBuilder(i,e){return qo(i,e,"mathord")},mathmlBuilder(i,e){var t=new L("mi",[Dt(i.text,i.mode,e)]),r=fh(i,e)||"italic";return r!==i1[t.type]&&t.setAttribute("mathvariant",r),t}});ti({type:"textord",htmlBuilder(i,e){return qo(i,e,"textord")},mathmlBuilder(i,e){var t=Dt(i.text,i.mode,e),r=fh(i,e)||"normal",n;return i.mode==="text"?n=new L("mtext",[t]):/[0-9]/.test(i.text)?n=new L("mn",[t]):i.text==="\\prime"?n=new L("mo",[t]):n=new L("mi",[t]),r!==i1[n.type]&&n.setAttribute("mathvariant",r),n}});var G0={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},U0={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};ti({type:"spacing",htmlBuilder(i,e){if(U0.hasOwnProperty(i.text)){var t=U0[i.text].className||"";if(i.mode==="text"){var r=qo(i,e,"textord");return r.classes.push(t),r}else return z(["mspace",t],[hh(i.text,i.mode,e)],e)}else{if(G0.hasOwnProperty(i.text))return z(["mspace",G0[i.text]],[],e);throw new R('Unknown type of space "'+i.text+'"')}},mathmlBuilder(i,e){var t;if(U0.hasOwnProperty(i.text))t=new L("mtext",[new Ae("\xA0")]);else{if(G0.hasOwnProperty(i.text))return new L("mspace");throw new R('Unknown type of space "'+i.text+'"')}return t}});var lm=()=>{var i=new L("mtd",[]);return i.setAttribute("width","50%"),i};ti({type:"tag",mathmlBuilder(i,e){var t=new L("mtable",[new L("mtr",[lm(),new L("mtd",[Or(i.body,e)]),lm(),new L("mtd",[Or(i.tag,e)])])]);return t.setAttribute("width","100%"),t}});var am={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},hm={"\\textbf":"textbf","\\textmd":"textmd"},l6={"\\textit":"textit","\\textup":"textup"},cm=(i,e)=>{var t=i.font;if(t){if(am[t])return e.withTextFontFamily(am[t]);if(hm[t])return e.withTextFontWeight(hm[t]);if(t==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(l6[t])};q({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(i,e){var{parser:t,funcName:r}=i,n=e[0];return{type:"text",mode:t.mode,body:De(n),font:r}},htmlBuilder(i,e){var t=cm(i,e),r=Pe(i.body,t,!0);return z(["mord","text"],r,t)},mathmlBuilder(i,e){var t=cm(i,e);return Or(i.body,t)}});q({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(i,e){var{parser:t}=i;return{type:"underline",mode:t.mode,body:e[0]}},htmlBuilder(i,e){var t=oe(i.body,e),r=Oi("underline-line",e),n=e.fontMetrics().defaultRuleThickness,s=ae({positionType:"top",positionData:t.height,children:[{type:"kern",size:n},{type:"elem",elem:r},{type:"kern",size:3*n},{type:"elem",elem:t}]});return z(["mord","underline"],[s],e)},mathmlBuilder(i,e){var t=new L("mo",[new Ae("\u203E")]);t.setAttribute("stretchy","true");var r=new L("munder",[ue(i.body,e),t]);return r.setAttribute("accentunder","true"),r}});q({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(i,e){var{parser:t}=i;return{type:"vcenter",mode:t.mode,body:e[0]}},htmlBuilder(i,e){var t=oe(i.body,e),r=e.fontMetrics().axisHeight,n=.5*(t.height-r-(t.depth+r));return ae({positionType:"shift",positionData:n,children:[{type:"elem",elem:t}]})},mathmlBuilder(i,e){return new L("mpadded",[ue(i.body,e)],["vcenter"])}});q({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(i,e,t){throw new R("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(i,e){for(var t=um(i),r=[],n=e.havingStyle(e.style.text()),s=0;s<t.length;s++){var o=t[s];o==="~"&&(o="\\textasciitilde"),r.push(Qe(o,"Typewriter-Regular",i.mode,n,["mord","texttt"]))}return z(["mord","text"].concat(n.sizingClasses(e)),km(r),n)},mathmlBuilder(i,e){var t=new Ae(um(i)),r=new L("mtext",[t]);return r.setAttribute("mathvariant","monospace"),r}});var um=i=>i.body.replace(/ /g,i.star?"\u2423":"\xA0"),Dr=Mm,n1=`[ \r
	]`,a6="\\\\[a-zA-Z@]+",h6="\\\\[^\uD800-\uDFFF]",c6="("+a6+")"+n1+"*",u6=`\\\\(
|[ \r	]+
?)[ \r	]*`,ih="[\u0300-\u036F]",f6=new RegExp(ih+"+$"),d6="("+n1+"+)|"+(u6+"|")+"([!-\\[\\]-\u2027\u202A-\uD7FF\uF900-\uFFFF]"+(ih+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(ih+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+c6)+("|"+h6+")"),Po=class{constructor(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=new RegExp(d6,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,t){this.catcodes[e]=t}lex(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new mt("EOF",new lt(this,t,t));var r=this.tokenRegex.exec(e);if(r===null||r.index!==t)throw new R("Unexpected character: '"+e[t]+"'",new mt(e[t],new lt(this,t,t+1)));var n=r[6]||r[3]||(r[2]?"\\ ":" ");if(this.catcodes[n]===14){var s=e.indexOf(`
`,this.tokenRegex.lastIndex);return s===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}return new mt(n,new lt(this,t,this.tokenRegex.lastIndex))}},nh=class{constructor(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new R("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(e[t]==null?delete this.current[t]:this.current[t]=e[t])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,t,r){if(r===void 0&&(r=!1),r){for(var n=0;n<this.undefStack.length;n++)delete this.undefStack[n][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var s=this.undefStack[this.undefStack.length-1];s&&!s.hasOwnProperty(e)&&(s[e]=this.current[e])}t==null?delete this.current[e]:this.current[e]=t}},m6=jm;b("\\noexpand",function(i){var e=i.popToken();return i.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});b("\\expandafter",function(i){var e=i.popToken();return i.expandOnce(!0),{tokens:[e],numArgs:0}});b("\\@firstoftwo",function(i){var e=i.consumeArgs(2);return{tokens:e[0],numArgs:0}});b("\\@secondoftwo",function(i){var e=i.consumeArgs(2);return{tokens:e[1],numArgs:0}});b("\\@ifnextchar",function(i){var e=i.consumeArgs(3);i.consumeSpaces();var t=i.future();return e[0].length===1&&e[0][0].text===t.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});b("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");b("\\TextOrMath",function(i){var e=i.consumeArgs(2);return i.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var fm={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};b("\\char",function(i){var e=i.popToken(),t,r="";if(e.text==="'")t=8,e=i.popToken();else if(e.text==='"')t=16,e=i.popToken();else if(e.text==="`")if(e=i.popToken(),e.text[0]==="\\")r=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new R("\\char` missing argument");r=e.text.charCodeAt(0)}else t=10;if(t){if(r=fm[e.text],r==null||r>=t)throw new R("Invalid base-"+t+" digit "+e.text);for(var n;(n=fm[i.future().text])!=null&&n<t;)r*=t,r+=n,i.popToken()}return"\\@char{"+r+"}"});var xh=(i,e,t,r)=>{var n=i.consumeArg().tokens;if(n.length!==1)throw new R("\\newcommand's first argument must be a macro name");var s=n[0].text,o=i.isDefined(s);if(o&&!e)throw new R("\\newcommand{"+s+"} attempting to redefine "+(s+"; use \\renewcommand"));if(!o&&!t)throw new R("\\renewcommand{"+s+"} when command "+s+" does not yet exist; use \\newcommand");var l=0;if(n=i.consumeArg().tokens,n.length===1&&n[0].text==="["){for(var a="",h=i.expandNextToken();h.text!=="]"&&h.text!=="EOF";)a+=h.text,h=i.expandNextToken();if(!a.match(/^\s*[0-9]+\s*$/))throw new R("Invalid number of arguments: "+a);l=parseInt(a),n=i.consumeArg().tokens}return o&&r||i.macros.set(s,{tokens:n,numArgs:l}),""};b("\\newcommand",i=>xh(i,!1,!0,!1));b("\\renewcommand",i=>xh(i,!0,!1,!1));b("\\providecommand",i=>xh(i,!0,!0,!0));b("\\message",i=>{var e=i.consumeArgs(1)[0];return console.log(e.reverse().map(t=>t.text).join("")),""});b("\\errmessage",i=>{var e=i.consumeArgs(1)[0];return console.error(e.reverse().map(t=>t.text).join("")),""});b("\\show",i=>{var e=i.popToken(),t=e.text;return console.log(e,i.macros.get(t),Dr[t],me.math[t],me.text[t]),""});b("\\bgroup","{");b("\\egroup","}");b("~","\\nobreakspace");b("\\lq","`");b("\\rq","'");b("\\aa","\\r a");b("\\AA","\\r A");b("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`\xA9}");b("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");b("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`\xAE}");b("\u212C","\\mathscr{B}");b("\u2130","\\mathscr{E}");b("\u2131","\\mathscr{F}");b("\u210B","\\mathscr{H}");b("\u2110","\\mathscr{I}");b("\u2112","\\mathscr{L}");b("\u2133","\\mathscr{M}");b("\u211B","\\mathscr{R}");b("\u212D","\\mathfrak{C}");b("\u210C","\\mathfrak{H}");b("\u2128","\\mathfrak{Z}");b("\\Bbbk","\\Bbb{k}");b("\xB7","\\cdotp");b("\\llap","\\mathllap{\\textrm{#1}}");b("\\rlap","\\mathrlap{\\textrm{#1}}");b("\\clap","\\mathclap{\\textrm{#1}}");b("\\mathstrut","\\vphantom{(}");b("\\underbar","\\underline{\\text{#1}}");b("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}\\nobreak}{\\char"338}');b("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`\u2260}}");b("\\ne","\\neq");b("\u2260","\\neq");b("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`\u2209}}");b("\u2209","\\notin");b("\u2258","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`\u2258}}");b("\u2259","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`\u2258}}");b("\u225A","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`\u225A}}");b("\u225B","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`\u225B}}");b("\u225D","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`\u225D}}");b("\u225E","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`\u225E}}");b("\u225F","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`\u225F}}");b("\u27C2","\\perp");b("\u203C","\\mathclose{!\\mkern-0.8mu!}");b("\u220C","\\notni");b("\u231C","\\ulcorner");b("\u231D","\\urcorner");b("\u231E","\\llcorner");b("\u231F","\\lrcorner");b("\xA9","\\copyright");b("\xAE","\\textregistered");b("\uFE0F","\\textregistered");b("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');b("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');b("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');b("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');b("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");b("\u22EE","\\vdots");b("\\varGamma","\\mathit{\\Gamma}");b("\\varDelta","\\mathit{\\Delta}");b("\\varTheta","\\mathit{\\Theta}");b("\\varLambda","\\mathit{\\Lambda}");b("\\varXi","\\mathit{\\Xi}");b("\\varPi","\\mathit{\\Pi}");b("\\varSigma","\\mathit{\\Sigma}");b("\\varUpsilon","\\mathit{\\Upsilon}");b("\\varPhi","\\mathit{\\Phi}");b("\\varPsi","\\mathit{\\Psi}");b("\\varOmega","\\mathit{\\Omega}");b("\\substack","\\begin{subarray}{c}#1\\end{subarray}");b("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");b("\\boxed","\\fbox{$\\displaystyle{#1}$}");b("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");b("\\implies","\\DOTSB\\;\\Longrightarrow\\;");b("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");b("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");b("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var dm={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"},p6=new Set(["bin","rel"]);b("\\dots",function(i){var e="\\dotso",t=i.expandAfterFuture().text;return t in dm?e=dm[t]:(t.slice(0,4)==="\\not"||t in me.math&&p6.has(me.math[t].group))&&(e="\\dotsb"),e});var wh={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};b("\\dotso",function(i){var e=i.future().text;return e in wh?"\\ldots\\,":"\\ldots"});b("\\dotsc",function(i){var e=i.future().text;return e in wh&&e!==","?"\\ldots\\,":"\\ldots"});b("\\cdots",function(i){var e=i.future().text;return e in wh?"\\@cdots\\,":"\\@cdots"});b("\\dotsb","\\cdots");b("\\dotsm","\\cdots");b("\\dotsi","\\!\\cdots");b("\\dotsx","\\ldots\\,");b("\\DOTSI","\\relax");b("\\DOTSB","\\relax");b("\\DOTSX","\\relax");b("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");b("\\,","\\tmspace+{3mu}{.1667em}");b("\\thinspace","\\,");b("\\>","\\mskip{4mu}");b("\\:","\\tmspace+{4mu}{.2222em}");b("\\medspace","\\:");b("\\;","\\tmspace+{5mu}{.2777em}");b("\\thickspace","\\;");b("\\!","\\tmspace-{3mu}{.1667em}");b("\\negthinspace","\\!");b("\\negmedspace","\\tmspace-{4mu}{.2222em}");b("\\negthickspace","\\tmspace-{5mu}{.277em}");b("\\enspace","\\kern.5em ");b("\\enskip","\\hskip.5em\\relax");b("\\quad","\\hskip1em\\relax");b("\\qquad","\\hskip2em\\relax");b("\\tag","\\@ifstar\\tag@literal\\tag@paren");b("\\tag@paren","\\tag@literal{({#1})}");b("\\tag@literal",i=>{if(i.macros.get("\\df@tag"))throw new R("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});b("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");b("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");b("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");b("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");b("\\newline","\\\\\\relax");b("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var s1=N(Jt["Main-Regular"][84][1]-.7*Jt["Main-Regular"][65][1]);b("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+s1+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");b("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+s1+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");b("\\hspace","\\@ifstar\\@hspacer\\@hspace");b("\\@hspace","\\hskip #1\\relax");b("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");b("\\ordinarycolon",":");b("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");b("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');b("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');b("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');b("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');b("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');b("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');b("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');b("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');b("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');b("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');b("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');b("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');b("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');b("\u2237","\\dblcolon");b("\u2239","\\eqcolon");b("\u2254","\\coloneqq");b("\u2255","\\eqqcolon");b("\u2A74","\\Coloneqq");b("\\ratio","\\vcentcolon");b("\\coloncolon","\\dblcolon");b("\\colonequals","\\coloneqq");b("\\coloncolonequals","\\Coloneqq");b("\\equalscolon","\\eqqcolon");b("\\equalscoloncolon","\\Eqqcolon");b("\\colonminus","\\coloneq");b("\\coloncolonminus","\\Coloneq");b("\\minuscolon","\\eqcolon");b("\\minuscoloncolon","\\Eqcolon");b("\\coloncolonapprox","\\Colonapprox");b("\\coloncolonsim","\\Colonsim");b("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");b("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");b("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");b("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");b("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`\u220C}}");b("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");b("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");b("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");b("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");b("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");b("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");b("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");b("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");b("\\gvertneqq","\\html@mathml{\\@gvertneqq}{\u2269}");b("\\lvertneqq","\\html@mathml{\\@lvertneqq}{\u2268}");b("\\ngeqq","\\html@mathml{\\@ngeqq}{\u2271}");b("\\ngeqslant","\\html@mathml{\\@ngeqslant}{\u2271}");b("\\nleqq","\\html@mathml{\\@nleqq}{\u2270}");b("\\nleqslant","\\html@mathml{\\@nleqslant}{\u2270}");b("\\nshortmid","\\html@mathml{\\@nshortmid}{\u2224}");b("\\nshortparallel","\\html@mathml{\\@nshortparallel}{\u2226}");b("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{\u2288}");b("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{\u2289}");b("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{\u228A}");b("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{\u2ACB}");b("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{\u228B}");b("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{\u2ACC}");b("\\imath","\\html@mathml{\\@imath}{\u0131}");b("\\jmath","\\html@mathml{\\@jmath}{\u0237}");b("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`\u27E6}}");b("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`\u27E7}}");b("\u27E6","\\llbracket");b("\u27E7","\\rrbracket");b("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`\u2983}}");b("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`\u2984}}");b("\u2983","\\lBrace");b("\u2984","\\rBrace");b("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`\u29B5}}");b("\u29B5","\\minuso");b("\\darr","\\downarrow");b("\\dArr","\\Downarrow");b("\\Darr","\\Downarrow");b("\\lang","\\langle");b("\\rang","\\rangle");b("\\uarr","\\uparrow");b("\\uArr","\\Uparrow");b("\\Uarr","\\Uparrow");b("\\N","\\mathbb{N}");b("\\R","\\mathbb{R}");b("\\Z","\\mathbb{Z}");b("\\alef","\\aleph");b("\\alefsym","\\aleph");b("\\Alpha","\\mathrm{A}");b("\\Beta","\\mathrm{B}");b("\\bull","\\bullet");b("\\Chi","\\mathrm{X}");b("\\clubs","\\clubsuit");b("\\cnums","\\mathbb{C}");b("\\Complex","\\mathbb{C}");b("\\Dagger","\\ddagger");b("\\diamonds","\\diamondsuit");b("\\empty","\\emptyset");b("\\Epsilon","\\mathrm{E}");b("\\Eta","\\mathrm{H}");b("\\exist","\\exists");b("\\harr","\\leftrightarrow");b("\\hArr","\\Leftrightarrow");b("\\Harr","\\Leftrightarrow");b("\\hearts","\\heartsuit");b("\\image","\\Im");b("\\infin","\\infty");b("\\Iota","\\mathrm{I}");b("\\isin","\\in");b("\\Kappa","\\mathrm{K}");b("\\larr","\\leftarrow");b("\\lArr","\\Leftarrow");b("\\Larr","\\Leftarrow");b("\\lrarr","\\leftrightarrow");b("\\lrArr","\\Leftrightarrow");b("\\Lrarr","\\Leftrightarrow");b("\\Mu","\\mathrm{M}");b("\\natnums","\\mathbb{N}");b("\\Nu","\\mathrm{N}");b("\\Omicron","\\mathrm{O}");b("\\plusmn","\\pm");b("\\rarr","\\rightarrow");b("\\rArr","\\Rightarrow");b("\\Rarr","\\Rightarrow");b("\\real","\\Re");b("\\reals","\\mathbb{R}");b("\\Reals","\\mathbb{R}");b("\\Rho","\\mathrm{P}");b("\\sdot","\\cdot");b("\\sect","\\S");b("\\spades","\\spadesuit");b("\\sub","\\subset");b("\\sube","\\subseteq");b("\\supe","\\supseteq");b("\\Tau","\\mathrm{T}");b("\\thetasym","\\vartheta");b("\\weierp","\\wp");b("\\Zeta","\\mathrm{Z}");b("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");b("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");b("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");b("\\bra","\\mathinner{\\langle{#1}|}");b("\\ket","\\mathinner{|{#1}\\rangle}");b("\\braket","\\mathinner{\\langle{#1}\\rangle}");b("\\Bra","\\left\\langle#1\\right|");b("\\Ket","\\left|#1\\right\\rangle");var o1=i=>e=>{var t=e.consumeArg().tokens,r=e.consumeArg().tokens,n=e.consumeArg().tokens,s=e.consumeArg().tokens,o=e.macros.get("|"),l=e.macros.get("\\|");e.macros.beginGroup();var a=u=>d=>{i&&(d.macros.set("|",o),n.length&&d.macros.set("\\|",l));var p=u;if(!u&&n.length){var v=d.future();v.text==="|"&&(d.popToken(),p=!0)}return{tokens:p?n:r,numArgs:0}};e.macros.set("|",a(!1)),n.length&&e.macros.set("\\|",a(!0));var h=e.consumeArg().tokens,c=e.expandTokens([...s,...h,...t]);return e.macros.endGroup(),{tokens:c.reverse(),numArgs:0}};b("\\bra@ket",o1(!1));b("\\bra@set",o1(!0));b("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");b("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");b("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");b("\\angln","{\\angl n}");b("\\blue","\\textcolor{##6495ed}{#1}");b("\\orange","\\textcolor{##ffa500}{#1}");b("\\pink","\\textcolor{##ff00af}{#1}");b("\\red","\\textcolor{##df0030}{#1}");b("\\green","\\textcolor{##28ae7b}{#1}");b("\\gray","\\textcolor{gray}{#1}");b("\\purple","\\textcolor{##9d38bd}{#1}");b("\\blueA","\\textcolor{##ccfaff}{#1}");b("\\blueB","\\textcolor{##80f6ff}{#1}");b("\\blueC","\\textcolor{##63d9ea}{#1}");b("\\blueD","\\textcolor{##11accd}{#1}");b("\\blueE","\\textcolor{##0c7f99}{#1}");b("\\tealA","\\textcolor{##94fff5}{#1}");b("\\tealB","\\textcolor{##26edd5}{#1}");b("\\tealC","\\textcolor{##01d1c1}{#1}");b("\\tealD","\\textcolor{##01a995}{#1}");b("\\tealE","\\textcolor{##208170}{#1}");b("\\greenA","\\textcolor{##b6ffb0}{#1}");b("\\greenB","\\textcolor{##8af281}{#1}");b("\\greenC","\\textcolor{##74cf70}{#1}");b("\\greenD","\\textcolor{##1fab54}{#1}");b("\\greenE","\\textcolor{##0d923f}{#1}");b("\\goldA","\\textcolor{##ffd0a9}{#1}");b("\\goldB","\\textcolor{##ffbb71}{#1}");b("\\goldC","\\textcolor{##ff9c39}{#1}");b("\\goldD","\\textcolor{##e07d10}{#1}");b("\\goldE","\\textcolor{##a75a05}{#1}");b("\\redA","\\textcolor{##fca9a9}{#1}");b("\\redB","\\textcolor{##ff8482}{#1}");b("\\redC","\\textcolor{##f9685d}{#1}");b("\\redD","\\textcolor{##e84d39}{#1}");b("\\redE","\\textcolor{##bc2612}{#1}");b("\\maroonA","\\textcolor{##ffbde0}{#1}");b("\\maroonB","\\textcolor{##ff92c6}{#1}");b("\\maroonC","\\textcolor{##ed5fa6}{#1}");b("\\maroonD","\\textcolor{##ca337c}{#1}");b("\\maroonE","\\textcolor{##9e034e}{#1}");b("\\purpleA","\\textcolor{##ddd7ff}{#1}");b("\\purpleB","\\textcolor{##c6b9fc}{#1}");b("\\purpleC","\\textcolor{##aa87ff}{#1}");b("\\purpleD","\\textcolor{##7854ab}{#1}");b("\\purpleE","\\textcolor{##543b78}{#1}");b("\\mintA","\\textcolor{##f5f9e8}{#1}");b("\\mintB","\\textcolor{##edf2df}{#1}");b("\\mintC","\\textcolor{##e0e5cc}{#1}");b("\\grayA","\\textcolor{##f6f7f7}{#1}");b("\\grayB","\\textcolor{##f0f1f2}{#1}");b("\\grayC","\\textcolor{##e3e5e6}{#1}");b("\\grayD","\\textcolor{##d6d8da}{#1}");b("\\grayE","\\textcolor{##babec2}{#1}");b("\\grayF","\\textcolor{##888d93}{#1}");b("\\grayG","\\textcolor{##626569}{#1}");b("\\grayH","\\textcolor{##3b3e40}{#1}");b("\\grayI","\\textcolor{##21242c}{#1}");b("\\kaBlue","\\textcolor{##314453}{#1}");b("\\kaGreen","\\textcolor{##71B307}{#1}");var l1={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0},sh=class{constructor(e,t,r){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new nh(m6,t.macros),this.mode=r,this.stack=[]}feed(e){this.lexer=new Po(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var t,r,n;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;t=this.popToken(),{tokens:n,end:r}=this.consumeArg(["]"])}else({tokens:n,start:t,end:r}=this.consumeArg());return this.pushToken(new mt("EOF",r.loc)),this.pushTokens(n),new mt("",lt.range(t,r))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var t=[],r=e&&e.length>0;r||this.consumeSpaces();var n=this.future(),s,o=0,l=0;do{if(s=this.popToken(),t.push(s),s.text==="{")++o;else if(s.text==="}"){if(--o,o===-1)throw new R("Extra }",s)}else if(s.text==="EOF")throw new R("Unexpected end of input in a macro argument, expected '"+(e&&r?e[l]:"}")+"'",s);if(e&&r)if((o===0||o===1&&e[l]==="{")&&s.text===e[l]){if(++l,l===e.length){t.splice(-l,l);break}}else l=0}while(o!==0||r);return n.text==="{"&&t[t.length-1].text==="}"&&(t.pop(),t.shift()),t.reverse(),{tokens:t,start:n,end:s}}consumeArgs(e,t){if(t){if(t.length!==e+1)throw new R("The length of delimiters doesn't match the number of args!");for(var r=t[0],n=0;n<r.length;n++){var s=this.popToken();if(r[n]!==s.text)throw new R("Use of the macro doesn't match its definition",s)}}for(var o=[],l=0;l<e;l++)o.push(this.consumeArg(t&&t[l+1]).tokens);return o}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new R("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var t=this.popToken(),r=t.text,n=t.noexpand?null:this._getExpansion(r);if(n==null||e&&n.unexpandable){if(e&&n==null&&r[0]==="\\"&&!this.isDefined(r))throw new R("Undefined control sequence: "+r);return this.pushToken(t),!1}this.countExpansion(1);var s=n.tokens,o=this.consumeArgs(n.numArgs,n.delimiters);if(n.numArgs){s=s.slice();for(var l=s.length-1;l>=0;--l){var a=s[l];if(a.text==="#"){if(l===0)throw new R("Incomplete placeholder at end of macro body",a);if(a=s[--l],a.text==="#")s.splice(l+1,1);else if(/^[1-9]$/.test(a.text))s.splice(l,2,...o[+a.text-1]);else throw new R("Not a valid argument number",a)}}}return this.pushTokens(s),s.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new mt(e)]):void 0}expandTokens(e){var t=[],r=this.stack.length;for(this.pushTokens(e);this.stack.length>r;)if(this.expandOnce(!0)===!1){var n=this.stack.pop();n.treatAsRelax&&(n.noexpand=!1,n.treatAsRelax=!1),t.push(n)}return this.countExpansion(t.length),t}expandMacroAsText(e){var t=this.expandMacro(e);return t&&t.map(r=>r.text).join("")}_getExpansion(e){var t=this.macros.get(e);if(t==null)return t;if(e.length===1){var r=this.lexer.catcodes[e];if(r!=null&&r!==13)return}var n=typeof t=="function"?t(this):t;if(typeof n=="string"){var s=0;if(n.includes("#"))for(var o=n.replace(/##/g,"");o.includes("#"+(s+1));)++s;for(var l=new Po(n,this.settings),a=[],h=l.lex();h.text!=="EOF";)a.push(h),h=l.lex();a.reverse();var c={tokens:a,numArgs:s};return c}return n}isDefined(e){return this.macros.has(e)||Dr.hasOwnProperty(e)||me.math.hasOwnProperty(e)||me.text.hasOwnProperty(e)||l1.hasOwnProperty(e)}isExpandable(e){var t=this.macros.get(e);return t!=null?typeof t=="string"||typeof t=="function"||!t.unexpandable:Dr.hasOwnProperty(e)&&!Dr[e].primitive}},mm=/^[]/,Mo=Object.freeze({"\u208A":"+","\u208B":"-","\u208C":"=","\u208D":"(","\u208E":")","\u2080":"0","\u2081":"1","\u2082":"2","\u2083":"3","\u2084":"4","\u2085":"5","\u2086":"6","\u2087":"7","\u2088":"8","\u2089":"9","\u2090":"a","\u2091":"e","\u2095":"h","\u1D62":"i","\u2C7C":"j","\u2096":"k","\u2097":"l","\u2098":"m","\u2099":"n","\u2092":"o","\u209A":"p","\u1D63":"r","\u209B":"s","\u209C":"t","\u1D64":"u","\u1D65":"v","\u2093":"x","\u1D66":"\u03B2","\u1D67":"\u03B3","\u1D68":"\u03C1","\u1D69":"\u03D5","\u1D6A":"\u03C7","\u207A":"+","\u207B":"-","\u207C":"=","\u207D":"(","\u207E":")","\u2070":"0","\xB9":"1","\xB2":"2","\xB3":"3","\u2074":"4","\u2075":"5","\u2076":"6","\u2077":"7","\u2078":"8","\u2079":"9","\u1D2C":"A","\u1D2E":"B","\u1D30":"D","\u1D31":"E","\u1D33":"G","\u1D34":"H","\u1D35":"I","\u1D36":"J","\u1D37":"K","\u1D38":"L","\u1D39":"M","\u1D3A":"N","\u1D3C":"O","\u1D3E":"P","\u1D3F":"R","\u1D40":"T","\u1D41":"U","\u2C7D":"V","\u1D42":"W","\u1D43":"a","\u1D47":"b","\u1D9C":"c","\u1D48":"d","\u1D49":"e","\u1DA0":"f","\u1D4D":"g",\u02B0:"h","\u2071":"i",\u02B2:"j","\u1D4F":"k",\u02E1:"l","\u1D50":"m",\u207F:"n","\u1D52":"o","\u1D56":"p",\u02B3:"r",\u02E2:"s","\u1D57":"t","\u1D58":"u","\u1D5B":"v",\u02B7:"w",\u02E3:"x",\u02B8:"y","\u1DBB":"z","\u1D5D":"\u03B2","\u1D5E":"\u03B3","\u1D5F":"\u03B4","\u1D60":"\u03D5","\u1D61":"\u03C7","\u1DBF":"\u03B8"}),K0={"\u0301":{text:"\\'",math:"\\acute"},"\u0300":{text:"\\`",math:"\\grave"},"\u0308":{text:'\\"',math:"\\ddot"},"\u0303":{text:"\\~",math:"\\tilde"},"\u0304":{text:"\\=",math:"\\bar"},"\u0306":{text:"\\u",math:"\\breve"},"\u030C":{text:"\\v",math:"\\check"},"\u0302":{text:"\\^",math:"\\hat"},"\u0307":{text:"\\.",math:"\\dot"},"\u030A":{text:"\\r",math:"\\mathring"},"\u030B":{text:"\\H"},"\u0327":{text:"\\c"}},pm={\u00E1:"a\u0301",\u00E0:"a\u0300",\u00E4:"a\u0308",\u01DF:"a\u0308\u0304",\u00E3:"a\u0303",\u0101:"a\u0304",\u0103:"a\u0306",\u1EAF:"a\u0306\u0301",\u1EB1:"a\u0306\u0300",\u1EB5:"a\u0306\u0303",\u01CE:"a\u030C",\u00E2:"a\u0302",\u1EA5:"a\u0302\u0301",\u1EA7:"a\u0302\u0300",\u1EAB:"a\u0302\u0303",\u0227:"a\u0307",\u01E1:"a\u0307\u0304",\u00E5:"a\u030A",\u01FB:"a\u030A\u0301",\u1E03:"b\u0307",\u0107:"c\u0301",\u1E09:"c\u0327\u0301",\u010D:"c\u030C",\u0109:"c\u0302",\u010B:"c\u0307",\u00E7:"c\u0327",\u010F:"d\u030C",\u1E0B:"d\u0307",\u1E11:"d\u0327",\u00E9:"e\u0301",\u00E8:"e\u0300",\u00EB:"e\u0308",\u1EBD:"e\u0303",\u0113:"e\u0304",\u1E17:"e\u0304\u0301",\u1E15:"e\u0304\u0300",\u0115:"e\u0306",\u1E1D:"e\u0327\u0306",\u011B:"e\u030C",\u00EA:"e\u0302",\u1EBF:"e\u0302\u0301",\u1EC1:"e\u0302\u0300",\u1EC5:"e\u0302\u0303",\u0117:"e\u0307",\u0229:"e\u0327",\u1E1F:"f\u0307",\u01F5:"g\u0301",\u1E21:"g\u0304",\u011F:"g\u0306",\u01E7:"g\u030C",\u011D:"g\u0302",\u0121:"g\u0307",\u0123:"g\u0327",\u1E27:"h\u0308",\u021F:"h\u030C",\u0125:"h\u0302",\u1E23:"h\u0307",\u1E29:"h\u0327",\u00ED:"i\u0301",\u00EC:"i\u0300",\u00EF:"i\u0308",\u1E2F:"i\u0308\u0301",\u0129:"i\u0303",\u012B:"i\u0304",\u012D:"i\u0306",\u01D0:"i\u030C",\u00EE:"i\u0302",\u01F0:"j\u030C",\u0135:"j\u0302",\u1E31:"k\u0301",\u01E9:"k\u030C",\u0137:"k\u0327",\u013A:"l\u0301",\u013E:"l\u030C",\u013C:"l\u0327",\u1E3F:"m\u0301",\u1E41:"m\u0307",\u0144:"n\u0301",\u01F9:"n\u0300",\u00F1:"n\u0303",\u0148:"n\u030C",\u1E45:"n\u0307",\u0146:"n\u0327",\u00F3:"o\u0301",\u00F2:"o\u0300",\u00F6:"o\u0308",\u022B:"o\u0308\u0304",\u00F5:"o\u0303",\u1E4D:"o\u0303\u0301",\u1E4F:"o\u0303\u0308",\u022D:"o\u0303\u0304",\u014D:"o\u0304",\u1E53:"o\u0304\u0301",\u1E51:"o\u0304\u0300",\u014F:"o\u0306",\u01D2:"o\u030C",\u00F4:"o\u0302",\u1ED1:"o\u0302\u0301",\u1ED3:"o\u0302\u0300",\u1ED7:"o\u0302\u0303",\u022F:"o\u0307",\u0231:"o\u0307\u0304",\u0151:"o\u030B",\u1E55:"p\u0301",\u1E57:"p\u0307",\u0155:"r\u0301",\u0159:"r\u030C",\u1E59:"r\u0307",\u0157:"r\u0327",\u015B:"s\u0301",\u1E65:"s\u0301\u0307",\u0161:"s\u030C",\u1E67:"s\u030C\u0307",\u015D:"s\u0302",\u1E61:"s\u0307",\u015F:"s\u0327",\u1E97:"t\u0308",\u0165:"t\u030C",\u1E6B:"t\u0307",\u0163:"t\u0327",\u00FA:"u\u0301",\u00F9:"u\u0300",\u00FC:"u\u0308",\u01D8:"u\u0308\u0301",\u01DC:"u\u0308\u0300",\u01D6:"u\u0308\u0304",\u01DA:"u\u0308\u030C",\u0169:"u\u0303",\u1E79:"u\u0303\u0301",\u016B:"u\u0304",\u1E7B:"u\u0304\u0308",\u016D:"u\u0306",\u01D4:"u\u030C",\u00FB:"u\u0302",\u016F:"u\u030A",\u0171:"u\u030B",\u1E7D:"v\u0303",\u1E83:"w\u0301",\u1E81:"w\u0300",\u1E85:"w\u0308",\u0175:"w\u0302",\u1E87:"w\u0307",\u1E98:"w\u030A",\u1E8D:"x\u0308",\u1E8B:"x\u0307",\u00FD:"y\u0301",\u1EF3:"y\u0300",\u00FF:"y\u0308",\u1EF9:"y\u0303",\u0233:"y\u0304",\u0177:"y\u0302",\u1E8F:"y\u0307",\u1E99:"y\u030A",\u017A:"z\u0301",\u017E:"z\u030C",\u1E91:"z\u0302",\u017C:"z\u0307",\u00C1:"A\u0301",\u00C0:"A\u0300",\u00C4:"A\u0308",\u01DE:"A\u0308\u0304",\u00C3:"A\u0303",\u0100:"A\u0304",\u0102:"A\u0306",\u1EAE:"A\u0306\u0301",\u1EB0:"A\u0306\u0300",\u1EB4:"A\u0306\u0303",\u01CD:"A\u030C",\u00C2:"A\u0302",\u1EA4:"A\u0302\u0301",\u1EA6:"A\u0302\u0300",\u1EAA:"A\u0302\u0303",\u0226:"A\u0307",\u01E0:"A\u0307\u0304",\u00C5:"A\u030A",\u01FA:"A\u030A\u0301",\u1E02:"B\u0307",\u0106:"C\u0301",\u1E08:"C\u0327\u0301",\u010C:"C\u030C",\u0108:"C\u0302",\u010A:"C\u0307",\u00C7:"C\u0327",\u010E:"D\u030C",\u1E0A:"D\u0307",\u1E10:"D\u0327",\u00C9:"E\u0301",\u00C8:"E\u0300",\u00CB:"E\u0308",\u1EBC:"E\u0303",\u0112:"E\u0304",\u1E16:"E\u0304\u0301",\u1E14:"E\u0304\u0300",\u0114:"E\u0306",\u1E1C:"E\u0327\u0306",\u011A:"E\u030C",\u00CA:"E\u0302",\u1EBE:"E\u0302\u0301",\u1EC0:"E\u0302\u0300",\u1EC4:"E\u0302\u0303",\u0116:"E\u0307",\u0228:"E\u0327",\u1E1E:"F\u0307",\u01F4:"G\u0301",\u1E20:"G\u0304",\u011E:"G\u0306",\u01E6:"G\u030C",\u011C:"G\u0302",\u0120:"G\u0307",\u0122:"G\u0327",\u1E26:"H\u0308",\u021E:"H\u030C",\u0124:"H\u0302",\u1E22:"H\u0307",\u1E28:"H\u0327",\u00CD:"I\u0301",\u00CC:"I\u0300",\u00CF:"I\u0308",\u1E2E:"I\u0308\u0301",\u0128:"I\u0303",\u012A:"I\u0304",\u012C:"I\u0306",\u01CF:"I\u030C",\u00CE:"I\u0302",\u0130:"I\u0307",\u0134:"J\u0302",\u1E30:"K\u0301",\u01E8:"K\u030C",\u0136:"K\u0327",\u0139:"L\u0301",\u013D:"L\u030C",\u013B:"L\u0327",\u1E3E:"M\u0301",\u1E40:"M\u0307",\u0143:"N\u0301",\u01F8:"N\u0300",\u00D1:"N\u0303",\u0147:"N\u030C",\u1E44:"N\u0307",\u0145:"N\u0327",\u00D3:"O\u0301",\u00D2:"O\u0300",\u00D6:"O\u0308",\u022A:"O\u0308\u0304",\u00D5:"O\u0303",\u1E4C:"O\u0303\u0301",\u1E4E:"O\u0303\u0308",\u022C:"O\u0303\u0304",\u014C:"O\u0304",\u1E52:"O\u0304\u0301",\u1E50:"O\u0304\u0300",\u014E:"O\u0306",\u01D1:"O\u030C",\u00D4:"O\u0302",\u1ED0:"O\u0302\u0301",\u1ED2:"O\u0302\u0300",\u1ED6:"O\u0302\u0303",\u022E:"O\u0307",\u0230:"O\u0307\u0304",\u0150:"O\u030B",\u1E54:"P\u0301",\u1E56:"P\u0307",\u0154:"R\u0301",\u0158:"R\u030C",\u1E58:"R\u0307",\u0156:"R\u0327",\u015A:"S\u0301",\u1E64:"S\u0301\u0307",\u0160:"S\u030C",\u1E66:"S\u030C\u0307",\u015C:"S\u0302",\u1E60:"S\u0307",\u015E:"S\u0327",\u0164:"T\u030C",\u1E6A:"T\u0307",\u0162:"T\u0327",\u00DA:"U\u0301",\u00D9:"U\u0300",\u00DC:"U\u0308",\u01D7:"U\u0308\u0301",\u01DB:"U\u0308\u0300",\u01D5:"U\u0308\u0304",\u01D9:"U\u0308\u030C",\u0168:"U\u0303",\u1E78:"U\u0303\u0301",\u016A:"U\u0304",\u1E7A:"U\u0304\u0308",\u016C:"U\u0306",\u01D3:"U\u030C",\u00DB:"U\u0302",\u016E:"U\u030A",\u0170:"U\u030B",\u1E7C:"V\u0303",\u1E82:"W\u0301",\u1E80:"W\u0300",\u1E84:"W\u0308",\u0174:"W\u0302",\u1E86:"W\u0307",\u1E8C:"X\u0308",\u1E8A:"X\u0307",\u00DD:"Y\u0301",\u1EF2:"Y\u0300",\u0178:"Y\u0308",\u1EF8:"Y\u0303",\u0232:"Y\u0304",\u0176:"Y\u0302",\u1E8E:"Y\u0307",\u0179:"Z\u0301",\u017D:"Z\u030C",\u1E90:"Z\u0302",\u017B:"Z\u0307",\u03AC:"\u03B1\u0301",\u1F70:"\u03B1\u0300",\u1FB1:"\u03B1\u0304",\u1FB0:"\u03B1\u0306",\u03AD:"\u03B5\u0301",\u1F72:"\u03B5\u0300",\u03AE:"\u03B7\u0301",\u1F74:"\u03B7\u0300",\u03AF:"\u03B9\u0301",\u1F76:"\u03B9\u0300",\u03CA:"\u03B9\u0308",\u0390:"\u03B9\u0308\u0301",\u1FD2:"\u03B9\u0308\u0300",\u1FD1:"\u03B9\u0304",\u1FD0:"\u03B9\u0306",\u03CC:"\u03BF\u0301",\u1F78:"\u03BF\u0300",\u03CD:"\u03C5\u0301",\u1F7A:"\u03C5\u0300",\u03CB:"\u03C5\u0308",\u03B0:"\u03C5\u0308\u0301",\u1FE2:"\u03C5\u0308\u0300",\u1FE1:"\u03C5\u0304",\u1FE0:"\u03C5\u0306",\u03CE:"\u03C9\u0301",\u1F7C:"\u03C9\u0300",\u038E:"\u03A5\u0301",\u1FEA:"\u03A5\u0300",\u03AB:"\u03A5\u0308",\u1FE9:"\u03A5\u0304",\u1FE8:"\u03A5\u0306",\u038F:"\u03A9\u0301",\u1FFA:"\u03A9\u0300"},No=class i{constructor(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new sh(e,t,this.mode),this.settings=t,this.leftrightDepth=0}expect(e,t){if(t===void 0&&(t=!0),this.fetch().text!==e)throw new R("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var t=this.nextToken;this.consume(),this.gullet.pushToken(new mt("}")),this.gullet.pushTokens(e);var r=this.parseExpression(!1);return this.expect("}"),this.nextToken=t,r}parseExpression(e,t){for(var r=[];;){this.mode==="math"&&this.consumeSpaces();var n=this.fetch();if(i.endOfExpression.has(n.text)||t&&n.text===t||e&&Dr[n.text]&&Dr[n.text].infix)break;var s=this.parseAtom(t);if(s){if(s.type==="internal")continue}else break;r.push(s)}return this.mode==="text"&&this.formLigatures(r),this.handleInfixNodes(r)}handleInfixNodes(e){for(var t=-1,r,n=0;n<e.length;n++)if(e[n].type==="infix"){if(t!==-1)throw new R("only one infix operator per group",e[n].token);t=n,r=e[n].replaceWith}if(t!==-1&&r){var s,o,l=e.slice(0,t),a=e.slice(t+1);l.length===1&&l[0].type==="ordgroup"?s=l[0]:s={type:"ordgroup",mode:this.mode,body:l},a.length===1&&a[0].type==="ordgroup"?o=a[0]:o={type:"ordgroup",mode:this.mode,body:a};var h;return r==="\\\\abovefrac"?h=this.callFunction(r,[s,e[t],o],[]):h=this.callFunction(r,[s,o],[]),[h]}else return e}handleSupSubscript(e){var t=this.fetch(),r=t.text;this.consume(),this.consumeSpaces();var n;do{var s;n=this.parseGroup(e)}while(((s=n)==null?void 0:s.type)==="internal");if(!n)throw new R("Expected group after '"+r+"'",t);return n}formatUnsupportedCmd(e){for(var t=[],r=0;r<e.length;r++)t.push({type:"textord",mode:"text",text:e[r]});var n={type:"text",mode:this.mode,body:t},s={type:"color",mode:this.mode,color:this.settings.errorColor,body:[n]};return s}parseAtom(e){var t=this.parseGroup("atom",e);if(t?.type==="internal"||this.mode==="text")return t;for(var r,n;;){this.consumeSpaces();var s=this.fetch();if(s.text==="\\limits"||s.text==="\\nolimits"){if(t&&t.type==="op"){var o=s.text==="\\limits";t.limits=o,t.alwaysHandleSupSub=!0}else if(t&&t.type==="operatorname")t.alwaysHandleSupSub&&(t.limits=s.text==="\\limits");else throw new R("Limit controls must follow a math operator",s);this.consume()}else if(s.text==="^"){if(r)throw new R("Double superscript",s);r=this.handleSupSubscript("superscript")}else if(s.text==="_"){if(n)throw new R("Double subscript",s);n=this.handleSupSubscript("subscript")}else if(s.text==="'"){if(r)throw new R("Double superscript",s);var l={type:"textord",mode:this.mode,text:"\\prime"},a=[l];for(this.consume();this.fetch().text==="'";)a.push(l),this.consume();this.fetch().text==="^"&&a.push(this.handleSupSubscript("superscript")),r={type:"ordgroup",mode:this.mode,body:a}}else if(Mo[s.text]){var h=mm.test(s.text),c=[];for(c.push(new mt(Mo[s.text])),this.consume();;){var u=this.fetch().text;if(!Mo[u]||mm.test(u)!==h)break;c.unshift(new mt(Mo[u])),this.consume()}var d=this.subparse(c);h?n={type:"ordgroup",mode:"math",body:d}:r={type:"ordgroup",mode:"math",body:d}}else break}return r||n?{type:"supsub",mode:this.mode,base:t,sup:r,sub:n}:t}parseFunction(e,t){var r=this.fetch(),n=r.text,s=Dr[n];if(!s)return null;if(this.consume(),t&&t!=="atom"&&!s.allowedInArgument)throw new R("Got function '"+n+"' with no arguments"+(t?" as "+t:""),r);if(this.mode==="text"&&!s.allowedInText)throw new R("Can't use function '"+n+"' in text mode",r);if(this.mode==="math"&&s.allowedInMath===!1)throw new R("Can't use function '"+n+"' in math mode",r);var{args:o,optArgs:l}=this.parseArguments(n,s);return this.callFunction(n,o,l,r,e)}callFunction(e,t,r,n,s){var o={funcName:e,parser:this,token:n,breakOnTokenText:s},l=Dr[e];if(l&&l.handler)return l.handler(o,t,r);throw new R("No function handler for "+e)}parseArguments(e,t){var r=t.numArgs+t.numOptionalArgs;if(r===0)return{args:[],optArgs:[]};for(var n=[],s=[],o=0;o<r;o++){var l=t.argTypes&&t.argTypes[o],a=o<t.numOptionalArgs;(t.primitive&&l==null||t.type==="sqrt"&&o===1&&s[0]==null)&&(l="primitive");var h=this.parseGroupOfType("argument to '"+e+"'",l,a);if(a)s.push(h);else if(h!=null)n.push(h);else throw new R("Null argument, please report this as a bug")}return{args:n,optArgs:s}}parseGroupOfType(e,t,r){switch(t){case"color":return this.parseColorGroup(r);case"size":return this.parseSizeGroup(r);case"url":return this.parseUrlGroup(r);case"math":case"text":return this.parseArgumentGroup(r,t);case"hbox":{var n=this.parseArgumentGroup(r,"text");return n!=null?{type:"styling",mode:n.mode,body:[n],style:"text"}:null}case"raw":{var s=this.parseStringGroup("raw",r);return s!=null?{type:"raw",mode:"text",string:s.text}:null}case"primitive":{if(r)throw new R("A primitive argument cannot be optional");var o=this.parseGroup(e);if(o==null)throw new R("Expected group as "+e,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(r);default:throw new R("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,t){var r=this.gullet.scanArgument(t);if(r==null)return null;for(var n="",s;(s=this.fetch()).text!=="EOF";)n+=s.text,this.consume();return this.consume(),r.text=n,r}parseRegexGroup(e,t){for(var r=this.fetch(),n=r,s="",o;(o=this.fetch()).text!=="EOF"&&e.test(s+o.text);)n=o,s+=n.text,this.consume();if(s==="")throw new R("Invalid "+t+": '"+r.text+"'",r);return r.range(n,s)}parseColorGroup(e){var t=this.parseStringGroup("color",e);if(t==null)return null;var r=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!r)throw new R("Invalid color: '"+t.text+"'",t);var n=r[0];return/^[0-9a-f]{6}$/i.test(n)&&(n="#"+n),{type:"color-token",mode:this.mode,color:n}}parseSizeGroup(e){var t,r=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?t=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):t=this.parseStringGroup("size",e),!t)return null;!e&&t.text.length===0&&(t.text="0pt",r=!0);var n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!n)throw new R("Invalid size: '"+t.text+"'",t);var s={number:+(n[1]+n[2]),unit:n[3]};if(!vm(s))throw new R("Invalid unit: '"+s.unit+"'",t);return{type:"size",mode:this.mode,value:s,isBlank:r}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),t==null)return null;var r=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:r}}parseArgumentGroup(e,t){var r=this.gullet.scanArgument(e);if(r==null)return null;var n=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();var s=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:r.loc,body:s};return t&&this.switchMode(n),o}parseGroup(e,t){var r=this.fetch(),n=r.text,s;if(n==="{"||n==="\\begingroup"){this.consume();var o=n==="{"?"}":"\\endgroup";this.gullet.beginGroup();var l=this.parseExpression(!1,o),a=this.fetch();this.expect(o),this.gullet.endGroup(),s={type:"ordgroup",mode:this.mode,loc:lt.range(r,a),body:l,semisimple:n==="\\begingroup"||void 0}}else if(s=this.parseFunction(t,e)||this.parseSymbol(),s==null&&n[0]==="\\"&&!l1.hasOwnProperty(n)){if(this.settings.throwOnError)throw new R("Undefined control sequence: "+n,r);s=this.formatUnsupportedCmd(n),this.consume()}return s}formLigatures(e){for(var t=e.length-1,r=0;r<t;++r){var n=e[r],s=n.text;s==="-"&&e[r+1].text==="-"&&(r+1<t&&e[r+2].text==="-"?(e.splice(r,3,{type:"textord",mode:"text",loc:lt.range(n,e[r+2]),text:"---"}),t-=2):(e.splice(r,2,{type:"textord",mode:"text",loc:lt.range(n,e[r+1]),text:"--"}),t-=1)),(s==="'"||s==="`")&&e[r+1].text===s&&(e.splice(r,2,{type:"textord",mode:"text",loc:lt.range(n,e[r+1]),text:s+s}),t-=1)}}parseSymbol(){var e=this.fetch(),t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var r=t.slice(5),n=r.charAt(0)==="*";if(n&&(r=r.slice(1)),r.length<2||r.charAt(0)!==r.slice(-1))throw new R(`\\verb assertion failed --
                    please report what input caused this bug`);return r=r.slice(1,-1),{type:"verb",mode:"text",body:r,star:n}}pm.hasOwnProperty(t[0])&&!me[this.mode][t[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=pm[t[0]]+t.slice(1));var s=f6.exec(t);s&&(t=t.substring(0,s.index),t==="i"?t="\u0131":t==="j"&&(t="\u0237"));var o;if(me[this.mode][t]){this.settings.strict&&this.mode==="math"&&_0.includes(t)&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var l=me[this.mode][t].group,a=lt.range(e),h;if(d3.hasOwnProperty(l)){var c=l;h={type:"atom",mode:this.mode,family:c,loc:a,text:t}}else h={type:l,mode:this.mode,loc:a,text:t};o=h}else if(t.charCodeAt(0)>=128)this.settings.strict&&(gm(t.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'"'+(" ("+t.charCodeAt(0)+")"),e)),o={type:"textord",mode:"text",loc:lt.range(e),text:t};else return null;if(this.consume(),s)for(var u=0;u<s[0].length;u++){var d=s[0][u];if(!K0[d])throw new R("Unknown accent ' "+d+"'",e);var p=K0[d][this.mode]||K0[d].text;if(!p)throw new R("Accent "+d+" unsupported in "+this.mode+" mode",e);o={type:"accent",mode:this.mode,loc:lt.range(e),label:p,isStretchy:!1,isShifty:!0,base:o}}return o}};No.endOfExpression=new Set(["}","\\endgroup","\\end","\\right","&"]);var kh=function(e,t){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var r=new No(e,t);delete r.gullet.macros.current["\\df@tag"];var n=r.parse();if(delete r.gullet.macros.current["\\current@color"],delete r.gullet.macros.current["\\color"],r.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new R("\\tag works only in display equations");n=[{type:"tag",mode:"text",body:n,tag:r.subparse([new mt("\\df@tag")])}]}return n},a1=function(e,t,r){t.textContent="";var n=Sh(e,r).toNode();t.appendChild(n)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),a1=function(){throw new R("KaTeX doesn't work in quirks mode.")});var g6=function(e,t){var r=Sh(e,t).toMarkup();return r},v6=function(e,t){var r=new Bn(t);return kh(e,r)},h1=function(e,t,r){if(r.throwOnError||!(e instanceof R))throw e;var n=z(["katex-error"],[new at(t)]);return n.setAttribute("title",e.toString()),n.setAttribute("style","color:"+r.errorColor),n},Sh=function(e,t){var r=new Bn(t);try{var n=kh(e,r);return B3(n,e,r)}catch(s){return h1(s,e,r)}},b6=function(e,t){var r=new Bn(t);try{var n=kh(e,r);return E3(n,e,r)}catch(s){return h1(s,e,r)}},y6="0.16.33",x6={Span:ei,Anchor:On,SymbolNode:at,SvgNode:qt,PathNode:Zt,LineNode:zn},Ch={version:y6,render:a1,renderToString:g6,ParseError:R,SETTINGS_SCHEMA:To,__parse:v6,__renderToDomTree:Sh,__renderToHTMLTree:b6,__setFontMetrics:o3,__defineSymbol:f,__defineFunction:q,__defineMacro:b,__domTree:x6};var w6=function(e,t,r){for(var n=r,s=0,o=e.length;n<t.length;){var l=t[n];if(s<=0&&t.slice(n,n+o)===e)return n;l==="\\"?n++:l==="{"?s++:l==="}"&&s--,n++}return-1},k6=function(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")},S6=/^\\begin{/,C6=function(e,t){for(var r,n=[],s=new RegExp("("+t.map(h=>k6(h.left)).join("|")+")");r=e.search(s),r!==-1;){r>0&&(n.push({type:"text",data:e.slice(0,r)}),e=e.slice(r));var o=t.findIndex(h=>e.startsWith(h.left));if(r=w6(t[o].right,e,t[o].left.length),r===-1)break;var l=e.slice(0,r+t[o].right.length),a=S6.test(l)?l:e.slice(t[o].left.length,r);n.push({type:"math",data:a,rawData:l,display:t[o].display}),e=e.slice(r+t[o].right.length)}return e!==""&&n.push({type:"text",data:e}),n},A6=function(e,t){var r=C6(e,t.delimiters);if(r.length===1&&r[0].type==="text")return null;for(var n=document.createDocumentFragment(),s=0;s<r.length;s++)if(r[s].type==="text")n.appendChild(document.createTextNode(r[s].data));else{var o=document.createElement("span"),l=r[s].data;t.displayMode=r[s].display;try{t.preProcess&&(l=t.preProcess(l)),Ch.render(l,o,t)}catch(a){if(!(a instanceof Ch.ParseError))throw a;t.errorCallback("KaTeX auto-render: Failed to parse `"+r[s].data+"` with ",a),n.appendChild(document.createTextNode(r[s].rawData));continue}n.appendChild(o)}return n},M6=function i(e,t){for(var r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(n.nodeType===3){for(var s=n.textContent,o=n.nextSibling,l=0;o&&o.nodeType===Node.TEXT_NODE;)s+=o.textContent,o=o.nextSibling,l++;var a=A6(s,t);if(a){for(var h=0;h<l;h++)n.nextSibling.remove();r+=a.childNodes.length-1,e.replaceChild(a,n)}else r+=l}else n.nodeType===1&&function(){var c=" "+n.className+" ",u=!t.ignoredTags.has(n.nodeName.toLowerCase())&&t.ignoredClasses.every(d=>!c.includes(" "+d+" "));u&&i(n,t)}()}},c1=function(e,t){if(!e)throw new Error("No element provided to render");var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);r.delimiters=r.delimiters||[{left:"$$",right:"$$",display:!0},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}],r.ignoredTags=new Set(r.ignoredTags||["script","noscript","style","textarea","pre","code","option"]),r.ignoredClasses=r.ignoredClasses||[],r.errorCallback=r.errorCallback||console.error,r.macros=r.macros||{},M6(e,r)};function u1(i){c1(i,{output:"mathml",throwOnError:!1})}function Ah(i){switch(i.kind){case"stdout":return T6(i.text);case"stderr":return D6(i.text);case"error":return B6(i.text);case"display":return E6(i.mime,i.data);default:return null}}function T6(i){let e=document.createElement("pre");return e.className="output output-stdout",e.textContent=f1("",i),e}function D6(i){let e=document.createElement("pre");return e.className="output output-stderr",e.textContent=i,e}function B6(i){let e=document.createElement("div");e.className="output output-error";let t=document.createElement("pre");return t.textContent=i,e.appendChild(t),e}function E6(i,e){let t=document.createElement("div");if(t.className="output output-display",i==="text/plain"){let r=document.createElement("pre");r.textContent=e,t.appendChild(r)}else if(i==="text/html"){let r=document.createElement("iframe");r.sandbox="allow-scripts",r.srcdoc=e,r.style.width="100%",r.style.border="none",r.onload=()=>{try{r.style.height=r.contentDocument.body.scrollHeight+"px"}catch{}},t.appendChild(r)}else if(i.startsWith("image/")){let r=document.createElement("img");i==="image/svg+xml"?r.src="data:image/svg+xml;base64,"+btoa(e):r.src="data:"+i+";base64,"+e,r.style.maxWidth="100%",t.appendChild(r)}else if(i==="application/json"){let r=document.createElement("pre");try{r.textContent=JSON.stringify(JSON.parse(e),null,2)}catch{r.textContent=e}t.appendChild(r)}else{let r=document.createElement("pre");r.textContent=e,t.appendChild(r)}return t}function f1(i,e){let r=(i+e).split(`
`);for(let n=0;n<r.length;n++){let s=r[n].split("\r");r[n]=s[s.length-1]}return r.join(`
`)}function d1(i,e){if(e.kind==="stdout"&&i.lastElementChild&&i.lastElementChild.classList.contains("output-stdout")){i.lastElementChild.textContent=f1(i.lastElementChild.textContent,e.text);return}let t=Ah(e);t&&i.appendChild(t)}var jo=new Map;function In(i){return i.attrs||{}}function m1(i){if(!i)return"";let e=i.indexOf(`
`),t=e===-1?i:i.slice(0,e);return t.length>60?t.slice(0,57)+"...":t}function Mh(i,e,t){let r=document.createElement("div");return r.className=`cell cell-${i.kind}`,r.dataset.cellId=i.id,r.dataset.status=i.status||"idle",i.kind==="code"?r.appendChild(O6(i,e,t)):r.appendChild(z6(i,e,t)),r.addEventListener("click",n=>{n.target.closest("button")||t.setFocus(i.id)}),r}function O6(i,e,t){let r=document.createElement("div");r.className="cell-wrapper";let n=In(i),s=document.createElement("div");s.className="cell-gutter";let o=document.createElement("span");o.className="cell-number",o.textContent=i.execution_count>0?`[${i.execution_count}]`:"[ ]",s.appendChild(o);let l=document.createElement("span");l.className="cell-status-icon",s.appendChild(l),r.appendChild(s);let a=document.createElement("div");a.className="cell-content";let h=document.createElement("div");h.className="cell-collapsed-bar";let c=document.createElement("span");c.className="cell-collapsed-toggle",c.textContent="\u25B8",h.appendChild(c);let u=document.createElement("span");u.className="cell-collapsed-source",u.textContent=m1(i.source)||"(empty)",h.appendChild(u),a.appendChild(h);let d=document.createElement("div");d.className="cell-source-placeholder";let p=document.createElement("span");p.className="cell-collapsed-toggle",p.textContent="\u25B8",d.appendChild(p);let v=document.createElement("span");v.textContent="code",d.appendChild(v),a.appendChild(d);let y=document.createElement("div");y.className="cell-editor",a.appendChild(y);let w=z0(y,i.source,{onChange:B=>{i.source=B,e.updateSource(i.id,B)},onExecute:()=>{e.executeCell(i.id)},onExecuteAndMoveNext:()=>{e.executeCell(i.id),t.focusNext()},onEscape:()=>{y.querySelector(".cm-content")?.blur()},wsClient:e});jo.set(i.id,w);let S=document.createElement("div");if(S.className="cell-outputs",i.outputs)for(let B of i.outputs){let D=Ah(B);D&&S.appendChild(D)}a.appendChild(S);let A=!!n.collapsed,M=!!n.hide_source;function E(){A?(h.style.display="",d.style.display="none",y.style.display="none",S.style.display="none",c.textContent="\u25B8"):M?(h.style.display="none",d.style.display="",y.style.display="none",S.style.display="",p.textContent="\u25B8"):(h.style.display="none",d.style.display="none",y.style.display="",S.style.display="")}h.addEventListener("click",()=>{A=!1,E()}),d.addEventListener("click",()=>{M=!1,E()}),E();let T=document.createElement("div");return T.className="cell-actions",T.innerHTML=`
    <button data-action="run" title="Evaluate cell (Ctrl+Enter)">Run</button>
    <button data-action="delete" title="Delete cell (d)">Delete</button>
    <button data-action="move-up" title="Move cell up (Shift+K)">\u2191</button>
    <button data-action="move-down" title="Move cell down (Shift+J)">\u2193</button>
    <button data-action="toggle-type" title="Convert to text cell (m)">\u21C4 Text</button>
    <button data-action="toggle-collapse" title="Toggle collapsed (z)">${n.collapsed?"Expand":"Collapse"}</button>
    <button data-action="toggle-hide-source" title="Toggle hide source (Z)">${n.hide_source?"Show src":"Hide src"}</button>
  `,T.addEventListener("click",B=>{let D=B.target.dataset.action;if(!D)return;let V=t.findCellIndex(i.id);switch(D){case"run":e.executeCell(i.id);break;case"delete":e.deleteCell(i.id);break;case"move-up":V>0&&e.moveCell(i.id,V-1);break;case"move-down":V<t.cells.length-1&&e.moveCell(i.id,V+1);break;case"toggle-type":e.setCellKind(i.id,"text");break;case"toggle-collapse":{let U={...In(i),collapsed:!n.collapsed};e.setCellAttrs(i.id,U);break}case"toggle-hide-source":{let U={...In(i),hide_source:!n.hide_source};e.setCellAttrs(i.id,U);break}}}),a.appendChild(T),r.appendChild(a),r}function z6(i,e,t){let r=document.createElement("div");r.className="cell-wrapper";let n=In(i),s=document.createElement("div");s.className="cell-content";let o=document.createElement("div");o.className="cell-collapsed-bar";let l=document.createElement("span");l.className="cell-collapsed-toggle",l.textContent="\u25B8",o.appendChild(l);let a=document.createElement("span");a.className="cell-collapsed-source",a.textContent=m1(i.source)||"(empty)",o.appendChild(a),s.appendChild(o);let h=document.createElement("div");h.className="cell-markdown",h.innerHTML=i.rendered_html||'<p class="cell-markdown-empty">Empty text cell \u2014 click to edit</p>',u1(h),s.appendChild(h);let c=document.createElement("div");c.className="cell-editor",c.style.display="none",s.appendChild(c);let u=null,d=!!n.collapsed;function p(){d?(o.style.display="",h.style.display="none",c.style.display="none",l.textContent="\u25B8"):(o.style.display="none",h.style.display="")}o.addEventListener("click",()=>{d=!1,p()}),p(),h.addEventListener("dblclick",()=>{v()});function v(){h.style.display="none",c.style.display="block",u||(u=z0(c,i.source,{onChange:S=>{i.source=S,e.updateSource(i.id,S)},onExecute:()=>y(),onExecuteAndMoveNext:()=>{y(),t.focusNext()},onEscape:()=>y(),wsClient:null}),jo.set(i.id,u)),u.focus()}function y(){c.style.display="none",h.style.display="block",e.checkpoint()}let w=document.createElement("div");return w.className="cell-actions",w.innerHTML=`
    <button data-action="edit" title="Edit text (Enter)">Edit</button>
    <button data-action="delete" title="Delete cell (d)">Delete</button>
    <button data-action="move-up" title="Move cell up (Shift+K)">\u2191</button>
    <button data-action="move-down" title="Move cell down (Shift+J)">\u2193</button>
    <button data-action="toggle-type" title="Convert to code cell (m)">\u21C4 Code</button>
    <button data-action="toggle-collapse" title="Toggle collapsed (z)">${n.collapsed?"Expand":"Collapse"}</button>
  `,w.addEventListener("click",S=>{let A=S.target.dataset.action;if(!A)return;let M=t.findCellIndex(i.id);switch(A){case"edit":v();break;case"delete":e.deleteCell(i.id);break;case"move-up":M>0&&e.moveCell(i.id,M-1);break;case"move-down":M<t.cells.length-1&&e.moveCell(i.id,M+1);break;case"toggle-type":e.setCellKind(i.id,"code");break;case"toggle-collapse":{let E={...In(i),collapsed:!n.collapsed};e.setCellAttrs(i.id,E);break}}}),s.appendChild(w),r.appendChild(s),r}function Yo(i){let e=jo.get(i);e&&(e.destroy(),jo.delete(i))}function p1(i,e){let t=document.querySelector(`[data-cell-id="${i}"]`);if(t&&(t.dataset.status=e,e==="running"||e==="queued")){let r=t.querySelector(".cell-status-icon");r&&delete r.dataset.result}}function Th(i){let e=document.querySelector(`[data-cell-id="${i}"] .cell-outputs`);e&&(e.innerHTML="")}var Xo=class{constructor(e,t,r){this.container=e,this.store=t,this.wsClient=r,this._showSkeleton(),this._bindEvents()}_showSkeleton(){this.container.innerHTML="";let e=document.createElement("div");e.className="skeleton";for(let t=0;t<4;t++){let r=document.createElement("div");r.className="skeleton-cell",r.style.animationDelay=`${t*.1}s`,t===0&&r.classList.add("skeleton-cell-short"),e.appendChild(r)}this.container.appendChild(e)}_bindEvents(){this.store.on("notebook:loaded",()=>this.renderAll()),this.store.on("cell:status",({cellId:e,status:t})=>{p1(e,t),t==="running"&&Th(e)}),this.store.on("cell:output",({cellId:e,output:t})=>{let r=document.querySelector(`[data-cell-id="${e}"] .cell-outputs`);r&&d1(r,t)}),this.store.on("cell:outputs-cleared",({cellId:e})=>{Th(e)}),this.store.on("cell:updated",({cellId:e,cell:t})=>{this._replaceCell(e,t)}),this.store.on("cell:inserted",({pos:e,cell:t})=>{this._insertCellAt(e,t)}),this.store.on("cell:deleted",({cellId:e})=>{this._removeCell(e)}),this.store.on("cell:moved",()=>{this.renderAll()}),this.store.on("cell:execution-done",({cellId:e,success:t})=>{let r=document.querySelector(`[data-cell-id="${e}"]`);if(r){r.dataset.status="idle";let n=t?"flash-success":"flash-error";r.classList.add(n),r.addEventListener("animationend",()=>r.classList.remove(n),{once:!0});let s=r.querySelector(".cell-status-icon");s&&(s.dataset.result=t?"success":"error");let o=r.querySelector(".cell-number"),l=this.store.findCell(e);o&&l&&l.execution_count>0&&(o.textContent=`[${l.execution_count}]`)}}),this.store.on("focus:changed",({cellId:e,prevCellId:t})=>{if(t){let r=document.querySelector(`[data-cell-id="${t}"]`);r&&r.classList.remove("focused")}if(e){let r=document.querySelector(`[data-cell-id="${e}"]`);r&&(r.classList.add("focused"),r.scrollIntoView({block:"nearest",behavior:"smooth"}))}})}renderAll(){if(this.container.querySelectorAll("[data-cell-id]").forEach(t=>{Yo(t.dataset.cellId)}),this.container.innerHTML="",this.store.cells.length===0){let t=document.createElement("div");t.className="empty-state",t.innerHTML=`
        <div class="empty-state-icon">&laquo; &raquo;</div>
        <p>No cells yet.</p>
        <p class="empty-state-hint">
          Press <kbd>a</kbd> to add a code cell, or <kbd>t</kbd> for text.
        </p>
      `,this.container.appendChild(t);return}let e=this._groupIntoSections(this.store.cells);for(let t of e){let r=this._createSection(t);this.container.appendChild(r)}if(this.container.appendChild(this._createDivider(this.store.cells.length)),this.store.focusedCellId){let t=document.querySelector(`[data-cell-id="${this.store.focusedCellId}"]`);t&&t.classList.add("focused")}}_groupIntoSections(e){let t=[],r={name:null,cells:[]};for(let n of e){if(n.kind==="text"&&n.source){let s=n.source.match(/^#{1,2}\s+(.+)/m);s&&r.cells.length>0?(t.push(r),r={name:s[1].trim(),cells:[]}):s&&r.cells.length===0&&(r.name=s[1].trim())}r.cells.push(n)}return(r.cells.length>0||t.length===0)&&t.push(r),t}_createSection(e){let t=document.createElement("section");if(t.className="notebook-section",e.name){let n=document.createElement("div");n.className="section-header";let s=document.createElement("span");s.className="section-toggle",s.textContent="\u25BE",n.appendChild(s);let o=document.createElement("h2");o.textContent=e.name,n.appendChild(o),n.addEventListener("click",()=>{let l=t.dataset.collapsed==="true";t.dataset.collapsed=l?"false":"true",s.textContent=l?"\u25BE":"\u25B8"}),t.appendChild(n)}let r=document.createElement("div");r.className="section-body";for(let n of e.cells){let s=this.store.findCellIndex(n.id);r.appendChild(this._createDivider(s)),r.appendChild(Mh(n,this.wsClient,this.store))}return t.appendChild(r),t}_createDivider(e){let t=document.createElement("div");return t.className="cell-divider",t.dataset.dividerPos=e,t.innerHTML=`
      <span class="divider-line"></span>
      <span class="divider-buttons">
        <button data-action="add-code" title="Add code cell">+ Code</button>
        <button data-action="add-text" title="Add text cell">+ Text</button>
      </span>
      <span class="divider-line"></span>
    `,t.addEventListener("click",r=>{let n=r.target.dataset.action;if(!n)return;let s=this.container.querySelectorAll(".cell-divider"),o=0;for(let l of s){if(l===t)break;o++}n==="add-code"?this.wsClient.insertCell(o,"code"):n==="add-text"&&this.wsClient.insertCell(o,"text")}),t}_replaceCell(e,t){let r=document.querySelector(`[data-cell-id="${e}"]`);if(!r)return;Yo(e);let n=Mh(t,this.wsClient,this.store);e===this.store.focusedCellId&&n.classList.add("focused"),r.replaceWith(n)}_insertCellAt(e,t){this.renderAll(),this.store.setFocus(t.id)}_removeCell(e){let t=document.querySelector(`[data-cell-id="${e}"]`);if(t){Yo(e);let r=t.previousElementSibling;r&&r.classList.contains("cell-divider")&&r.remove(),t.remove()}this.store.cells.length===0&&this.renderAll()}};function g1(i,e){document.addEventListener("keydown",t=>{let r=document.getElementById("shortcuts-dialog");if(t.key==="Escape"&&r&&!r.hidden){t.preventDefault(),r.hidden=!0;return}if(t.target.closest(".cm-content")||t.target.tagName==="INPUT"||t.target.tagName==="TEXTAREA")return;let n=t.ctrlKey||t.metaKey;if(n)switch(t.key){case"s":t.preventDefault(),e.save();return;case"z":t.preventDefault(),t.shiftKey?e.redo():e.undo();return;case"Enter":t.preventDefault(),t.shiftKey?e.executeAll():i.focusedCellId&&e.executeCell(i.focusedCellId);return}if(!n&&!t.altKey)switch(t.key){case"?":t.preventDefault(),window._quillToggleShortcuts&&window._quillToggleShortcuts();return;case"j":case"ArrowDown":t.preventDefault(),i.focusNext();return;case"k":case"ArrowUp":t.preventDefault(),i.focusPrev();return;case"J":t.preventDefault();{let s=i.findCellIndex(i.focusedCellId);s>=0&&s<i.cells.length-1&&e.moveCell(i.focusedCellId,s+1)}return;case"K":t.preventDefault();{let s=i.findCellIndex(i.focusedCellId);s>0&&e.moveCell(i.focusedCellId,s-1)}return;case"Enter":if(t.preventDefault(),t.shiftKey)i.focusedCellId&&(e.executeCell(i.focusedCellId),i.focusNext());else if(i.focusedCellId){let s=document.querySelector(`[data-cell-id="${i.focusedCellId}"] .cm-content`);if(s)s.focus();else{let o=document.querySelector(`[data-cell-id="${i.focusedCellId}"] .cell-markdown`);o&&o.dispatchEvent(new Event("dblclick"))}}return;case"a":t.preventDefault();{let s=i.focusedCellId?i.findCellIndex(i.focusedCellId)+1:i.cells.length;e.insertCell(s,"code")}return;case"t":t.preventDefault();{let s=i.focusedCellId?i.findCellIndex(i.focusedCellId)+1:i.cells.length;e.insertCell(s,"text")}return;case"d":t.preventDefault(),i.focusedCellId&&e.deleteCell(i.focusedCellId);return;case"m":if(t.preventDefault(),i.focusedCellId){let s=i.findCell(i.focusedCellId);s&&e.setCellKind(i.focusedCellId,s.kind==="code"?"text":"code")}return;case"c":if(t.preventDefault(),i.focusedCellId){let s=i.findCell(i.focusedCellId);s&&s.kind==="code"&&e.clearOutputs(i.focusedCellId)}return;case"z":if(t.preventDefault(),i.focusedCellId){let s=i.findCell(i.focusedCellId);if(s){let o=s.attrs||{};e.setCellAttrs(i.focusedCellId,{...o,collapsed:!o.collapsed})}}return;case"Z":if(t.preventDefault(),i.focusedCellId){let s=i.findCell(i.focusedCellId);if(s&&s.kind==="code"){let o=s.attrs||{};e.setCellAttrs(i.focusedCellId,{...o,hide_source:!o.hide_source})}}return}})}var rr=new qn,ii=new Wn(rr),L6=document.getElementById("notebook"),E8=new Xo(L6,rr,ii),R6=document.getElementById("toast-container");function Jo(i,e="info"){let t=document.createElement("div");t.className=`toast toast-${e}`,t.textContent=i,R6.appendChild(t),t.offsetHeight,t.classList.add("toast-visible"),setTimeout(()=>{t.classList.remove("toast-visible"),t.addEventListener("transitionend",()=>t.remove(),{once:!0}),setTimeout(()=>t.remove(),500)},2500)}rr.on("saved",()=>Jo("Notebook saved","success"));rr.on("error",({message:i})=>Jo(i,"error"));rr.on("reconnected",()=>Jo("Reconnected","success"));rr.on("cell:deleted",()=>Jo("Cell deleted \u2014 Ctrl+Z to undo","info"));var I6=document.querySelector("#kernel-status .status-dot"),P6=document.querySelector("#kernel-status .status-text");rr.on("connection:changed",({status:i})=>{I6.dataset.status=i,P6.textContent=i==="connected"?"Connected":i==="disconnected"?"Reconnecting\u2026":"Connecting\u2026"});var ri=document.getElementById("connection-banner");rr.on("connection:changed",({status:i})=>{i==="disconnected"?(ri.hidden=!1,ri.offsetHeight,ri.classList.add("visible")):i==="connected"&&(ri.classList.remove("visible"),ri.addEventListener("transitionend",()=>{ri.hidden=!0},{once:!0}),setTimeout(()=>{ri.hidden=!0},500))});document.getElementById("btn-run-all").addEventListener("click",()=>{ii.executeAll()});document.getElementById("btn-interrupt").addEventListener("click",()=>{ii.interrupt()});document.getElementById("btn-clear-all").addEventListener("click",()=>{ii.clearAllOutputs()});document.getElementById("btn-save").addEventListener("click",()=>{ii.save()});var _o=document.getElementById("shortcuts-dialog"),N6=document.getElementById("shortcuts-close");function Zo(){_o.hidden=!_o.hidden}document.getElementById("btn-help").addEventListener("click",Zo);N6.addEventListener("click",Zo);_o.addEventListener("click",i=>{i.target===_o&&Zo()});window._quillToggleShortcuts=Zo;document.addEventListener("mousedown",i=>{!i.target.closest(".cell")&&!i.target.closest(".toolbar")&&!i.target.closest(".dialog-backdrop")&&rr.clearFocus()});g1(rr,ii);ii.connect();
