// ---------------------------------------------------------------------------
//   Copyright (c) 2026 The Raven authors. All rights reserved.
//   Distributed under the ISC license, see terms at the end of the file.

//   Based on ocaml_simd (https://github.com/janestreet/ocaml_simd)
//   Copyright (c) 2025-2026 Jane Street Group, LLC
//   Released under the MIT license.
//   --------------------------------------------------------------------------
#include <assert.h>

void ocaml_simd_avx_unreachable() { assert(!"SIMD is not supported in bytecode mode."); }
void caml_sse2_unreachable() { assert(!"SIMD is not supported in bytecode mode."); }

#define BUILTIN(name)                                                                    \
  void name() { assert(!"Didn't use [@@builtin] intrinsic."); }

BUILTIN(caml_vec256_cast)

BUILTIN(caml_avx_vec256_load_aligned)
BUILTIN(caml_avx_vec256_load_unaligned)
BUILTIN(caml_avx_vec256_store_aligned)
BUILTIN(caml_avx_vec256_store_unaligned)
BUILTIN(caml_avx_vec256_load_aligned_uncached)
BUILTIN(caml_avx_vec256_store_aligned_uncached)
BUILTIN(caml_avx_vec256_load_broadcast128)
BUILTIN(caml_avx_vec256_load_broadcast64)
BUILTIN(caml_avx_vec256_load_broadcast32)
BUILTIN(caml_avx_vec128_load_broadcast32)
BUILTIN(caml_avx_vec128_load_mask64)
BUILTIN(caml_avx_vec256_load_mask64)
BUILTIN(caml_avx_vec128_load_mask32)
BUILTIN(caml_avx_vec256_load_mask32)
BUILTIN(caml_avx_vec256_store_mask64)
BUILTIN(caml_avx_vec256_store_mask32)
BUILTIN(caml_avx_vec128_store_mask64)
BUILTIN(caml_avx_vec128_store_mask32)

BUILTIN(caml_vec256_low_of_vec128)
BUILTIN(caml_vec256_low_to_vec128)
BUILTIN(caml_float32x8_low_of_float32)
BUILTIN(caml_float32x8_low_to_float32)
BUILTIN(caml_float64x4_low_of_float)
BUILTIN(caml_float64x4_low_to_float)
BUILTIN(caml_int32x8_low_of_int32)
BUILTIN(caml_int32x8_low_to_int32)
BUILTIN(caml_int64x4_low_of_int64)
BUILTIN(caml_int64x4_low_to_int64)
BUILTIN(caml_int16x16_low_of_int16)
BUILTIN(caml_int16x16_low_to_int16)
BUILTIN(caml_int8x32_low_of_int8)
BUILTIN(caml_int8x32_low_to_int8)

BUILTIN(caml_float32x8_const1)
BUILTIN(caml_float32x8_const8)
BUILTIN(caml_float64x4_const1)
BUILTIN(caml_float64x4_const4)
BUILTIN(caml_int64x4_const1)
BUILTIN(caml_int64x4_const4)
BUILTIN(caml_int32x8_const1)
BUILTIN(caml_int32x8_const8)
BUILTIN(caml_int16x16_const1)
BUILTIN(caml_int16x16_const16)
BUILTIN(caml_int8x32_const1)
BUILTIN(caml_int8x32_const32)

BUILTIN(caml_avx_float64x4_add)
BUILTIN(caml_avx_float32x8_add)
BUILTIN(caml_avx_float32x8_addsub)
BUILTIN(caml_avx_float64x4_addsub)
BUILTIN(caml_avx_vec256_and)
BUILTIN(caml_avx_vec256_andnot)
BUILTIN(caml_avx_vec256_blend_64)
BUILTIN(caml_avx_vec256_blend_32)
BUILTIN(caml_avx_vec256_blendv_64)
BUILTIN(caml_avx_vec256_blendv_32)
BUILTIN(caml_avx_vec256_broadcast_64)
BUILTIN(caml_avx_vec256_broadcast_32)
BUILTIN(caml_avx_vec128_broadcast_32)
BUILTIN(caml_avx_float64x4_round_pos_inf)
BUILTIN(caml_avx_float32x8_round_pos_inf)
BUILTIN(caml_avx_float64x4_cmp)
BUILTIN(caml_avx_float32x8_cmp)
BUILTIN(caml_avx_cvt_int32x4_float64x4)
BUILTIN(caml_avx_cvt_int32x8_float32x8)
BUILTIN(caml_avx_cvt_float64x4_int32x4)
BUILTIN(caml_avx_cvt_float64x4_float32x4)
BUILTIN(caml_avx_cvt_float32x8_int32x8)
BUILTIN(caml_avx_cvt_float32x4_float64x4)
BUILTIN(caml_avx_cvtt_float64x4_int32x4)
BUILTIN(caml_avx_cvtt_float32x8_int32x8)
BUILTIN(caml_avx_float64x4_div)
BUILTIN(caml_avx_float32x8_div)
BUILTIN(caml_avx_float32x4x2_dp)
BUILTIN(caml_avx_vec256_extract_128)
BUILTIN(caml_avx_float64x4_round_neg_inf)
BUILTIN(caml_avx_float32x8_round_neg_inf)
BUILTIN(caml_avx_float64x2x2_hadd)
BUILTIN(caml_avx_float32x4x2_hadd)
BUILTIN(caml_avx_float64x2x2_hsub)
BUILTIN(caml_avx_float32x4x2_hsub)
BUILTIN(caml_avx_vec256_insert_128)
BUILTIN(caml_avx_float64x4_max)
BUILTIN(caml_avx_float32x8_max)
BUILTIN(caml_avx_float64x4_min)
BUILTIN(caml_avx_float32x8_min)
BUILTIN(caml_avx_vec256_dup_even_64)
BUILTIN(caml_avx_vec256_dup_odd_32)
BUILTIN(caml_avx_vec256_dup_even_32)
BUILTIN(caml_avx_vec256_movemask_64)
BUILTIN(caml_avx_vec256_movemask_32)
BUILTIN(caml_avx_float64x4_mul)
BUILTIN(caml_avx_float32x8_mul)
BUILTIN(caml_avx_vec256_or)
BUILTIN(caml_avx_vec128_permute_64)
BUILTIN(caml_avx_vec128x2_permute_64)
BUILTIN(caml_avx_vec128_permute_32)
BUILTIN(caml_avx_vec128x2_permute_32)
BUILTIN(caml_avx_vec256_permute2_128)
BUILTIN(caml_avx_vec128_permutev_64)
BUILTIN(caml_avx_vec128x2_permutev_64)
BUILTIN(caml_avx_vec128_permutev_32)
BUILTIN(caml_avx_vec128x2_permutev_32)
BUILTIN(caml_avx_float32x8_rcp)
BUILTIN(caml_avx_float64x4_round)
BUILTIN(caml_avx_float32x8_round)
BUILTIN(caml_avx_float64x4_round_current)
BUILTIN(caml_avx_float32x8_round_current)
BUILTIN(caml_avx_float64x4_round_towards_zero)
BUILTIN(caml_avx_float32x8_round_towards_zero)
BUILTIN(caml_avx_float64x4_round_near)
BUILTIN(caml_avx_float32x8_round_near)
BUILTIN(caml_avx_float32x8_rsqrt)
BUILTIN(caml_avx_vec128x2_shuffle_64)
BUILTIN(caml_avx_vec128x2_shuffle_32)
BUILTIN(caml_avx_float64x4_sqrt)
BUILTIN(caml_avx_float32x8_sqrt)
BUILTIN(caml_avx_float64x4_sub)
BUILTIN(caml_avx_float32x8_sub)
BUILTIN(caml_avx_vec256_testz)
BUILTIN(caml_avx_vec256_testc)
BUILTIN(caml_avx_vec256_testnzc)
BUILTIN(caml_avx_vec128x2_interleave_high_64)
BUILTIN(caml_avx_vec128x2_interleave_high_32)
BUILTIN(caml_avx_vec128x2_interleave_low_64)
BUILTIN(caml_avx_vec128x2_interleave_low_32)
BUILTIN(caml_avx_vec256_xor)
BUILTIN(caml_avx_vec128x2_align_right_bytes)

BUILTIN(caml_avx2_int8x32_abs)
BUILTIN(caml_avx2_int16x16_abs)
BUILTIN(caml_avx2_int32x8_abs)
BUILTIN(caml_avx2_int8x32_add)
BUILTIN(caml_avx2_int16x16_add)
BUILTIN(caml_avx2_int32x8_add)
BUILTIN(caml_avx2_int64x4_add)
BUILTIN(caml_avx2_int8x32_add_saturating)
BUILTIN(caml_avx2_int16x16_add_saturating)
BUILTIN(caml_avx2_int8x32_add_saturating_unsigned)
BUILTIN(caml_avx2_int16x16_add_saturating_unsigned)
BUILTIN(caml_avx2_int8x32_avg_unsigned)
BUILTIN(caml_avx2_int16x16_avg_unsigned)
BUILTIN(caml_avx2_vec128x2_blend_16)
BUILTIN(caml_avx2_vec256_blendv_8)
BUILTIN(caml_avx2_vec128_broadcast_8)
BUILTIN(caml_avx2_vec256_broadcast_8)
BUILTIN(caml_avx2_vec128_broadcast_16)
BUILTIN(caml_avx2_vec256_broadcast_16)
BUILTIN(caml_avx2_vec128x2_shift_left_bytes)
BUILTIN(caml_avx2_vec128x2_shift_right_bytes)
BUILTIN(caml_avx2_int8x32_cmpeq)
BUILTIN(caml_avx2_int16x16_cmpeq)
BUILTIN(caml_avx2_int32x8_cmpeq)
BUILTIN(caml_avx2_int64x4_cmpeq)
BUILTIN(caml_avx2_int8x32_cmpgt)
BUILTIN(caml_avx2_int16x16_cmpgt)
BUILTIN(caml_avx2_int32x8_cmpgt)
BUILTIN(caml_avx2_int64x4_cmpgt)
BUILTIN(caml_avx2_cvtsx_int16x8_int32x8)
BUILTIN(caml_avx2_cvtsx_int16x8_int64x4)
BUILTIN(caml_avx2_cvtsx_int32x4_int64x4)
BUILTIN(caml_avx2_cvtsx_int8x16_int16x16)
BUILTIN(caml_avx2_cvtsx_int8x16_int32x8)
BUILTIN(caml_avx2_cvtsx_int8x16_int64x4)
BUILTIN(caml_avx2_cvtzx_int16x8_int32x8)
BUILTIN(caml_avx2_cvtzx_int16x8_int64x4)
BUILTIN(caml_avx2_cvtzx_int32x4_int64x4)
BUILTIN(caml_avx2_cvtzx_int8x16_int16x16)
BUILTIN(caml_avx2_cvtzx_int8x16_int32x8)
BUILTIN(caml_avx2_cvtzx_int8x16_int64x4)
BUILTIN(caml_avx2_int16x8x2_hadd)
BUILTIN(caml_avx2_int32x4x2_hadd)
BUILTIN(caml_avx2_int16x8x2_hadd_saturating)
BUILTIN(caml_avx2_int16x8x2_hsub)
BUILTIN(caml_avx2_int32x4x2_hsub)
BUILTIN(caml_avx2_int16x8x2_hsub_saturating)
BUILTIN(caml_avx2_int16x16_mul_hadd_int32x8)
BUILTIN(caml_avx2_int8x32_mul_unsigned_hadd_saturating_int16x16)
BUILTIN(caml_avx2_int8x32_max)
BUILTIN(caml_avx2_int16x16_max)
BUILTIN(caml_avx2_int32x8_max)
BUILTIN(caml_avx2_int8x32_max_unsigned)
BUILTIN(caml_avx2_int16x16_max_unsigned)
BUILTIN(caml_avx2_int32x8_max_unsigned)
BUILTIN(caml_avx2_int8x32_min)
BUILTIN(caml_avx2_int16x16_min)
BUILTIN(caml_avx2_int32x8_min)
BUILTIN(caml_avx2_int8x32_min_unsigned)
BUILTIN(caml_avx2_int16x16_min_unsigned)
BUILTIN(caml_avx2_int32x8_min_unsigned)
BUILTIN(caml_avx2_vec256_movemask_8)
BUILTIN(caml_avx2_int8x16x2_multi_sad_unsigned)
BUILTIN(caml_avx2_int32x8_mul_even)
BUILTIN(caml_avx2_int32x8_mul_even_unsigned)
BUILTIN(caml_avx2_int16x16_mul_high)
BUILTIN(caml_avx2_int16x16_mul_high_unsigned)
BUILTIN(caml_avx2_int16x16_mul_round)
BUILTIN(caml_avx2_int16x16_mul_low)
BUILTIN(caml_avx2_int32x8_mul_low)
BUILTIN(caml_avx2_cvt_int16x16_int8x32_saturating)
BUILTIN(caml_avx2_cvt_int32x8_int16x16_saturating)
BUILTIN(caml_avx2_cvt_int16x16_int8x32_saturating_unsigned)
BUILTIN(caml_avx2_cvt_int32x8_int16x16_saturating_unsigned)
BUILTIN(caml_avx2_vec256_permute_64)
BUILTIN(caml_avx2_vec256_permutev_32)
BUILTIN(caml_avx2_int8x32_sad_unsigned)
BUILTIN(caml_avx2_vec128x2_shuffle_8)
BUILTIN(caml_avx2_vec128x2_shuffle_high_16)
BUILTIN(caml_avx2_vec128x2_shuffle_low_16)
BUILTIN(caml_avx2_int8x32_mulsign)
BUILTIN(caml_avx2_int16x16_mulsign)
BUILTIN(caml_avx2_int32x8_mulsign)
BUILTIN(caml_avx2_int16x16_sll)
BUILTIN(caml_avx2_int32x8_sll)
BUILTIN(caml_avx2_int64x4_sll)
BUILTIN(caml_avx2_int16x16_slli)
BUILTIN(caml_avx2_int32x8_slli)
BUILTIN(caml_avx2_int64x4_slli)
BUILTIN(caml_avx2_int32x4_sllv)
BUILTIN(caml_avx2_int32x8_sllv)
BUILTIN(caml_avx2_int64x2_sllv)
BUILTIN(caml_avx2_int64x4_sllv)
BUILTIN(caml_avx2_int16x16_sra)
BUILTIN(caml_avx2_int32x8_sra)
BUILTIN(caml_avx2_int16x16_srai)
BUILTIN(caml_avx2_int32x8_srai)
BUILTIN(caml_avx2_int32x4_srav)
BUILTIN(caml_avx2_int32x8_srav)
BUILTIN(caml_avx2_int16x16_srl)
BUILTIN(caml_avx2_int32x8_srl)
BUILTIN(caml_avx2_int64x4_srl)
BUILTIN(caml_avx2_int16x16_srli)
BUILTIN(caml_avx2_int32x8_srli)
BUILTIN(caml_avx2_int64x4_srli)
BUILTIN(caml_avx2_int32x4_srlv)
BUILTIN(caml_avx2_int32x8_srlv)
BUILTIN(caml_avx2_int64x2_srlv)
BUILTIN(caml_avx2_int64x4_srlv)
BUILTIN(caml_avx2_int8x32_sub)
BUILTIN(caml_avx2_int16x16_sub)
BUILTIN(caml_avx2_int32x8_sub)
BUILTIN(caml_avx2_int64x4_sub)
BUILTIN(caml_avx2_int8x32_sub_saturating)
BUILTIN(caml_avx2_int16x16_sub_saturating)
BUILTIN(caml_avx2_int8x32_sub_saturating_unsigned)
BUILTIN(caml_avx2_int16x16_sub_saturating_unsigned)
BUILTIN(caml_avx2_vec128x2_interleave_high_8)
BUILTIN(caml_avx2_vec128x2_interleave_high_16)
BUILTIN(caml_avx2_vec128x2_interleave_low_8)
BUILTIN(caml_avx2_vec128x2_interleave_low_16)

BUILTIN(caml_f16c_cvt_float16x8_float32x4)
BUILTIN(caml_f16c_cvt_float16x8_float32x8)
BUILTIN(caml_f16c_cvt_float32x4_float16x8)
BUILTIN(caml_f16c_cvt_float32x8_float16x8)

BUILTIN(caml_fma_float32_mul_add)
BUILTIN(caml_fma_float32_mul_sub)
BUILTIN(caml_fma_float32_neg_mul_add)
BUILTIN(caml_fma_float32_neg_mul_sub)
BUILTIN(caml_fma_float64_mul_add)
BUILTIN(caml_fma_float64_mul_sub)
BUILTIN(caml_fma_float64_neg_mul_add)
BUILTIN(caml_fma_float64_neg_mul_sub)
BUILTIN(caml_fma_float32x4_mul_add)
BUILTIN(caml_fma_float32x4_mul_sub)
BUILTIN(caml_fma_float32x4_mul_addsub)
BUILTIN(caml_fma_float32x4_mul_subadd)
BUILTIN(caml_fma_float32x4_neg_mul_add)
BUILTIN(caml_fma_float32x4_neg_mul_sub)
BUILTIN(caml_fma_float64x2_mul_add)
BUILTIN(caml_fma_float64x2_mul_sub)
BUILTIN(caml_fma_float64x2_mul_addsub)
BUILTIN(caml_fma_float64x2_mul_subadd)
BUILTIN(caml_fma_float64x2_neg_mul_add)
BUILTIN(caml_fma_float64x2_neg_mul_sub)
BUILTIN(caml_fma_float32x8_mul_add)
BUILTIN(caml_fma_float32x8_mul_sub)
BUILTIN(caml_fma_float32x8_mul_addsub)
BUILTIN(caml_fma_float32x8_mul_subadd)
BUILTIN(caml_fma_float32x8_neg_mul_add)
BUILTIN(caml_fma_float32x8_neg_mul_sub)
BUILTIN(caml_fma_float64x4_mul_add)
BUILTIN(caml_fma_float64x4_mul_sub)
BUILTIN(caml_fma_float64x4_mul_addsub)
BUILTIN(caml_fma_float64x4_mul_subadd)
BUILTIN(caml_fma_float64x4_neg_mul_add)
BUILTIN(caml_fma_float64x4_neg_mul_sub)