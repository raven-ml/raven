(library
 (public_name nx.pocketfft)
 (name pocketfft)
 (foreign_stubs
  (language cxx)
  (names pocketfft_stubs)
  (flags
   (:standard
    (:include cxx_flags.sexp)))
  (include_dirs pocketfft))
 (c_library_flags (:standard \ -shared-libgcc)))

(rule
 (targets cxx_flags.sexp)
 (action
  (run config/discover.exe)))
